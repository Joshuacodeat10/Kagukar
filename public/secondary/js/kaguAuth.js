var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this._interfaces=new Array,this._implementations=new Array}return t.prototype.add=function(t,e){this._interfaces.push(t),this._implementations.push(e)},t.prototype.resolve=function(t){var e=this._interfaces.indexOf(t);return this._implementations[e]()},t}();t.DependencyContainer=e}(e=t.Ioc||(t.Ioc={}))}(e=t.Core||(t.Core={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){this.dependencyContainer=new t.DependencyContainer}return e.prototype.register=function(e,i,o){switch(o){case t.LifeStyle.Singleton:var n=new i;this.dependencyContainer.add(e,function(){return n});break;case t.LifeStyle.Transient:this.dependencyContainer.add(e,function(){return new i})}},e.prototype.resolve=function(t){return this.dependencyContainer.resolve(t)},e}();t.MembersIocContainer=e}(e=t.Ioc||(t.Ioc={}))}(e=t.Core||(t.Core={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){}return e.container=new t.MembersIocContainer,e}();t.OpenAccountContainer=e}(e=t.Ioc||(t.Ioc={}))}(e=t.Core||(t.Core={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e,i,o){this.logger=t,this.frameService=e,this.scroller=i,this.postMessenger=o,this.previousFrameHeight=-1}return t.prototype.initialise=function(){this.frameService.postIframeLoaded(),this.frameService.postHideHeader(),this.frameService.postHideFooterOverlay(),this.frameService.postInactivityReset(),this.loadHeightObserver(),this.setUnloadEvents(),this.iframeFullHeight(),this.scroller.scrollToPoint(0)},t.prototype.getPreviousIframeHeight=function(){return this.previousFrameHeight},t.prototype.iframeFullHeight=function(){var t=screen.height,e=screen.width,i=$("#frameSizeDetector").offset().top+60;this.iframeHeight(Math.max(t,e,i))},t.prototype.iframeHeight=function(t){this.previousFrameHeight!==t&&(this.frameService.postIframeHeight(t),this.previousFrameHeight=t)},t.prototype.loadHeightObserver=function(){var t=this;try{var e={attributes:!0,childList:!0,characterData:!0,subtree:!0},i=new MutationObserver(function(){return t.iframeFullHeight()});i.observe(window.document,e)}catch(e){setInterval(function(){return t.iframeFullHeight()},1e3)}},t.prototype.setUnloadEvents=function(){var t=this;window.addEventListener("beforeunload",function(){return t.iframeHeight(0)})},t}();t.FrameMessenger=e}(e=t.Messenger||(t.Messenger={}))}(e=t.Frame||(t.Frame={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Ioc.OpenAccountContainer.container;this.urlService=e.resolve("IUrlService")}return e.prototype.get=function(t,e,i,o){this.makeRequest(t,e,"GET",i,o)},e.prototype.post=function(t,e,i,o,n){void 0===n&&(n=!0),this.makeRequest(t,e,"POST",i,o,n)},e.prototype.makeRequest=function(e,i,o,n,r,a){void 0===a&&(a=!0);var s=this.urlService.getParameter("platform");s&&s.length||(s=this.urlService.getParameter("platformId")),s&&s.length&&(e=this.urlService.insertParameter(e,"platform",s));var c=this.appendUrlParams(e,["displaymode","prdid","DWTYPE","rh","tmst","rurl","frommembers"]);$.ajax({data:i,headers:t.AntiForgery.createAjaxPostHeadersWithAntiForgeryToken(),type:o,url:c,async:a,xhrFields:{withCredientials:!0}}).done(n).fail(function(e,i,o){if(r)r(e.responseText);else{var n=t.Ioc.OpenAccountContainer.container,a=n.resolve("ILogger");a.warn("Ajax error: Status Code = "+e.status+", Message = "+o)}})},e.prototype.appendUrlParams=function(t,e){var i=this;return e.forEach(function(e){var o=i.urlService.getParameter(e);o&&o.length&&(t=i.urlService.insertParameter(t,e,o))}),t},e}();e.JQueryHttpService=i}(e=t.HttpService||(t.HttpService={}))}(e=t.Core||(t.Core={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.parse=function(t,e){var o;return o=t?new i((!0),JSON.parse(t,e)):new i((!1),{})},t}();t.JsonParser=e;var i=function(){function t(t,e){this._success=t,this._result=e}return t.prototype.isSuccess=function(){return this._success},t.prototype.result=function(){return this._result},t}();t.JsonParseResult=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.info=function(t){},t.prototype.warn=function(t){},t.prototype.error=function(t){},t}();t.ConsoleLogger=e}(e=t.Logging||(t.Logging={}))}(e=t.Core||(t.Core={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.info=function(t){},t.prototype.warn=function(t){},t.prototype.error=function(t){},t}();t.LegacyLogger=e}(e=t.Logging||(t.Logging={}))}(e=t.Core||(t.Core={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.useragent=window.navigator.userAgent,this.setIsMobile(),this.setIsUaIe9AndBelow(),this.setIsUaIe(),this.setIsEdge16(),this.setIsFirefox(),this.setIsAndroid(),this.setIsWindowsPhone(),this.setIsGalaxyDeviceWithNativeBrowserScalingIssue(),this.setIsIosDevice(),this.setIsPokerClient(),this.setIsAndroidNativeBrowser(),this.setIsIeCompatibilityMode(),this.setIsDateInputSupported()}return t.prototype.isIPhone=function(){return this.isIPhoneDevice},t.prototype.isMobile=function(){return this.isUaMobile},t.prototype.isIos=function(){return this.isIosDevice},t.prototype.isIe9AndBelow=function(){return this.isUaIe9AndBelow},t.prototype.isIeCompatibilityMode=function(){return this.isUaIeCompatibilityMode},t.prototype.isIe=function(){return this.isUaIe},t.prototype.isEdge16=function(){return this.isEdge16Attr},t.prototype.isMozillaFirefox=function(){return this.isFirefox},t.prototype.isDeviceWithNativeBrowserScalingIssue=function(){return this.isGalaxyDeviceWithNativeBrowserScalingIssue},t.prototype.browserPasswordCharacter=function(){return this.isIe()||this.isFirefox||this.isIosDevice?"â—":"â€¢"},t.prototype.isAndroid=function(){return this.isAndroidDevice},t.prototype.isWindowsPhone=function(){return this.isWindowsPhoneDevice},t.prototype.userAgent=function(){return this.useragent},t.prototype.isPokerClient=function(){return this.isPokerClientBrowser},t.prototype.isAndroidNativeBrowser=function(){return this.isAndroidNative},t.prototype.isDateInputSupported=function(){return this.isDatePickerSupported},t.prototype.setIsAndroidNativeBrowser=function(){var t=this.useragent;this.isAndroidNative=t.indexOf("Mozilla/5.0")>-1&&t.indexOf("Android")>-1&&t.indexOf("AppleWebKit")>-1&&!(t.indexOf("Chrome")>-1)},t.prototype.setIsMobile=function(){this.useragent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)|(BlackBerry)|(Windows Phone)|(bet365)/i)?this.isUaMobile=!0:this.isUaMobile=!1},t.prototype.setIsUaIe9AndBelow=function(){var t=this.useragent;if(this.isUaIe9AndBelow=!1,t.match(/(MSIE)/i)){var e=t.indexOf("MSIE "),i=parseInt(this.useragent.substring(e+5,t.indexOf(".",e)));this.isUaIe9AndBelow=i<10}},t.prototype.setIsIeCompatibilityMode=function(){var t=this.userAgent();this.isUaIeCompatibilityMode=!1,t.match(/(Microsoft Build\/Virtual)/i)&&(this.isUaIeCompatibilityMode=!0)},t.prototype.setIsUaIe=function(){this.isUaIe=!1,this.useragent.match(/(MSIE)|(Trident)/i)&&(this.isUaIe=!0)},t.prototype.setIsEdge16=function(){this.isEdge16Attr=!1,this.useragent.match(/(Edge.16)/i)&&(this.isEdge16Attr=!0)},t.prototype.setIsFirefox=function(){this.isFirefox=!1,this.useragent.toLowerCase().indexOf("firefox")>-1&&(this.isFirefox=!0)},t.prototype.setIsAndroid=function(){this.isAndroidDevice=!1,this.useragent.match(/(android)/i)&&(this.isAndroidDevice=!0)},t.prototype.setIsWindowsPhone=function(){this.isWindowsPhoneDevice=!1,this.useragent.match(/(Windows Phone)/i)&&(this.isWindowsPhoneDevice=!0)},t.prototype.setIsGalaxyDeviceWithNativeBrowserScalingIssue=function(){var e=this,i=t.galaxyS3UserAgents.concat(t.galaxyNoteUserAgents);this.isGalaxyDeviceWithNativeBrowserScalingIssue=!1,i.forEach(function(t){var i=new RegExp(t);e.useragent.match(i)&&(e.isGalaxyDeviceWithNativeBrowserScalingIssue=!0)})},t.prototype.setIsIosDevice=function(){this.isIosDevice=!1,this.isIPhoneDevice=!1,this.useragent.match(/(iPad)|(iPhone)|(iPod)/i)&&(this.isIosDevice=!0,this.isIPhoneDevice=/(iPhone)/i.test(this.useragent))},t.prototype.setIsPokerClient=function(){this.isPokerClientBrowser=!1,this.useragent.toLowerCase().indexOf("pokerclient")>-1&&(this.isPokerClientBrowser=!0)},t.prototype.setIsDateInputSupported=function(){this.isDatePickerSupported=!1;var t=document.createElement("input");t.setAttribute("type","date");var e="not-a-date";t.setAttribute("value",e),this.isDatePickerSupported="text"!==t.type&&t.value!==e},t.galaxyS3UserAgents=["GT-I9300","GT-I9305","SHV-E210K","SGH-T999","SGH-I747","SGH-N064","SGH-N035","SCH-J021","SCH-R530","SCH-I535","SCH-S960L","SCH-S968C","GT-I9308","SCH-I939","GT-I9301I","GT-I8190","GT-I9305"],t.galaxyNoteUserAgents=["GT-N5110","GT-N5120","GT-N5105"],t}();t.UserAgent=e}(e=t.UserAgent||(t.UserAgent={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(i){var o=function(){function i(){var e=t.Core.Ioc.OpenAccountContainer.container;this.client=e.resolve("IClient")}return i.prototype.show=function(i){$(e.LightBoxService.greyOutClassName).show();var o=$(t.Keys.PageWaitingKeys.PageWaitingSelector);if(o.addClass(t.Keys.PageWaitingKeys.PageWaitingSpinnerClass),null==i){var n=o.height();i=(this.client.getHeight(!1)-n)/2}var r=i.toString()+"px";o.css({top:r})},i.prototype.hide=function(){$(e.LightBoxService.greyOutClassName).hide(),$(t.Keys.PageWaitingKeys.PageWaitingSelector).removeClass(t.Keys.PageWaitingKeys.PageWaitingSpinnerClass).removeAttr("style")},i}();i.PageWaiting=o}(i=e.PageWaiting||(e.PageWaiting={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.useragent=e.resolve("IUserAgent")}return e.prototype.getHeight=function(t){var e=this.isMobileDevice()?window.screen.availHeight:$(window).height();return this.isMobileDevice()&&!this.useragent.isAndroid()&&this.isLandscapeOrientation()&&(e=window.screen.availWidth),!t&&this.useragent.isDeviceWithNativeBrowserScalingIssue()&&(e=this.getScalingAdjustedHeight()),e},e.prototype.isMobileDevice=function(){return"true"===$("body").attr("data-is-mobile")},e.prototype.isLandscapeOrientation=function(){var t=this.useragent.isAndroidNativeBrowser()?this.getIsAndroidNativeBrowserInLandscapeMode():this.useragent.isAndroid()?window.outerWidth>window.outerHeight:90===Math.abs(Number(window.orientation));return t},e.prototype.getScalingAdjustedHeight=function(){var t=window.devicePixelRatio?window.devicePixelRatio:2,e=window.screen.availHeight;return this.isAndroidNativeBrowserVersionLessThan4_4()?e/t:e=this.isLandscapeOrientation()?window.screen.availWidth/t:e/t},e.prototype.getWidth=function(){var t=this.isMobileDevice()?window.screen.availWidth:$(window).width();return this.isMobileDevice()&&!this.useragent.isAndroid()&&this.isLandscapeOrientation()&&(t=window.screen.availHeight),this.useragent.isDeviceWithNativeBrowserScalingIssue()&&(t=this.getScalingAdjustedWidth()),t},e.prototype.deviceSupportsHtmlPositionFixed=function(){var t=/^.*GT-N5110.*$/gi;return!this.isAndroidNativeBrowserVersionLessThan4_4()&&!t.test(this.useragent.userAgent())},e.prototype.isAndroidNativeBrowserVersionLessThan4_4=function(){var t=!1;if(this.useragent.isAndroid()&&this.useragent.isAndroidNativeBrowser()&&!this.useragent.isIe()&&this.useragent.isDateInputSupported()&&!this.useragent.isIeCompatibilityMode()){var e=this.useragent.userAgent(),i=e.indexOf("Android "),o=Number(e.substr(i+8,3));t=o<4.4}return t},e.prototype.getScalingAdjustedWidth=function(){var t=window.devicePixelRatio?window.devicePixelRatio:2,e=window.screen.availWidth;return this.isAndroidNativeBrowserVersionLessThan4_4()?e/t:e=this.isLandscapeOrientation()?window.screen.availHeight/t:e/t},e.prototype.getIsAndroidNativeBrowserInLandscapeMode=function(){var t=window.screen.availWidth,e=Number(window.getComputedStyle($("fieldset[data-section='country-of-residence']")[0]).getPropertyValue("width").replace("px",""));return e>320&&e>t/2},e}();e.Client=i}(i=e.Client||(e.Client={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.debounce=function(t,e,i){var o;return function(){var n=arguments,r=function(){o=null,e.apply(t,n)};clearTimeout(o),o=setTimeout(r,i)}},t.prototype.getContainer=function(t,e,i){var o=!1,n=t;do o=n.attr(e)===i,o||(n=n.parent());while(!o&&!n.is("fieldset")&&n.length);return n},t}();t.Common=e}(e=t.Common||(t.Common={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.build=function(t,e){if(e&&e.length>0)for(var i=0;i<e.length;i++)t.append("<div>"+e[i]+"</div>")},t.prototype.supports=function(e){return e.attr("id")===t.controlId},t.controlId="UserName",t}();t.UsernameJsonToHtmlProcessor=e}(e=t.Validation||(t.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.build=function(t,e){e&&(e.length>0&&t.append("<div>"+e[0]+"</div>"),e.length>1&&t.append("<div>"+e[1]+"</div>"),e.length>2&&t.append("<div>"+e[2]+"</div>"),e.length>3&&t.append("<div>"+e[3]+"</div>"),e.length>4&&t.append("<div data-uppercase><div class='tick'></div><div>"+e[4]+"</div></div>"),e.length>5&&t.append("<div data-lowercase><div class='tick'></div><div>"+e[5]+"</div></div>"),e.length>6&&t.append("<div data-numbers><div class='tick'></div><div>"+e[6]+"</div></div>"),e.length>7&&t.append("<div data-symbols><div class='tick'></div><div>"+e[7]+"</div></div>"),e.length>0&&t.append("<div style='clear: both;padding: 0'></div>"))},t.prototype.supports=function(e){return e.attr("id")===t.controlId},t.controlId="Password",t}();t.PasswordJsonToHtmlProcessor=e}(e=t.Validation||(t.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(t){this.attribute=t,e.registerJsonToHtmlProcessors()}return e.prototype.validate=function(t){var e=t[0].hasAttribute(this.attribute),i=!e||this.validateControl(t);return i||this.showAdditionalValidationMessage(t),{isValid:i,errorMessage:t.attr(this.attribute),controlId:this.getControlid(t),validator:this.name}},e.prototype.getControlid=function(t){return"#"+t.attr("id")},e.prototype.showAdditionalValidationMessage=function(t){if(t[0].hasAttribute(e.additionalAttribute)){var i=this.getAdditionalMessageContainer(t);i.find("div.su-FlexiField_Validation_AdditionalMessage_Content>div").not(":first").remove(),1===i.find("div.su-FlexiField_Validation_AdditionalMessage_Content>div").length&&this.addAdditionalMessages(t,i.find("div.su-FlexiField_Validation_AdditionalMessage_Content")),i.find("div.su-FlexiField_Validation_AdditionalMessage_Content>div").length>1&&i.attr("data-has-messages","true")}},e.prototype.getAdditionalMessageContainer=function(t){var e=t.parent().parent();return e.find("aside.su-FlexiField_Validation_AdditionalMessage")},e.prototype.addAdditionalMessages=function(t,i){var o=JSON.parse(t.attr("data-val-additionalmessage"));e.jsonToHtmlProcessors.forEach(function(e){e.supports(t)&&e.build(i,o)})},e.registerJsonToHtmlProcessors=function(){e.jsonToHtmlProcessors&&0!==e.jsonToHtmlProcessors.length||(e.jsonToHtmlProcessors=new Array,e.jsonToHtmlProcessors.push(new t.Processors.Validation.UsernameJsonToHtmlProcessor),e.jsonToHtmlProcessors.push(new t.Processors.Validation.PasswordJsonToHtmlProcessor))},e.additionalAttribute="data-val-additionalmessage",e}();e.BaseValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="CharacterLimitValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=parseInt(t.attr("data-val-characterlimit-maxlength")),i=Number(t.attr("data-val-characterlimit-minlength")),o="true"===t.attr("data-val-characterlimit-isoptional").toLowerCase(),n=t.val().length;return i=isNaN(i)?0:i,o&&0===n||isNaN(e)||n>=i&&n<=e},e.attribute="data-val-characterlimit",e}(t.BaseValidator);t.CharacterLimitValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="CodiceFiscaleValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.codiceFiscaleGenerator=n.resolve("ICodiceFiscaleService"),o.dateService=n.resolve("IDateService"),o.userAgent=n.resolve("IUserAgent"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=$.trim(t.val()).toUpperCase();return this.validateCodiceFiscalePart(e)&&this.validateCheckDigit(e)},i.prototype.validateCodiceFiscalePart=function(t){var e=t.substring(0,t.length-5),i=this.codiceFiscaleGenerator.calculateCodiceFiscale(this.createCodiceFiscaleDetails());return i=i.substring(0,i.length-5),e===i},i.prototype.validateCheckDigit=function(t){var e=this.codiceFiscaleGenerator.generateCheckDigit(t.substring(0,t.length-1));return e===t.charAt(t.length-1)},i.prototype.createCodiceFiscaleDetails=function(){var t=this.dateService.getDate(this.getDateOfBirthControl()),e={firstName:$("#FirstName").val(),surname:$("#Surname").val(),isFemale:"4"!==$("#Title").find(":selected").val(),day:t.getUTCDate().toString(),month:t.getUTCMonth().toString(),year:t.getUTCFullYear().toString(),placeOfBirthCode:"XXXX"};return e},i.prototype.getDateOfBirthControl=function(){return $("input#DateOfBirth").parent().is(":visible")?$("input#DateOfBirth"):$("select#DateOfBirthYear")},i.attribute="data-val-codicefiscale",i}(e.BaseValidator);e.CodiceFiscaleValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="ConfirmValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=$("#"+t.data("val-confirm-otherpropertyid"));return 0===e.length||e.val()===t.val()},e.attribute="data-val-confirm",e}(t.BaseValidator);t.ConfirmValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="ContentValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=t.val(),i=new RegExp(t.attr("data-val-content-regex")),o=!0,n=$.trim(e);return e!==n&&t.val(n),n&&n.length&&(o=i.test(n)),o},e.attribute="data-val-content",e}(t.BaseValidator);t.ContentValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="DateValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dateService=n.resolve("IDateService"),o.common=n.resolve("ICommon"),o}return __extends(i,e),i.prototype.validateControl=function(e){if(!e.is("input")){var o=this.common.getContainer(e,"class","date-fallback");if(!o.data("set-day")||!o.data("set-month")||!o.data("set-year"))return!0}var n=this.dateService.isValidDate(e);return n&&e[0].hasAttribute(i.setTodayAsMaxAllowedDateAttribute)?n=this.validateSelectedDateIsLessOrEqualToTodaysDate(e):n&&e[0].hasAttribute(i.setTodayAsMinimumAllowedDateAttribute)&&(n=this.validateSelectedDateIsGreaterThanTodaysDate(e)),Number($("#Country").find(":selected").val())===t.Enums.CountryId.Italy&&n&&e[0].hasAttribute(i.setMustBeGreaterThanDobDateAttribute)&&(n=this.validateSelectedDateIsGreaterThanDobDate(e)),n},i.prototype.validateSelectedDateIsLessOrEqualToTodaysDate=function(t){var e=new Date,i=this.dateService.getDate(t),o=new Date(e.getFullYear(),e.getMonth(),e.getDate());return i.getTime()<=o.getTime()},i.prototype.validateSelectedDateIsGreaterThanTodaysDate=function(t){var e=new Date,i=this.dateService.getDate(t),o=new Date(e.getFullYear(),e.getMonth(),e.getDate());return i.getTime()>=o.getTime()},i.prototype.validateSelectedDateIsGreaterThanDobDate=function(t){var e=this.dateService.getDate(t);e.setHours(0,0,0,0);var i=this.dateService.getDate(this.getDateOfBirthControl());return i.setHours(0,0,0,0),e>i},i.prototype.getDateOfBirthControl=function(){return $("input#DateOfBirth").parent().is(":visible")?$("input#DateOfBirth"):$("select#DateOfBirthYear")},i.attribute="data-val-date",i.setTodayAsMaxAllowedDateAttribute="data-val-date-settodayasmaxalloweddate",i.setTodayAsMinimumAllowedDateAttribute="data-val-date-settodayasminimumalloweddate",i.setMustBeGreaterThanDobDateAttribute="data-val-date-setmustbegreaterthandobdate",i}(e.BaseValidator);e.DateValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="FindAddressValidator",i.showHybridCss="true"===$("body").data("show-hybrid-css").toLowerCase(),i}return __extends(e,t),e.prototype.validateControl=function(t){var i=0===$(e.findAddressSelector).length||"-1"===$("fieldset[data-section='address'] div#AddressPreSearch").attr("tabindex");return i||this.showHybridCss?t.removeAttr("data-animation"):t.attr("data-animation","true"),i},e.attribute="data-val-findaddress",e.findAddressSelector="fieldset[data-section='address'] div#AddressPreSearch button[data-val-findaddress]:visible",e}(t.BaseValidator);t.FindAddressValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="FixedLengthValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=parseInt(t.attr("data-val-fixedlength-size"));return isNaN(e)||t.val().length===e},e.attribute="data-val-fixedlength",e}(t.BaseValidator);t.FixedLengthValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="GreekPasswordWhitelistValidator",e}return __extends(e,t),e.prototype.validateControl=function(t){return e.greekPasswordWhitelist.test(t.val())},e.greekPasswordWhitelist=/^[0-9A-Za-z_\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007E]{8,32}$/,e}(t.BaseValidator);t.GreekPasswordWhitelistValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t){this.dniNieService=t,this.optionalMessage="",this.optionalMessage=$("#Surname2").parent().find(".flexiField_AditionalInfo").text()}return t.prototype.supports=function(e){return e[0].hasAttribute(t.attribute)},t.prototype.validate=function(t){var e=!1,i=!1;return this.dniNieService.isValidDni(t)?(e=!0,this.setDniState()):(e=this.dniNieService.isValidNie(t),this.setNieState(),i=!0),e&&(e=this.validateChecksum(t.val(),i)),e},t.prototype.setDniState=function(){var t=$("#Surname").data("val-required"),e=$("#Surname2");e.attr("data-val-required",t),e.attr("data-val-required-onblur",""),e.parent().find(".flexiField_AditionalInfo").text("")},t.prototype.setNieState=function(){var t=$("#Surname2");t.removeAttr("data-val-required"),t.removeAttr("data-val-required-onblur"),t.parent().find(".flexiField_AditionalInfo").text(this.optionalMessage),t.blur()},t.prototype.validateChecksum=function(e,i){var o;if(i){var n=e.substring(0,1).toUpperCase().charCodeAt(0)-t.asciiCodeForX;o=9==e.toString().length?Number(n+e.substring(1,8)):Number(n+e.substring(1,9))}else o=Number(e.substring(0,8));var r=o%23,a=t.checksumCharacters.charAt(r);return 9==e.length?e.toUpperCase().substring(8)===a:e.toUpperCase().substring(9)===a},t.attribute="data-val-identitynumber-dninie",t.checksumCharacters="TRWAGMYFPDXBNJZSQVHLCKE",t.asciiCodeForX=88,t}();t.DniNieValidatorProcessor=e}(e=t.Validation||(t.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.dateService=e.resolve("IDateService")}return e.prototype.supports=function(t){return t[0].hasAttribute(e.attribute)},e.prototype.validate=function(t){var e=!0,i=t.val(),o=$("#DateOfBirth");if(this.dateService.isValidDate(o)){var n=this.dateService.getDate(o),r=this.pad(n.getUTCDate())+this.pad(n.getUTCMonth()+1)+n.getUTCFullYear().toString().slice(-2);e=0===i.indexOf(r)}else e=!1;return e},e.prototype.pad=function(t){return t<10?"0"+t.toString():t.toString()},e.attribute="data-val-identitynumber-cpr",e}();e.CprValidatorProcessor=i}(i=e.Validation||(e.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.dateService=e.resolve("IDateService")}return e.prototype.supports=function(t){return t[0].hasAttribute(e.attribute)},e.prototype.validate=function(t){var e=t.val(),i=!1;return""!=e&&(i=this.matchesDateOfBirth(e)),i},e.prototype.matchesDateOfBirth=function(t){var e=this.getDateElement(),i=this.dateService.getDate(e),o=t.toString();return this.pad(i.getDate())==o.substr(5,2)&&this.pad(i.getMonth()+1)==o.substr(3,2)&&i.getFullYear().toString().substr(2,2)==o.substr(1,2)},e.prototype.pad=function(t){return t<10?"0"+t.toString():t.toString()},e.prototype.getDateElement=function(){return $("#DateOfBirth").is(":visible")?$("#DateOfBirth"):$("select#DateOfBirthYear")},e.attribute="data-val-identitynumber-pic",e}();e.PersonalIdentificationCodeProcessor=i}(i=e.Validation||(e.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="IdentityNumberValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dniNieService=n.resolve("IDniNieService"),o.registerProcessors(),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!1,o=!1;return i.processors.forEach(function(i){!o&&i.supports(t)&&(e=i.validate(t),o=!0)}),e},i.prototype.registerProcessors=function(){i.processors||(i.processors=new Array,i.processors.push(new t.Processors.Validation.DniNieValidatorProcessor(this.dniNieService)),i.processors.push(new t.Processors.Validation.CprValidatorProcessor),i.processors.push(new t.Processors.Validation.PersonalIdentificationCodeProcessor))},i.attribute="data-val-identitynumber",i}(e.BaseValidator);e.IdentityNumberValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="MinimumAgeValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dateService=n.resolve("IDateService"),o}return __extends(i,e),i.prototype.validateControl=function(t){if(this.dateService.userNotSelectedInitialDate())return!0;var e=new Date,o=parseInt(t.attr(i.attribute+"-age")),n=this.dateService.getDate(t),r=this.getPaddedDateVal(e.getMonth()+1),a=this.getPaddedDateVal(e.getDate()),s=e.getFullYear()-o+"-"+r+"-"+a,c=new Date(s);return isNaN(c.valueOf())&&(s=s.replace(/-/g,"/"),c=new Date(s)),n.getTime()<=c.getTime()},i.prototype.getPaddedDateVal=function(t){var e="";return e=t<10?"0"+t:t.toString()},i.attribute="data-val-minimumage",i}(e.BaseValidator);e.MinimumAgeValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="MinMaxNumberValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.cultureInfoService=n.resolve("ICultureInfoService"),$("input[data-val-minmaxnumber]").each(function(t,e){var i=$(e).data("val-minmaxnumber"),o=$(e).data("val-minmaxnumber-minvaluedisplay"),n=$(e).data("val-minmaxnumber-maxvaluedisplay");i=i.replace("{0}",o).replace("{1}",n),$(e).attr("data-val-minmaxnumber",i)}),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!0,i=t.val().toString(),o=parseFloat(t.data("val-minmaxnumber-minvalue")),n=parseFloat(t.data("val-minmaxnumber-maxvalue")),r=this.cultureInfoService.fromLocaleString(i);return(r<o||r>n)&&(e=!1),e},i.attribute="data-val-minmaxnumber",i}(e.BaseValidator);e.MinMaxNumberValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="MinNumberValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.cultureInfoService=n.resolve("ICultureInfoService"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!0,i=t.val().toString(),o=parseFloat(t.data("val-minnumber-minvalue")),n=this.cultureInfoService.fromLocaleString(i);return n<o&&(e=!1),e},i.attribute="data-val-minnumber",i}(e.BaseValidator);e.MinNumberValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="MaxNumberValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.cultureInfoService=n.resolve("ICultureInfoService"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!0,i=t.val().toString(),o=parseFloat(t.data("val-maxnumber-maxvalue")),n=parseFloat(i);return n>o&&(e=!1),e},i.attribute="data-val-maxnumber",i}(e.BaseValidator);e.MaxNumberValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="NieValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dniNieService=n.resolve("IDniNieService"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!0;return this.dniNieService.isValidNie(t)&&10===t.val().length&&(e=!1),e},i.attribute="data-val-nienumber",i}(e.BaseValidator);e.NieValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="PasswordValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=t.val().toLowerCase(),i=$("#FirstName").length>0?$("#FirstName").val().toLowerCase():"",o=$("#Surname").length>0?$("#Surname").val().toLowerCase():"",n=$("#Surname2").length>0?$("#Surname2").val().toLowerCase():"",r=$("#EmailAddress").val().toLowerCase(),a=$("#UserName").val().toLowerCase(),s=this.getYear("none"===$("div.date-native").css("display")?$("select#DateOfBirthYear"):$("#DateOfBirth"));
return this.validatePassword(e,i)&&this.validatePassword(e,o)&&this.validatePassword(e,n)&&this.validatePassword(e,r)&&this.validatePassword(e,a)&&("-1"===s||e.indexOf(s)<0)},e.prototype.validatePassword=function(t,e){return 0===e.length||t.indexOf(e)<0},e.prototype.getYear=function(t){var e;if(t.length)if(t.is("input"))if(e=t.val(),0===e.length)e="dd/MM/yyyy";else{var i=e.split("-");e=i[0]}else e=t.val();else e="-1";return e},e.attribute="data-val-password",e}(t.BaseValidator);t.PasswordValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="PinRegExConsecutiveValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=t.data("val-pinregexfourdigitpinconsecutive-expression"),i=e.split("|");return i[0].indexOf(t.val())===-1&&i[1].indexOf(t.val())===-1},e.attribute="data-val-pinregexfourdigitpinconsecutive",e}(t.BaseValidator);t.PinRegExConsecutiveValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="PinRegExRepeatingValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=new RegExp(t.data("val-pinregexfourdigitpinrepeating-expression"));return!e.test(t.val())},e.attribute="data-val-pinregexfourdigitpinrepeating",e}(t.BaseValidator);t.PinRegExRepeatingValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="PleaseSelectDateValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dateService=n.resolve("IDateService"),o.common=n.resolve("ICommon"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e,i=this.dateService.getDateValue(t),o=this.common.getContainer(t,"class","date-fallback"),n=o.closest(".switchable-area").attr("id");return o.data("set-day")||o.data("set-month")||o.data("set-year")?$(".date-native").is(":visible")||""!==i?e=this.validateDateValue(i):$.inArray(n,["DateOfBirthArea","DateOfIssueArea","ExpiryDateArea"],0)>-1&&(e=!o.find("select").toArray().every(function(t){return"-1"===$(t).val()})):(i=i.toLowerCase(),e=i.length>0&&!(i.indexOf("dd")>=0||i.indexOf("mm")>=0||i.indexOf("yyyy")>=0)),e},i.prototype.validateDateValue=function(t){for(var e=t.split("/"),i=0;i<e.length;i++)if("-1"!==e[i])return!0;return!1},i.attribute="data-val-pleaseselectdate",i}(e.BaseValidator);e.PleaseSelectDateValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="PleaseSelectValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var i=e.selectRegex.test(t.find(":selected").val());return i&&t.data(e.removePleaseSelectAttribute)&&!this.isInReAddingPleaseSelectState()&&t.find("[value='-1']").remove(),i},e.prototype.isInReAddingPleaseSelectState=function(){return $(e.countryChangeLightbox+":visible").length>0},e.attribute="data-val-pleaseselect",e.removePleaseSelectAttribute="val-pleaseselect-removepleaseselect",e.selectRegex=/^([0-9]+)(_[a-zA-Z][0-9]{3})?/,e.countryChangeLightbox="fieldset[data-section='country-of-residence'] div[data-control='lightBox'] div.countryChangeLightBox",e}(t.BaseValidator);t.PleaseSelectValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="RegExValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=new RegExp(t.data("val-regex-expression"),t.data("val-regex-options")),i=!0,o=t.val(),n=$.trim(o);return o!==n&&t.val(n),n&&n.length&&(i=e.test(n)),i},e.attribute="data-val-regex",e}(t.BaseValidator);t.RegExValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="SecondaryRegExValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e=new RegExp(t.data("val-secondaryregex-expression"),t.data("val-secondaryregex-options")),i=!0,o=$.trim(t.val());return o&&o.length&&(i=e.test(o)),i},e.attribute="data-val-secondaryregex",e}(t.BaseValidator);t.SecondaryRegExValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(e,i,o){var n=this;if(e&&e.isDuplicate&&e.suggestedUsernames&&e.suggestedUsernames.length>0){o.find("div").not(":first").remove(),o.append("<div data-font-size='eleven'>"+e.alternativeMessage+"</div>");for(var r=e.suggestedUsernames.length,a=0;a<r;a++)o.append("<div data-link"+this.getLinkAttributes(a,r)+'><a tabindex="-1" href="javascript:void">'+e.suggestedUsernames[a]+"</a></div>");var s=o.find("div[data-link] a");s.off(t.clickEvent).on(t.clickEvent,function(t){return n.onDataLinkClick($(t.target))}),o.off(t.mouseOverEvent).on(t.mouseOverEvent,function(){return n.toggleUsernameIgnoreBlurStatus("true")}),o.off(t.mouseLeaveEvent).on(t.mouseLeaveEvent,function(){return n.toggleUsernameIgnoreBlurStatus("false")})}},t.prototype.supportsAction=function(e){return e.toLowerCase()===t.action},t.prototype.getRequestModel=function(t){return{firstName:$("#FirstName").val(),surname:$("#Surname").val(),username:$("#UserName").val(),countryId:$("#Country").val()}},t.prototype.onDataLinkClick=function(t){var e=$("#UserName");e.val(t.text()),t.closest(".su-FlexiField_Validation_Container").hide(),this.toggleUsernameIgnoreBlurStatus("false"),e.focus()},t.prototype.getLinkAttributes=function(t,e){var i="";return 0===t&&t===e-1?i=" data-link-first data-link-last":0===t?i=" data-link-first":t===e-1&&(i=" data-link-last"),i},t.prototype.toggleUsernameIgnoreBlurStatus=function(t){$("#UserName").data("ignore-blur",t)},t.action="validateusername",t.eventName="Validation.ValidateUsernameProcessor",t.mouseOverEvent="mouseover."+t.eventName,t.mouseLeaveEvent="mouseleave."+t.eventName,t.clickEvent="click."+t.eventName,t}();t.ValidateUsernameProcessor=e}(e=t.Validation||(t.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(e,i,o){var n=this,r=o.find("div[data-link] a");r.off(t.clickEvent).on(t.clickEvent,function(t){return n.onDataLinkClick($(t.target))}),o.off(t.mouseOverEvent).on(t.mouseOverEvent,function(){return n.togglePhoneNumberIgnoreBlurStatus("true")}),o.off(t.mouseLeaveEvent).on(t.mouseLeaveEvent,function(){return n.togglePhoneNumberIgnoreBlurStatus("false")})},t.prototype.supportsAction=function(e){var i=e.toLowerCase()===t.action,o=$("#TextMessageYes").hasClass("on");return i&&o},t.prototype.getRequestModel=function(t){return{MobileNumber:$("#PhoneNumber").val(),CountryCode:$("#GdprIso2Char")[0].getAttribute("value")}},t.prototype.onDataLinkClick=function(t){var e=$("#PhoneNumber");e.val(t.text()),t.closest(".su-FlexiField_Validation_Container").hide(),this.togglePhoneNumberIgnoreBlurStatus("false"),e.focus()},t.prototype.togglePhoneNumberIgnoreBlurStatus=function(t){$("#PhoneNumber").data("ignore-blur",t)},t.action="validatemobilenumber",t.eventName="Validation.ValidateMobileNumberProcessor",t.mouseOverEvent="mouseover."+t.eventName,t.mouseLeaveEvent="mouseleave."+t.eventName,t.clickEvent="click."+t.eventName,t}();t.ValidateMobileNumberProcessor=e}(e=t.Validation||(t.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(e,i,o){var n=this;o.off(t.mouseOverEvent).on(t.mouseOverEvent,function(){return n.toggleIgnoreBlurStatus(i,"true")}),o.off(t.mouseLeaveEvent).on(t.mouseLeaveEvent,function(){return n.toggleIgnoreBlurStatus(i,"false")})},t.prototype.supportsAction=function(e){return e.toLowerCase()===t.action},t.prototype.getRequestModel=function(t){return{CountryId:$("#Country").find(":selected").val(),Postcode:t.val()}},t.prototype.toggleIgnoreBlurStatus=function(t,e){t.data("ignore-blur",e)},t.action="validatepostcode",t.eventName="Validation.ValidatePostcodeProcessor",t.mouseOverEvent="mouseover."+t.eventName,t.mouseLeaveEvent="mouseleave."+t.eventName,t}();t.ValidatePostcodeProcessor=e}(e=t.Validation||(t.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(e,i,o){var n=this;o.off(t.mouseOverEvent).on(t.mouseOverEvent,function(){return n.toggleIgnoreBlurStatus(i,"true")}),o.off(t.mouseLeaveEvent).on(t.mouseLeaveEvent,function(){return n.toggleIgnoreBlurStatus(i,"false")})},t.prototype.supportsAction=function(e){return e.toLowerCase()===t.action},t.prototype.getRequestModel=function(t){return{CountryId:$("#Country").find(":selected").val(),Value:t.val()}},t.prototype.toggleIgnoreBlurStatus=function(t,e){t.data("ignore-blur",e)},t.action="validatepobox",t.eventName="Validation.ValidatePoBoxProcessor",t.mouseOverEvent="mouseover."+t.eventName,t.mouseLeaveEvent="mouseleave."+t.eventName,t}();t.ValidatePoBoxProcessor=e}(e=t.Validation||(t.Validation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="RemoteValidator",o.previousValidity=!0,o.process=!1;var n=t.Core.Ioc.OpenAccountContainer.container;return o.httpService=n.resolve("IHttpService"),o.registerProcessors(),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=this,i=!0,o=t[0].hasAttribute("data-force-remote-validation"),n="false",r=t.attr("data-val-remote-action");if(o||this.previousValue!==t.val()){if(this.previousValue=t.val(),this.isApplicable(t)){var a=$("#"+t.attr("data-val-remote-url")).val();n=$("#gdprSubmitClicked")[0].getAttribute("value"),this.processors.forEach(function(o){o.supportsAction(r)&&e.httpService.post(a,o.getRequestModel(t),function(t){i=t.isValid&&!t.isDuplicate,e.process=!i,e.model=t},null,!1)})}this.previousValidity=i}else i=this.previousValidity;return"ValidateMobileNumber"===r&&"true"===n&&(i=!0),i},i.prototype.isApplicable=function(t){var e=t.attr("data-val-remote-regexcondition"),i=!0;if(e){var o=new RegExp(e),n=$.trim(t.val());n&&n.length&&(i=o.test(n))}return i},i.prototype.showAdditionalValidationMessage=function(t){var i=e.prototype.getAdditionalMessageContainer.call(this,t);this.addAdditionalMessages(t,i.find("div.su-FlexiField_Validation_AdditionalMessage_Content")),i.find("div.su-FlexiField_Validation_AdditionalMessage_Content>div").length>1&&i.attr("data-has-messages","true")},i.prototype.addAdditionalMessages=function(t,e){var i=this;this.process&&this.processors.forEach(function(o){o.supportsAction(t.attr("data-val-remote-action"))&&o.process(i.model,t,e)}),this.process=!1},i.prototype.registerProcessors=function(){this.processors=new Array,this.processors.push(new t.Processors.Validation.ValidateUsernameProcessor),1===$("#GdprArea").length&&this.processors.push(new t.Processors.Validation.ValidateMobileNumberProcessor),this.processors.push(new t.Processors.Validation.ValidatePostcodeProcessor),this.processors.push(new t.Processors.Validation.ValidatePoBoxProcessor)},i.attribute="data-val-remote-validation",i}(e.BaseValidator);e.RemoteValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.depositLimitPeriodSelector="#DepositLimitPeriod",t.depositLimitAmountSelector="#DepositLimitAmount",t.depositLimitOtherSelector="#DepositLimitOtherField",t.depositLimitTwentyFourHourSelector="#TwentyFourHourDepositLimit",t.depositLimitSevenDaySelector="#SevenDayDepositLimit",t.depositLimitThirtyDaySelector="#ThirtyDayDepositLimit",t.depositLimitSelectedValueAttribute="data-selected-value",t.depositLimitNonVerifiedRegulatoryMessage="#NonVerifiedRegulatoryMessage",t.depositLimitNonVerifiedMaxAmount="#hdnNonVerifiedMaxAmount",t.depositLimitNonVerifiedMaxAmount24H="#hdnNonVerifiedMaxAmount24H",t.depositLimitNonVerifiedMaxAmount7D="#hdnNonVerifiedMaxAmount7D",t.depositLimitNonVerifiedMaxAmount30D="#hdnNonVerifiedMaxAmount30D",t.depositLimitOptOutCheckbox="#DepositLimitOptOut",t}();t.DepositLimitKeys=e}(e=t.Keys||(t.Keys={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="RequiredCheckComponentValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.depositLimitService=n.resolve("IDepositLimitService"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!0;return this.shouldValidationBePerformed(t)&&t.hasClass("hitArea")&&(e=t.hasClass(i.checkedClassName),e?t.removeClass(i.invalidClassName):t.addClass(i.invalidClassName)),e},i.prototype.shouldValidationBePerformed=function(e){var i="ConfirmCodiceFiscale"===e.attr("id"),o="ConfirmMexicoDetails"===e.attr("id"),n="DepositLimitOptOut"===e.attr("id"),r=Number($("#Country").find(":selected").val());return i&&r===t.Enums.CountryId.Italy||o&&r===t.Enums.CountryId.Mexico||n&&this.isNoLimitSelected()||!i&&!o&&!n},i.prototype.isNoLimitSelected=function(){return this.depositLimitService.hasUserSelectedNoLimitAmount()||this.depositLimitService.hasUserSelectedNoLimitTimePeriod()},i.attribute="data-val-requiredcheckcomponent",i.checkedClassName="checked",i.invalidClassName="checkComponentInvalid",i}(e.BaseValidator);e.RequiredCheckComponentValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="RequiredRadioComponentValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){var e,i=!1,o=!1,n=["Notification","TextMessage","Email","WebMessage"],r=0,a=0;if("true"===$("#gdprSubmitClicked")[0].getAttribute("value")){for(var s=0;s<n.length;s++)e=$("div[groupname ='"+n[s]+"']"),e.hasClass("on")||(o=!0,e.addClass("errorradio")),e.addClass("touched");i=!o,$("#gdprSubmitClicked")[0]&&$("#gdprSubmitClicked")[0].setAttribute("value","false")}else{if(t.hasClass("hitAreaRadio")){r=0,a=0;for(var c=0;c<n.length;c++)e=$("div[groupname ='"+n[c]+"']"),e[0].getAttribute("class").indexOf("touched")!==-1&&e[1].getAttribute("class").indexOf("touched")!==-1?e.hasClass("on")?r++:(i=!1,e.addClass("errorradio"),e.addClass("touched")):e[0].getAttribute("class").indexOf("errorradio")!==-1&&e[1].getAttribute("class").indexOf("touched")!==-1||a++}else{r=0,a=0;for(var l=0;l<n.length;l++)e=$("div[groupname ='"+n[l]+"']"),e.hasClass("on")?r++:(e.addClass("errorradio"),e.addClass("touched"),e.removeClass("off"))}0===a&&4!==r||(i=!0,$("#GdprArea > .su-FlexiField_Validation_Container").data("trigger",t.attr("id").toLocaleLowerCase()))}return i},e.attribute="data-val-requiredradiocomponent",e}(t.BaseValidator);t.RequiredRadioComponentValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="RequiredValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){return $.trim(t.val()).length>0},e.attribute="data-val-required",e}(t.BaseValidator);t.RequiredValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="SpainUsaPasswordWhitelistValidator",e}return __extends(e,t),e.prototype.validateControl=function(t){return e.spanishPasswordWhitelist.test(t.val())},e.spanishPasswordWhitelist=/^[0-9A-Za-z_\u0021-\u002F\u003A-\u0040\u005B-\u005F\u0060\u007B-\u007E]*$/,e}(t.BaseValidator);t.SpainUsaPasswordWhitelistValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="TimeLivedValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.jsonParser=n.resolve("IJsonParser"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!0;return this.isValidCountry(t)&&(e=1===$("div#TimeLivedArea").find("button[selected]").length),e},i.prototype.getControlid=function(t){return"div#TimeLivedArea"},i.prototype.isValidCountry=function(t){var e=Number($("#Country").find(":selected").val()),o=!1;if(!isNaN(e)){var n=this.jsonParser.parse(t.attr(i.countryIdAttribute));if(n.isSuccess())for(var r=n.result(),a=0;a<r.length;a++)if(r[a]===e){o=!0;break}}return o},i.attribute="data-val-timelived",i.countryIdAttribute="data-val-timelived-countryid",i}(e.BaseValidator);e.TimeLivedValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var i=t.call(this,e.attribute)||this;return i.name="UniqueAddressFieldsValidator",i}return __extends(e,t),e.prototype.validateControl=function(t){for(var e=0===t.attr("id").lastIndexOf("Current",0)?"Current":"Previous",i=!1,o=t.data("val-uniqueaddressfields-otherpropertyids"),n=0,r=o.split(",");n<r.length;n++){var a=r[n],s=$("#"+e+a);if(i=""===t.val()&&""===s.val()||t.val().toLowerCase()!=s.val().toLowerCase(),!i)return i}return i},e.attribute="data-val-uniqueaddressfields",e}(t.BaseValidator);t.UniqueAddressFieldsValidator=e}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="ValidYearValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dateService=n.resolve("IDateService"),o}return __extends(i,e),i.prototype.validateControl=function(t){if(this.dateService.userNotSelectedInitialDate())return!0;var e=this.dateService.getDate(t);return e.getFullYear()>=i.minimumYear},i.attribute="data-val-validyear",i.minimumYear=1900,i}(e.BaseValidator);e.ValidYearValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="EstoniaPicValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dniNieService=n.resolve("IDniNieService"),o.dateService=n.resolve("IDateService"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=t.val(),i=!1;return""!=e&&(i=this.validCheckSumDigit(e)),i},i.prototype.validCheckSumDigit=function(t){var e=parseInt(t.substr(10,1)),i=(1*parseInt(t.substr(0,1))+2*parseInt(t.substr(1,1))+3*parseInt(t.substr(2,1))+4*parseInt(t.substr(3,1))+5*parseInt(t.substr(4,1))+6*parseInt(t.substr(5,1))+7*parseInt(t.substr(6,1))+8*parseInt(t.substr(7,1))+9*parseInt(t.substr(8,1))+1*parseInt(t.substr(9,1)))%11;return 10==i&&(i=(3*parseInt(t.substr(0,1))+4*parseInt(t.substr(1,1))+5*parseInt(t.substr(2,1))+6*parseInt(t.substr(3,1))+7*parseInt(t.substr(4,1))+8*parseInt(t.substr(5,1))+9*parseInt(t.substr(6,1))+1*parseInt(t.substr(7,1))+2*parseInt(t.substr(8,1))+3*parseInt(t.substr(9,1)))%11,i%=10),i===e},i.attribute="data-val-EstoniaPic",i}(e.BaseValidator);e.EstoniaPicValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="SwedenPinValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dateService=n.resolve("IDateService"),o.userAgent=n.resolve("IUserAgent"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!1,o=t.val();return o&&(o=this.cleanPinValue(o),e=this.validateBirthdate(o)&&this.validChecksumDigit(o),e?t.attr(i.cleanValueAttribute,o):t.attr(i.cleanValueAttribute,null)),e},i.prototype.cleanPinValue=function(t){var e=t.replace("-","").replace("+","");if(10===e.length){var i=this.dateService.getDate(this.getDateOfBirthControl()),o=this.getYearValue(i);e=""+o+e.slice(-8).toString()}return e},i.prototype.validateBirthdate=function(t){var e=!1,i=this.dateService.getDate(this.getDateOfBirthControl()),o=this.getDayValue(i),n=this.getMonthValue(i),r=this.getYearValue(i);if(o&&n&&r){var a=8;10===t.length&&(a=6,r=r.substr(-2)),t.substring(0,a)===r+n+o&&(e=!0)}return e},i.prototype.validChecksumDigit=function(t){var e=!1;if(t&&(12===t.length&&(t=t.substr(-10)),10===t.length)){var i=this.checksumCalculation(t);i===parseInt(t.slice(-1).toString())&&(e=!0)}return e},i.prototype.checksumCalculation=function(t){var e=0,i=t.split("");i.pop();for(var o=0;o<i.length;o++){var n=parseInt(i[o]);if(!isNaN(n)){var r=2-o%2,a=n*r;a>9&&(a=a%10+1),e+=a}}var s=10-e%10;return 10===s&&(s=0),s},i.prototype.getDayValue=function(t){var e=t.getUTCDate().toString();return e=this.addDatePadding(e)},i.prototype.getMonthValue=function(t){var e=(t.getUTCMonth()+1).toString();return e=this.addDatePadding(e)},i.prototype.getYearValue=function(t){var e=t.getUTCFullYear().toString();return e},i.prototype.addDatePadding=function(t){return 1===t.length&&(t="0"+t),t},i.prototype.getDateOfBirthControl=function(){return $("input#DateOfBirth").parent().is(":visible")?$("input#DateOfBirth"):$("select#DateOfBirthYear")},i.attribute="data-val-swedenpin",i.cleanValueAttribute="data-value",i}(e.BaseValidator);e.SwedenPinValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this,i.attribute)||this;return t.name="PleaseSelectDepositLimitPeriodValidator",t}return __extends(i,e),i.prototype.validateControl=function(t){return Number(t.attr(i.Keys.depositLimitSelectedValueAttribute))>-1},i.attribute="data-val-pleaseselectdepositlimittimeperiod",i.Keys=t.Keys.DepositLimitKeys,i}(t.Validation.BaseValidator);e.PleaseSelectDepositLimitPeriodValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this,i.attribute)||this;return t.name="PleaseSelectDepositLimitAmountValidator",t}return __extends(i,e),i.prototype.validateControl=function(t){return Number(t.attr(i.Keys.depositLimitSelectedValueAttribute))>-1},i.attribute="data-val-pleaseselectdepositlimit",i.Keys=t.Keys.DepositLimitKeys,i}(t.Validation.BaseValidator);e.PleaseSelectDepositLimitAmountValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function i(){var e=t.Core.Ioc.OpenAccountContainer.container;this.flexiLabelService=e.resolve("IFlexiLabelService"),this.registerValidators()}return i.prototype.validate=function(t){return this.validateTarget(t)},i.prototype.validateSpecific=function(t,e){var i;this.trimInput(t);var o=this.validators.filter(function(t){return e.indexOf(t.attribute)>-1});return o.forEach(function(e){i&&!i.isValid||(i=e.validate(t))}),t.is("input")&&this.flexiLabelService.applyFlexiLabel(t),i},i.prototype.validateForm=function(t){for(var e=new Array,i=this.removeNotApplicableValidationControls(t),o=!1,n=0;n<i.length;n++){var r=this.validateTarget($(i[n]));$(i[n]).removeAttr("toFocus"),r.isValid||(o||($(r.controlId).attr("toFocus",""),o=!0),e.push(r))}return e},i.prototype.showValidationMessage=function(t,e){var o=this.getValidationContainer(t);t.attr("id")&&"phonenumber"===t.attr("id").toLowerCase()&&this.applyGdprValidationContainerStyles("remotevalidator"!==e.validator.toLowerCase()),""!==e.errorMessage&&(o.find(i.validationSelector).text(e.errorMessage),o.show(),o.data("trigger",this.getTrigger(t)),o.parent().parent().attr("data-validation","true"),this.showHideBottomBorder(o))},i.prototype.hideValidationMessage=function(t,e){var i=this,o=this.getValidationContainer(t);t.attr("id")&&"phonenumber"===t.attr("id").toLowerCase()&&this.applyGdprValidationContainerStyles(!0),(e||o.data("trigger")===this.getTrigger(t))&&(setTimeout(function(){o.hide(),i.showHideBottomBorder(o)},0),o.data("trigger",""),o.parent().parent().attr("data-validation","false"))},i.prototype.getValidationContainer=function(t){var e=t.find(i.validationContainerSelector);return 0===e.length&&(e=t.parent().parent().find(i.validationContainerSelector),0===e.length&&(t.is(i.validatableCheckComponentSelector)?e=t.parent().parent().parent().find(i.validationContainerSelector):t.is(i.validatableRadioComponentSelector)?e=t.parent().parent().parent().parent().find(i.validationContainerSelector):this.isSelectDateControl(t)?e=t.parent().parent().parent().parent().find(i.validationContainerSelector):t.hasClass("gdpr")&&(e=$(i.validationContainerSelector+".gdpr-message-container")))),e},i.prototype.reinitialise=function(t){this.registerValidators();var e=t.find(i.validationContainerSelector);e.data("trigger",""),e.parent().parent().attr("data-validation","false")},i.prototype.isSelectDateControl=function(t){return t.is("select#DateOfBirthYear")||t.is("select#DateOfBirthMonth")||t.is("select#DateOfBirthDay")||t.is("select#DateOfIssueYear")||t.is("select#DateOfIssueMonth")||t.is("select#DateOfIssueDay")||t.is("select#ExpiryDateYear")||t.is("select#ExpiryDateMonth")||t.is("select#ExpiryDateDay")},i.prototype.validateTarget=function(t){this.trimInput(t);var e=this.isValidForAllValidators(t);return t.is("input")&&this.flexiLabelService.applyFlexiLabel(t),e},i.prototype.isValidForAllValidators=function(t){this.trimInput(t);var e;return this.validators.forEach(function(i){e&&!e.isValid||(e=i.validate(t))}),e},i.prototype.registerValidators=function(){this.validators=new Array,this.validators.push(new e.RequiredValidator),this.validators.push(new e.RequiredCheckComponentValidator),this.validators.push(new e.RequiredRadioComponentValidator),this.validators.push(new e.PleaseSelectValidator),this.validators.push(new e.ContentValidator),this.validators.push(new e.CharacterLimitValidator),this.validators.push(new e.RegExValidator),this.validators.push(new e.SecondaryRegExValidator),this.validators.push(new e.PleaseSelectDateValidator),this.validators.push(new e.DateValidator),this.validators.push(new e.MinimumAgeValidator),this.validators.push(new e.MinMaxNumberValidator),this.validators.push(new e.MinNumberValidator),this.validators.push(new e.MaxNumberValidator),this.validators.push(new e.FixedLengthValidator),this.validators.push(new e.PinRegExRepeatingValidator),this.validators.push(new e.PinRegExConsecutiveValidator),this.validators.push(new e.ConfirmValidator),this.validators.push(new e.PasswordValidator),this.validators.push(new e.DuplicateMobileNumberRemoteValidator),this.validators.push(new e.TimeLivedValidator),this.validators.push(new e.IdentityNumberValidator),this.validators.push(new e.CodiceFiscaleValidator),this.validators.push(new e.CurpCodeValidator),this.validators.push(new e.FindAddressValidator),this.validators.push(new e.UniqueAddressFieldsValidator),this.validators.push(new e.NieValidator),this.validators.push(new e.ValidYearValidator),this.validators.push(new e.EstoniaPicValidator),this.validators.push(new e.SwedenPinValidator),this.validators.push(new e.PleaseSelectDepositLimitPeriodValidator),this.validators.push(new e.PleaseSelectDepositLimitAmountValidator),this.validators.push(new e.RestrictedStateRegionValidator),this.validators.push(new e.RemoteValidator)},i.prototype.trimInput=function(t){var e=t.val(),i=$.trim(e);e!==i&&t.val(i)},i.prototype.removeNotApplicableValidationControls=function(t){var e=$(".date-fallback"),i=e.data("set-day")&&e.data("set-month")&&e.data("set-year"),o=$(".date-native").is(":visible")||!i?"select#DateOfBirthDay,select#DateOfBirthMonth,select#DateOfBirthYear,select#DateOfIssueDay,select#DateOfIssueMonth,select#DateOfIssueYear,select#ExpiryDateDay,select#ExpiryDateMonth,select#ExpiryDateYear":"#DateOfBirth,#DateOfIssue,#ExpiryDate",n=t.not(o).not("[tabindex='-1']");return n},i.prototype.showHideBottomBorder=function(t){var e=this.getParent(t,i.borderClass),o=e.find(">div").length>1,n=o?this.getMultifieldTarget(t,i.borderClass):e,r=o&&!this.ignoreAsMultiField?"border-top":"border-bottom",a="none"!==t.css("display")?"0":"";n.css(r,a),this.ignoreAsMultiField=!1},i.prototype.getMultifieldTarget=function(t,e){var i=t;do i=this.getSibling(i,e);while(i&&"none"===i.css("display"));return i||(i=this.getParent(t,e),this.ignoreAsMultiField=!0),i},i.prototype.getSibling=function(t,e){var i=t;do i=i.parent();while(!i.parent().hasClass(e)&&0!==i.length);var o=i.parent().hasClass(e)?i.next():null;return null!=o&&o.length>0?o:null},i.prototype.getParent=function(t,e){var i=t;do i=i.parent();while(!i.hasClass(e)&&0!==i.length);return i},i.prototype.getTrigger=function(t){var e=t.attr("id").toLocaleLowerCase();return"dateofissueday"!==e&&"dateofissuemonth"!==e&&"dateofissueyear"!==e&&"dateofbirthday"!==e&&"dateofbirthmonth"!==e&&"dateofbirthyear"!==e&&"expirydateday"!==e&&"expirydatemonth"!==e&&"expirydateyear"!==e||(e="datecontrols"),e},i.prototype.applyGdprValidationContainerStyles=function(t){var e=$("#PhoneNumber"),i=this.getPhoneNumberValidationContainer(e),o=i.find("span.su-FlexiField_Validation");t?(i.css("display","none"),o.removeClass("gdpr-message"),i.removeClass("gdpr-message-container"),e.parent().parent().find("span.flexiField_Label").after(i)):(o.addClass("gdpr-message"),i.addClass("gdpr-message-container"),$("fieldset[data-section='contact-information']").after(i))},i.prototype.getPhoneNumberValidationContainer=function(t){var e=t.parent().parent(),i=e.find("div.su-FlexiField_Validation_Container");return i.length?i:$("div.su-FlexiField_Validation_Container.gdpr-message-container")},i.validationSelector=".su-FlexiField_Validation",i.validationContainerSelector=".su-FlexiField_Validation_Container",i.borderClass="su-fieldset_Bordered",i.validatableCheckComponentSelector="div[data-val='true'].hitArea",i.validatableRadioComponentSelector="div[data-val='true'].hitAreaRadio",i}();e.ValidationService=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){this.hdnPlatformId="#hdnPlatformId",this.hdnSportsResponsiveEnabled="#hdnSportsResponsiveEnabled",this.sportsMobilePlatformId="2";var e=t.Core.Ioc.OpenAccountContainer.container;this.urlService=e.resolve("IUrlService"),this.frameService=e.resolve("IFrameService"),this.pageWaiting=e.resolve("IPageWaiting"),this.regulatoryService=e.resolve("IRegulatoryService")}return e.prototype.process=function(t){var e=Number(t.countryId);if(0!==e){var i=this.urlService.getUrl(),o=this.urlService.getHostname(),n=this.regulatoryService.updateDomainForCountry(i,e);if(i!=n){var r=this.getRedirectUrl(n,e);window.sessionStorage&&sessionStorage.setItem("IsCountryChange","1"),this.frameService.isInHostedMode()?this.redirectViaFrame(r,o):window.location.href=r}else this.pageWaiting.hide()}else this.pageWaiting.hide()},e.prototype.redirectViaFrame=function(t,e){var i=this.urlService.insertParameter(t,"originalDomain",e);this.frameService.postRedirectViaFrame(i)},e.prototype.getRedirectUrl=function(t,e){var i=this.urlService.insertParameter(t,"ct",e.toString());i=this.urlService.insertParameter(i,"rurl",this.getRurl()),i=this.urlService.insertParameter(i,"dc","1");var o=this.getAffiliateCode();i=o?this.urlService.insertParameter(i,"afc",o):i;
var n=this.urlService.getParameter("lng");if(!n&&!n.length){var r=$("#languageId").val();i=this.urlService.insertParameter(i,"lng",r)}var a=$("#InstantBet").val();return a&&"true"===a.toLowerCase()&&(i=this.urlService.insertParameter(i,"ib","true")),i},e.prototype.getRurl=function(){var t=this.urlService.getParameter("rurl");return t.length?encodeURIComponent(t):encodeURIComponent($("#closeUrl").val())},e.prototype.getAffiliateCode=function(){var t,e=document.cookie.split(";"),i=/Affiliates=Code=(.+)(?:\/|%2f).*/;return e.forEach(function(e){if(e.toLowerCase().indexOf("affiliates")>=0){var o=i.exec(e);o&&o.length>1&&(t=o[1])}}),t},e}();e.DomainRedirectProcessor=i}(i=e.CountryChange||(e.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(t){var e=$("#RealityChecks"),i={title:$("#Title").find(":selected").val(),firstName:$("#FirstName").val(),surname:$("#Surname").val(),surname2:$("#Surname2").val(),dninieNumber:$("#DniNieNumber").val(),dateOfBirth:$("#DateOfBirth").val(),dayBirth:$("#DateOfBirthDay").find(":selected").val(),monthBirth:$("#DateOfBirthMonth").find(":selected").val(),yearBirth:$("#DateOfBirthYear").find(":selected").val(),emailAddress:$("#EmailAddress").val(),username:$("#UserName").val(),password:$("#Password").val(),passwordConfirm:$("#ConfirmPassword").val(),securityNumber:$("#FourDigitPin").val(),securityNumberConfirm:$("#FourDigitPinConfirmed").val(),realityCheck:1===e.length?$("#RealityChecks").find(":selected").val():"undefined"};t.savedValues=i},t}();t.PageSaveProcessor=e}(e=t.CountryChange||(t.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(t){$("#Site").html(t.page)},t}();t.PageSwapProcessor=e}(e=t.CountryChange||(t.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container,i=e.resolve("IJsonParser");this.jsonParseResult=i.parse($("#siteLayout").val()),this.productId=Number($("#product").val()),this.domDisplayService=e.resolve("IDomDisplayService"),this.addressService=e.resolve("IAddressService")}return e.prototype.process=function(e){var i=this;if(this.jsonParseResult.isSuccess()){this.siteLayouts=this.jsonParseResult.result();var o=Number(e.countryId);this.domDisplayService.hide($(".switchable-area")),$("body>div>div").show(),this.siteLayouts.forEach(function(e){if(e){var n=(e.applicableTo||e.productRestrictions)&&i.itemIsApplicable(e.applicableTo,e.productRestrictions,o);(e.display===t.Enums.Display.Show&&n||e.display===t.Enums.Display.Hide&&!n)&&i.domDisplayService.show($("[id='"+e.section+"']"))}}),this.removeUnnecessaryFields()}},e.prototype.itemIsApplicable=function(t,e,i){return t&&e?t.indexOf(i)>-1&&e.indexOf(this.productId)>-1:t?t.indexOf(i)>-1:!!e&&e.indexOf(this.productId)>-1},e.prototype.removeUnnecessaryFields=function(){$(".switchable-area.hide").not("#AddressPostSearch, #AddressPreSearch, #TimeLivedArea, #TimeLivedArea>.switchable-area").remove(),this.addressService.IsSelectedCountryValidForPreviousAddress()||$("#TimeLivedArea").remove(),$("*#AddressPreSearch").find(".hide").remove()},e}();e.PageLayoutProcessor=i}(i=e.CountryChange||(e.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(t,e){var i=t.savedValues;this.setValue("Title",i.title),this.setValue("FirstName",i.firstName),this.setValue("Surname",i.surname),this.setValue("Surname2",i.surname2),this.setValue("DniNieNumber",i.dninieNumber),this.setValue("DateOfBirth",i.dateOfBirth),this.setValue("Day",i.dayBirth),this.setValue("Month",i.monthBirth),this.setValue("Year",i.yearBirth),this.setValue("EmailAddress",i.emailAddress),this.setValue("UserName",i.username),this.setValue("Password",i.password),this.setValue("ConfirmPassword",i.passwordConfirm),this.setValue("FourDigitPin",i.securityNumber),this.setValue("FourDigitPinConfirmed",i.securityNumberConfirm),"undefined"!==i.realityCheck&&this.setValue("RealityChecks",i.realityCheck);var o=$("#DniNieNumber");o.val()&&o.val().length>0&&(e.isValidDni(o)?o.attr("data-dni-or-nie","dni"):e.isValidNie(o)&&o.attr("data-dni-or-nie","nie"))},t.prototype.setValue=function(t,e){if(void 0!==e){var i=$("#"+t);i.val(e)}},t}();t.PageSetupProcessor=e}(e=t.CountryChange||(t.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.process=function(e){t.OpenAccount.reinitialise()},e}();e.ReinitialiseBindingProcessor=i}(i=e.CountryChange||(e.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.contactNumberSelector="section.su-GetHelp > div > span[data-contact] > a"}return t.prototype.process=function(t){var e=$(this.contactNumberSelector),i=t.contactNumber;e.attr("href","tel: "+i),e.text(i)},t}();t.UpdateContactNumberProcessor=e}(e=t.CountryChange||(t.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){this.focusElement="fieldset[data-section='personal-information']"}return e.prototype.process=function(e){var i=t.Core.Ioc.OpenAccountContainer.container,o=i.resolve("IUserAgent");o.isIos()||$(this.focusElement).find("input, select").first().focus()},e}();e.SetFocusProcessor=i}(i=e.CountryChange||(e.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.httpService=e.resolve("IHttpService"),this.dniNieService=e.resolve("IDniNieService"),this.url=$("#hdnOpenAccountUrl").val(),this.installProcessors()}return e.prototype.initialise=function(e){var i=new t.Processors.CountryChange.PageLayoutProcessor,o=new Object;o.countryId=e,i.process(o)},e.prototype.changeCountry=function(t,e){var i=this;this.httpService.post(""+this.url,{ct:t,oddsTypeId:e},function(t){return i.runChangeProcess(t)})},e.prototype.installProcessors=function(){this.processors=new Array,this.processors.push(new t.Processors.CountryChange.DomainRedirectProcessor),this.processors.push(new t.Processors.CountryChange.PageSaveProcessor),this.processors.push(new t.Processors.CountryChange.PageSwapProcessor),this.processors.push(new t.Processors.CountryChange.CountrySpecificMessageProcessor),this.processors.push(new t.Processors.CountryChange.PageLayoutProcessor),this.processors.push(new t.Processors.CountryChange.PageSetupProcessor),this.processors.push(new t.Processors.CountryChange.ReinitialiseBindingProcessor),this.processors.push(new t.Processors.CountryChange.UpdateContactNumberProcessor),this.processors.push(new t.Processors.CountryChange.SetFocusProcessor)},e.prototype.runChangeProcess=function(t){var e=this;this.processors.forEach(function(i){i.process(t,e.dniNieService)})},e}();e.CountryChangeService=i}(i=e.CountryChange||(e.CountryChange={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){this.passwordElementIdentifier="PASSWORD";var e=t.Core.Ioc.OpenAccountContainer.container;this.userAgentService=e.resolve("IUserAgent")}return e.prototype.getWidth=function(t){var e=this.canvas||(this.canvas=document.createElement("canvas")),i=e.getContext("2d");i.font=this.getFont(t);var o=t.text()||t.val();t.attr("type")&&t.attr("type").toLocaleUpperCase()===this.passwordElementIdentifier&&(o=o.replace(/./gi,this.userAgentService.browserPasswordCharacter()));var n=i.measureText(o);return n.width},e.prototype.getFont=function(t){var e=t.css("font-weight")+" "+t.css("font-size")+" "+t.css("font-family");return this.userAgentService.isIe()&&(e=e.replace("-apple-system,","")),e},e}();e.CanvasTextWidthService=i}(i=e.TextWidth||(e.TextWidth={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.getWidth=function(t){var e=0;return 1===t.length&&(e=(t.text()||t.val()).length),e+1},t}();t.LegacyTextWidthService=e}(e=t.TextWidth||(t.TextWidth={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.httpService=e.resolve("IHttpService"),this.urlService=e.resolve("IUrlService"),this.regulatoryService=e.resolve("IRegulatoryService"),this.dateService=e.resolve("IDateService"),this.url=this.getServiceUrl()}return e.prototype.getQueryStringParamter=function(t){return this.urlService.getParameter(t)},e.prototype.getDate=function(t){return this.dateService.getDateValue($("#"+t))},e.prototype.getUrlOnCorrectDomain=function(t){var e=window.location.origin||window.location.protocol+"//"+window.location.hostname,i=""+e+this.url,o=this.regulatoryService.updateDomainForCountry(i,t);return o},e.prototype.getQueryStringValue=function(t){t=t.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var e=location.search.match(new RegExp("[?&]"+t+"=([^&]+)(&|$)"));return e&&decodeURIComponent(e[1].replace(/\+/g," "))},e.prototype.addItalySpecificProperties=function(e){Number($("#Country").find(":selected").val())===t.Enums.CountryId.Italy&&(e.CityOfBirth=$("#CityOfBirth").is("select")?$("#CityOfBirth").find(":selected").val().split("_")[0]:$("#CityOfBirth").val(),e.CountryOfBirth=Number($("#CountryOfBirth").find(":selected").val().split("_")[0]),e.ProvinceOfBirth=0===$("#ProvinceOfBirth").length?null:Number($("#ProvinceOfBirth").find(":selected").val()),e.CodiceFiscale=$("#CodiceFiscale").val(),e.ConfirmCodiceFiscale=this.isChecked($("#ConfirmCodiceFiscale")))},e.prototype.addMexicoSpecificProperties=function(e){Number($("#Country").find(":selected").val())===t.Enums.CountryId.Mexico&&null!=$("#RfcCode")[0]&&null!=$("#CurpCode")[0]&&(e.countryOfBirth=Number($("#CountryOfBirth").find(":selected").val()),e.occupationId=Number($("#Occupation").attr("occupationid")),e.rfcCode=$("#RfcCode").val(),e.curpCode=$("#CurpCode").val(),e.confirmMexicoDetails=this.isChecked($("#ConfirmMexicoDetails")))},e.prototype.addSwedenSpecificProperties=function(e){Number($("#Country").find(":selected").val())===t.Enums.CountryId.Sweden&&null!=$("#PersonalIdentityNumber")[0]&&(e.personalIdentityNumber=$("#PersonalIdentityNumber").data("value"))},e.prototype.addGermanySpecificProperties=function(e){Number($("#Country").find(":selected").val())===t.Enums.CountryId.Germany&&(e.CityOfBirth=$("#CityOfBirth").val(),e.BirthName=$("#BirthName").val())},e.prototype.isChecked=function(t){return 0===t.length?null:t.hasClass("checked")},e.prototype.isOn=function(t){return 0===t.length?null:t.hasClass("on")},e.prototype.getDateOfIssue=function(){return this.getDate("DateOfIssue")},e.prototype.getExpiryDate=function(){return this.getDate("ExpiryDate")},e}();e.BaseAccountService=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createAccount=function(t,i){var o=$("#Country").find(":selected").val(),n={country:o,title:$("#Title").find(":selected").val(),firstName:$("#FirstName").val(),surname:$("#Surname").val(),surname2:$("#Surname2").val(),nationalityId:this.fetchNationality(),dniNieNumber:$("#DniNieNumber").val(),cprNumber:this.getCprNumber(),personalIdentificationCode:this.getPersonalIdentificationCode(),socialSecurityNumber:this.getSocialSecurityNumber(),chineseFullName:$("#FullName").val(),dateOfBirth:this.getDateOfBirth(),emailAddress:$("#EmailAddress").val(),dialingCode:$("#DialingCode").val().trim(),phoneNumber:$("#PhoneNumber").val(),requiresPreviousOrPermanentAddress:this.getHasPreviousOrPermanentAddress(),currentAddress:this.getCurrentAddress(),previousAddress:this.getPreviousAddress(),fiscalResidence:$("#FiscalResidence").find(":selected").val(),aaMatchTypeId:$("#hdnCurrentMatchTypeId").val(),userName:$("#UserName").val(),password:$("#Password").val(),passwordConfirmed:$("#ConfirmPassword").val(),fourDigitPin:$("#FourDigitPin").val(),fourDigitPinConfirmed:$("#FourDigitPinConfirmed").val(),timeZone:$("#TimeZone").find(":selected").val(),realityCheckPeriod:$("#RealityChecks").find(":selected").val(),oddsFormat:$("#OddsType").find(":selected").val(),expectedMonthlySpend:$("#ExpectedMonthlySpend").find(":selected").val(),documentType:$("#DocumentType").find(":selected").val(),documentNumber:$("#DocumentNumber").val(),countryOfIssue:$("#CountryOfIssue").val(),placeOfIssue:0===$("#PlaceOfIssue").length?null:$("#PlaceOfIssue").val(),bonusCode:$("#BonusCode").val(),issuingAuthority:0===$("#IssuingAuthority").length?null:$("#IssuingAuthority").find(":selected").val(),dateOfIssue:e.prototype.getDateOfIssue.call(this),expiryDate:e.prototype.getExpiryDate.call(this),originatingUrl:$("#closeUrl").val(),productId:$("#product").val(),screenSize:$("#hdnScreenSize").val(),currentRequestContext:"NewUser",isMigratedUser:"True"==$("#hdnMiUser").val(),LoginLimitDaily:$("#LoginLimitDaily").find(":selected").val(),LoginLimitWeekly:$("#LoginLimitWeekly").find(":selected").val(),LoginLimitMonthly:$("#LoginLimitMonthly").find(":selected").val()};this.addAcceptanceProperties(n),this.addGdprMarketingPreferences(n),this.addDepositLimits(n),e.prototype.addItalySpecificProperties.call(this,n),e.prototype.addMexicoSpecificProperties.call(this,n),e.prototype.addSwedenSpecificProperties.call(this,n),e.prototype.addGermanySpecificProperties.call(this,n);var r=this.getUrlOnCorrectDomain(Number(o));this.httpService.post(r,n,function(e){return t(e)},function(t){return i(t)})},i.prototype.getServiceUrl=function(){return $("#hdnCreateAccountUrl").val()+"?rurl="+encodeURIComponent(this.getQueryStringParamter("rurl"))},i.prototype.getDateOfBirth=function(){return e.prototype.getDate.call(this,"DateOfBirth")},i.prototype.getCurrentAddress=function(){return this.getAddress($("[data-section='address']>div#AddressPostSearch"),"Current")},i.prototype.getPreviousAddress=function(){var t;return"ShowPreviousAddress"===$("[data-section='address']>div#TimeLivedArea button[data-time-lived-value][selected]").attr("data-time-lived-value")&&(t=this.getAddress($("[data-section='address']>div#TimeLivedArea div#AddressPostSearch"),"Previous")),t},i.prototype.getStateRegion=function(t,e){var i=t.find("#"+e+"StateRegion").val();return i?i:t.find("#"+e+"States").find(":selected").val()},i.prototype.getAddress=function(t,e){var i=$("#hdnCurrentAddressEnteredManually");return null!=i&&void 0==i.val()&&$("#hdnCurrentAddressEnteredManually").val("false"),{addressLine1:$.trim(t.find("#"+e+"AddressLine1").val()),addressLine2:$.trim(t.find("#"+e+"AddressLine2").val()),addressLine3:$.trim(t.find("#"+e+"AddressLine3").val()),townCity:$.trim(t.find("#"+e+"TownCity").val()),stateRegion:this.getStateRegion(t,e),postcode:$.trim(t.find("#"+e+"Postcode").val()).replace(" ",""),enteredManually:$("#hdnCurrentAddressEnteredManually").val(),countryId:$("#Country").find(":selected").val()}},i.prototype.getHasPreviousOrPermanentAddress=function(){return 1===$("#TimeLived").find("[data-time-lived-value='ShowPreviousAddress'][selected]").length},i.prototype.fetchNationality=function(){return $("#Nationality:visible").length?$("#Nationality").find(":selected").val():$("#Citizenship").find(":selected").val()},i.prototype.getCprNumber=function(){var t=$("#CprNumber").val();return t?t.replace("-",""):t},i.prototype.getPersonalIdentificationCode=function(){var t=$("#PersonalIdentificationCode").val();return t},i.prototype.getSocialSecurityNumber=function(){var t=$("#SocialSecurityNumber").val();return t},i.prototype.addAcceptanceProperties=function(t){t.AcceptedMarketing=e.prototype.isChecked.call(this,$("#MarketingAcceptance")),t.AcceptedClientContract=e.prototype.isChecked.call(this,$("#ClientContractAcceptance")),t.AcceptedPrivacyPolicyAndCookiePolicy=e.prototype.isChecked.call(this,$("#PrivacyCookieAcceptance")),t.AcceptedTermsRulesAgeKyc=e.prototype.isChecked.call(this,$("#TermsRulesAgeKycAcceptance")),t.AcceptedStandardPolicies=e.prototype.isChecked.call(this,$("#PoliciesAcceptance")),t.AcceptedDeclaration=e.prototype.isChecked.call(this,$("#DeclarationCheck")),t.AcceptedRestrictedAccess=e.prototype.isChecked.call(this,$("#RestrictedAccessCheck")),t.AcceptedResidentCheck=e.prototype.isChecked.call(this,$("#ResidentCheck")),t.AcceptedRussiaTaxCheck=e.prototype.isChecked.call(this,$("#RussiaTaxCheck"))},i.prototype.addGdprMarketingPreferences=function(t){t.GdprNotification=e.prototype.isOn.call(this,$("div[name='NotificationMessageYes']")),t.GdprTextMessage=e.prototype.isOn.call(this,$("div[name='TextMessageYes']")),t.GdprEmail=e.prototype.isOn.call(this,$("div[name='EmailMessageYes']")),t.GdprWebMessage=e.prototype.isOn.call(this,$("div[name='WebMessageYes']"))},i.prototype.addDepositLimits=function(e){if("True"===$("#hdnForceAllDepositLimits").val()){var i=$(t.Keys.DepositLimitKeys.depositLimitTwentyFourHourSelector).attr("data-selected-value"),o=$(t.Keys.DepositLimitKeys.depositLimitSevenDaySelector).attr("data-selected-value"),n=$(t.Keys.DepositLimitKeys.depositLimitThirtyDaySelector).attr("data-selected-value");e.DepositLimits=[{Period:"1",Amount:i},{Period:"2",Amount:o},{Period:"3",Amount:n}]}else{var r=$(t.Keys.DepositLimitKeys.depositLimitPeriodSelector).attr("data-selected-value"),a=$(t.Keys.DepositLimitKeys.depositLimitAmountSelector).attr("data-selected-value"),s=$(t.Keys.DepositLimitKeys.depositLimitOptOutCheckbox).hasClass("checked");e.DepositLimits=[{Period:r,Amount:a}],e.UserAcceptedDepositLimitOptOut=s}},i}(e.BaseAccountService);e.AccountCreationService=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.fromLocaleString=function(t){var e=0;return t=this.cleanCurrencyValueForParsing(t,this.currencyDecimalSeparator()),null===t||""===t||isNaN(t)||(e=parseFloat(t)),e},t.prototype.fromString=function(t){var e=0;return t=this.cleanCurrencyValueForParsing(t,"."),null===t||""===t||isNaN(t)||(e=parseFloat(t)),e},t.prototype.toLocaleString=function(t,e){void 0===e&&(e=!1);var i="";return i=t%1!==0||e?t.toFixed(2).toString():t.toString(),"."!==this.currencyDecimalSeparator()&&(i=i.replace(".",this.currencyDecimalSeparator())),i},t.prototype.cleanCurrencyValueForParsing=function(t,e){return t=this.cleanCurrencyValueShared(t,e),"."!==e&&(t=t.replace(e,".")),t},t.prototype.currencyDecimalSeparator=function(){var t=".";if(1===$("#hdnCurrencyDecimalSeparator").length){var e=$("#hdnCurrencyDecimalSeparator").val();""!==e&&(t=e)}return t},t.prototype.cleanCurrencyValueForDisplay=function(t){t=this.replaceNoneNumericCharacters(t);var e=this.currencyDecimalSeparator();t=this.cleanCurrencyValueShared(t,e);var i="."!==e?t.replace(e,"."):t;return(""===i||isNaN(i))&&(t=""),""!==t&&t.split(e).length>1&&t.split(e)[1].length>2&&(t=""+t.split(e)[0]+e+t.split(e)[1].slice(0,2)),t},t.prototype.isNextCharacterIllegal=function(t,e){var i=this.currencyDecimalSeparator(),o=["0","1","2","3","4","5","6","7","8","9",i],n=t+e,r=o.indexOf(e)===-1,a=n.split("").filter(function(t){return t===i}).length>1;return r||a},t.prototype.replaceNoneNumericCharacters=function(t){return t.replace(/[^0-9.,]/g,"")},t.prototype.cleanCurrencyValueShared=function(t,e){switch(t=t.replace(/(?!^)\-/g,""),e){case".":t=t.replace(/\,/g,"");break;case",":t=t.replace(/\./g,"")}return t},t}();t.CultureInfoService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateDanishIdentity=function(e,i){var o=$("#Country").find(":selected").val(),n=$("#viewContext").val(),r="PartialDenmarkRetry"===n?"DanishVerificationPartialRetry":"DanishVerificationFullRetry";if("DanishVerificationPartialRetry"===r){var a={title:$("#Title").find(":selected").val(),firstName:$("#FirstName").val(),surname:$("#Surname").val(),surname2:$("#Surname2").val(),originatingUrl:$("#closeUrl").val(),currentRequestContext:r,currentAddress:{AddressLine1:$("#CurrentAddressLine1").val(),AddressLine2:$("#CurrentAddressLine2").val(),AddressLine3:$("#CurrentAddressLine3").val(),TownCity:$("#CurrentTownCity").val(),StateRegion:$("#CurrentStateRegion").val(),Postcode:$("#CurrentPostcode").val()}};this.postUpdate(o,a,e,i)}else{var a={title:$("#Title").find(":selected").val(),firstName:$("#FirstName").val(),surname:$("#Surname").val(),surname2:$("#Surname2").val(),cprNumber:$("#CprNumber").val(),dateOfBirth:t.prototype.getDate.call(this,"DateOfBirth"),originatingUrl:$("#closeUrl").val(),currentRequestContext:r,currentAddress:{AddressLine1:$("#CurrentAddressLine1").val(),AddressLine2:$("#CurrentAddressLine2").val(),AddressLine3:$("#CurrentAddressLine3").val(),TownCity:$("#CurrentTownCity").val(),StateRegion:$("#CurrentStateRegion").val(),Postcode:$("#CurrentPostcode").val()}};this.postUpdate(o,a,e,i)}},e.prototype.postUpdate=function(e,i,o,n){var r=t.prototype.getUrlOnCorrectDomain.call(this,Number(e));this.httpService.post(r,i,function(t){return o(t)},function(t){return n(t)})},e.prototype.getServiceUrl=function(){return"PartialDenmarkRetry"===$("#viewContext").val()?""+$("#hdnDenmarkGreenlandIdentityPartialUpdateUrl").val():""+$("#hdnDenmarkGreenlandIdentityFullUpdateUrl").val()},e}(t.BaseAccountService);t.DanishIdentityUpdateService=e}(e=t.AccountCreation||(t.AccountCreation={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateSpanishIdentity=function(e,i){var o=$("#Country").find(":selected").val(),n={title:$("#Title").find(":selected").val(),firstName:$("#FirstName").val(),surname:$("#Surname").val(),surname2:$("#Surname2").val(),nationalityId:$("#Nationality").find(":selected").val(),dniNieNumber:$("#DniNieNumber").val(),originalDniNieNumber:$("#originalDniNieNumber").val(),dateOfBirth:t.prototype.getDate.call(this,"DateOfBirth"),originatingUrl:$("#closeUrl").val(),currentRequestContext:"SpanishVerificationRetry"},r=t.prototype.getUrlOnCorrectDomain.call(this,Number(o));this.httpService.post(r,n,function(t){return e(t)},function(t){return i(t)})},e.prototype.getServiceUrl=function(){return $("#hdnSpanishIdentityUpdateUrl").val()+"?rurl="+encodeURIComponent(this.getQueryStringParamter("rurl"))},e}(t.BaseAccountService);t.SpanishIdentityUpdateService=e}(e=t.AccountCreation||(t.AccountCreation={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateItalianIdentity=function(e,i){var o=$("#Country").find(":selected").val(),n={title:$("#Title").find(":selected").val(),firstName:$("#FirstName").val(),surname:$("#Surname").val(),dateOfBirth:t.prototype.getDate.call(this,"DateOfBirth"),documentType:$("#DocumentType").find(":selected").val(),documentNumber:$("#DocumentNumber").val(),countryOfIssue:$("#CountryOfIssue").val(),placeOfIssue:0===$("#PlaceOfIssue").length?null:$("#PlaceOfIssue").val(),issuingAuthority:0===$("#IssuingAuthority").length?null:$("#IssuingAuthority").find(":selected").val(),dateOfIssue:this.getDateOfIssue(),expiryDate:this.getExpiryDate(),originatingUrl:$("#closeUrl").val(),hashOfPrepopulationData:$("#hashOfPrepopulationData").val(),hashOfPrePopulatedDocumentData:$("#hashOfPrePopulatedDocumentData").val(),idDocumentsAlreadySaved:$("#idDocumentsAlreadySaved").val(),currentRequestContext:"ItalianVerificationRetry"},r={AamsRef:$("#AamsRef").val(),PgadResponseCode:$("#PgadResponseCode").val()};t.prototype.addItalySpecificProperties.call(this,n);var a=t.prototype.getUrlOnCorrectDomain.call(this,Number(o));this.httpService.post(a,{createRequest:n,previousVerificationResponse:r},function(t){return e(t)},function(t){return i(t)})},e.prototype.getServiceUrl=function(){return $("#hdnItalianIdentityUpdateUrl").val()+"?rurl="+encodeURIComponent(this.getQueryStringParamter("rurl"))},e}(t.BaseAccountService);t.ItalianIdentityUpdateService=e}(e=t.AccountCreation||(t.AccountCreation={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateSwedishIdentity=function(e,i){var o=$("#Country").find(":selected").val(),n={title:$("#Title").find(":selected").val(),firstName:$("#FirstName").val(),surname:$("#Surname").val(),personalIdentityNumber:$("#PersonalIdentityNumber").data("value"),dateOfBirth:t.prototype.getDate.call(this,"DateOfBirth"),hashOfPrepopulationData:$("#hashOfPrepopulationData").val(),originatingUrl:$("#closeUrl").val(),currentRequestContext:"SwedishVerificationRetry"},r=t.prototype.getUrlOnCorrectDomain.call(this,Number(o));this.httpService.post(r,n,function(t){return e(t)},function(t){return i(t)})},e.prototype.getServiceUrl=function(){return $("#hdnSwedishIdentityUpdateUrl").val()+"?rurl="+encodeURIComponent(this.getQueryStringParamter("rurl"))},e}(t.BaseAccountService);t.SwedishIdentityUpdateService=e}(e=t.AccountCreation||(t.AccountCreation={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){var t=this;this.parentWindow=window.parent,this.domainRegEx=/^((?:http|https)(?::\/\/))?([^.:\/]+)([^:]*)(:\d+)?$/,this.targetOrigin="",this.locationOrigin="",this.sendQueue=[],window.addEventListener&&window.removeEventListener("message",this.receiveMessage),window.addEventListener("message",function(e){return t.receiveMessage(e)})}return t.prototype.sendMessage=function(t){"IFRAME_LOADED"===t.message?this.send(t,"*"):""!==this.targetOrigin?this.send(t,this.targetOrigin):this.sendQueue.push(t)},t.prototype.send=function(t,e){var i;try{i=JSON.stringify(t)}catch(e){i=t}window.parent.postMessage(i,e)},t.prototype.receiveMessage=function(t){var e;try{e=JSON.parse(t.data)}catch(i){e=t.data}"IFRAME_HOSTED"===e.message&&this.originsAreCompatible(this.getLocationOrigin(),t.origin)&&this.passedOriginCheck(t)},t.prototype.originsAreCompatible=function(t,e){var i="$1*$3",o=t.replace(this.domainRegEx,i).toLowerCase(),n=e.replace(this.domainRegEx,i).toLowerCase();return o===n},t.prototype.trustedSource=function(t){return""!==this.targetOrigin&&(this.parentWindow===t.source&&this.targetOrigin===t.origin||t.origin===window.location.protocol+"//"+window.location.host)},t.prototype.passedOriginCheck=function(t){this.targetOrigin=t.origin,this.sendQueued(),this.sendQueue=[]},t.prototype.getLocationOrigin=function(){return this.locationOrigin||(this.locationOrigin=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this.locationOrigin},t.prototype.sendQueued=function(){if(""!==this.targetOrigin)for(var t=0,e=this.sendQueue;t<e.length;t++){var i=e[t];this.sendMessage(i)}},t}();t.PostMessageService=e}(e=t.PostMessage||(t.PostMessage={}))}(e=t.Frame||(t.Frame={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){this.previousWidth=0,this.isPrefixControl=!1,this.originalLabelText="";var e=t.Core.Ioc.OpenAccountContainer.container;this.textWidthService=e.resolve("ITextWidthService")}return e.prototype.applyFlexiLabel=function(t){var i=t.parent(),o=i.find("."+e.rulerClassName),n=this.getLabel(i),r=t.offset().left,a=this.getLabelDistanceFromLeft(n),s=!0;if(r<a){var c=t.parent().find("."+e.labelClassName),l=t.parent().find("."+e.additionalInfoClassName);t.val().length>0?(n.addClass(e.editingClassName),"SocialSecurityNumber"===t.attr("id")&&(c[0].innerHTML=l[0].innerHTML)):(n.removeClass(e.editingClassName),"SocialSecurityNumber"===t.attr("id")&&(""===this.originalLabelText?this.originalLabelText=c[0].innerHTML:c[0].innerHTML=this.originalLabelText)),"password"===t.attr("type")?o.text(new Array(t.val().length).join("&#8226;")):o.text(t.val()),s=!1}this.setFlexiLabelPosition(this.textWidthService.getWidth(n),this.textWidthService.getWidth(t),t,n,s),this.applyAdditionalInfo(t),this.isPrefixControl=!1},e.prototype.applyAdditionalInfo=function(t){var i=t.parent().find("."+e.additionalInfoClassName);0===t.val().length?i.show():i.hide()},e.prototype.getLabel=function(t){var i=t.find("."+e.labelClassName);return 0===i.length&&(i=t.parent().find("."+e.labelClassName),0===i.length&&(i=t.parent().parent().parent().find("."+e.labelClassName)),this.isPrefixControl=!0),i},e.prototype.getLabelDistanceFromLeft=function(t){var e=0,i="0";return t.length>0&&(i=t.css("padding-left").replace("px",""),t.offset&&(e=t.offset().left)),i.length>0?e+parseInt(i):e},e.prototype.setFlexiLabelPosition=function(t,e,i,o,n){var r="flexiField_Label_Ascend",a=0===o.width()?this.previousWidth:o.width(),s=a-(t+10);!n&&e>0&&e>s?o.addClass(r):o.removeClass(r),this.previousWidth=a},e.additionalInfoClassName="flexiField_AditionalInfo",e.labelClassName="flexiField_Label",e.editingClassName="flexiField_Label-editing",e.rulerClassName="flexiField_Ruler",e}();e.FlexiLabelService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t,e,i){this.eventSource=t,this.eventNamespace=e,this.lightBoxContentService=i}return e.prototype.hide=function(){var e=this;this.unbindEvents(),$(t.Keys.LightBoxKeys.LightBoxSelector).hide(),$(t.Services.LightBoxService.greyOutClassName).hide(),$(t.Keys.LightBoxKeys.DynamicContentSelector).empty();var i=setTimeout(function(){e.resetLightboxLocation(),clearTimeout(i)},100)},e.prototype.show=function(t){this.showWithPostSetupCallback(null)},e.prototype.showWithPostSetupCallback=function(e){this.setupLightBox(),e&&e(),$(t.Keys.LightBoxKeys.LightBoxSelector).show(),$(t.Services.LightBoxService.greyOutClassName).show(),this.bindEvents()},e.prototype.supports=function(t){return this.eventSource===t},e.prototype.setupLightBox=function(){var e=this.lightBoxContentService.getLightBoxContent(this.eventSource);e&&(e.showConfirmButton?this.showConfirmButton(e.confirmButtonText):this.hideConfirmButton(),e.showCancelButton?this.showCancelButton(e.cancelButtonText):this.hideCancelButton(),e.showCloseButton?this.showCloseButton():this.hideCloseButton(),$(t.Keys.LightBoxKeys.LightBoxSelector+" > div").attr("class",""),$(t.Keys.LightBoxKeys.LightBoxSelector+" > div").addClass(e.cssClass),$(t.Keys.LightBoxKeys.Header).text(e.title),$(t.Keys.LightBoxKeys.Message).text(e.message))},e.prototype.resetLightboxLocation=function(){$("Form.su-Signup").append($(t.Keys.LightBoxKeys.LightBoxSelector))},e.prototype.buildEventName=function(t){return t+"."+this.eventNamespace;
},e.prototype.showConfirmButton=function(e){var i=$(t.Keys.LightBoxKeys.ConfirmButton);i.parent().parent().show(),i.text(e)},e.prototype.hideConfirmButton=function(){$(t.Keys.LightBoxKeys.ConfirmButton).parent().parent().hide()},e.prototype.showCancelButton=function(e){var i=$(t.Keys.LightBoxKeys.CancelText);i.parent().show(),i.text(e),$(t.Keys.LightBoxKeys.ButtonSeperator).show()},e.prototype.hideCancelButton=function(){$(t.Keys.LightBoxKeys.CancelButton).hide(),$(t.Keys.LightBoxKeys.ButtonSeperator).hide()},e.prototype.showCloseButton=function(){var e=$(t.Keys.LightBoxKeys.CloseButton);e.text(),e.show()},e.prototype.hideCloseButton=function(){$(t.Keys.LightBoxKeys.CloseButton).hide()},e}();e.BaseLightBoxProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(t,i,o){return e.call(this,t,i,o)||this}return __extends(i,e),i.prototype.bindEvents=function(){var i=this;$(t.Keys.LightBoxKeys.CloseButton).on(e.prototype.buildEventName.call(this,"click"),function(){return i.hide()})},i.prototype.unbindEvents=function(){$(t.Keys.LightBoxKeys.CloseButton).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("linksLightBox")},i.prototype.setupLightBox=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("linksLightBox"),e.prototype.setupLightBox.call(this)},i}(e.BaseLightBoxProcessor);e.BaseLightBoxLinksProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.AgeVerification,"LightBox.AgeVerificationLightBoxLinksProcessor",i)||this}return __extends(i,e),i}(e.BaseLightBoxLinksProcessor);e.AgeVerificationLightBoxLinksProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.KnowYourCustomer,"LightBox.KnowYourCustomerLightBoxLinksProcessor",i)||this}return __extends(i,e),i}(e.BaseLightBoxLinksProcessor);e.KnowYourCustomerLightBoxLinksProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.BeneficialOwnership,"LightBox.BeneficialOwnershipLightBoxLinksProcessor",i)||this}return __extends(i,e),i}(e.BaseLightBoxLinksProcessor);e.BeneficialOwnershipLightBoxLinksProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.FundsProtection,"LightBox.FundsProtectionLightBoxLinksProcessor",i)||this}return __extends(i,e),i}(e.BaseLightBoxLinksProcessor);e.FundsProtectionLightBoxLinksProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o){var n=e.call(this,t.Enums.LightBoxEventSource.SubmitErrors,"LightBox.LightBoxSubmitErrorsProcessor",o)||this;return n.pageScroller=i,n}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(i.submitButtonSelector).removeClass("error"),$(t.Keys.LightBoxKeys.SubmitSelector).removeClass(i.greyOutClass),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("submitErrorsLightBoxContainer"),this.focusFirstValidationError()},i.prototype.show=function(){var t=this;e.prototype.showWithPostSetupCallback.call(this,this.setPosition),this.pageScroller.scrollToPoint(document.body.scrollHeight),$(i.submitButtonSelector).addClass("error"),$(window).on(e.prototype.buildEventName.call(this,"resize"),function(){return t.setPosition()})},i.prototype.bindEvents=function(){var t=this;$(i.submitErrorsLightboxClickSelector).on(e.prototype.buildEventName.call(this,"click"),function(){return t.hide()})},i.prototype.unbindEvents=function(){$(i.submitErrorsLightboxClickSelector).off(e.prototype.buildEventName.call(this,"click")),$(window).off(e.prototype.buildEventName.call(this,"resize"))},i.prototype.setupLightBox=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("submitErrorsLightBoxContainer"),e.prototype.setupLightBox.call(this)},i.prototype.focusFirstValidationError=function(){var t=$("[toFocus]");if(t.length){var e=$(t[0]),i=e,o=e.parent().parent();t.data("focus-to")&&t.data("focus-to").length&&(i=$("#"+t.data("focus-to")),o=i.parent().parent().parent()),"Country"!==i.attr("id")&&i.focus(),this.pageScroller.scrollToElement(o[0]),e.removeAttr("toFocus")}},i.prototype.setPosition=function(){var t=parseInt($(i.updateIdentityButtonSelector).css("height")),e=parseInt($(i.verificationOutroSelector).css("height"));if(t&&e){var o=t+e+i.lightBoxArrowHeight;$(i.submitErrorsLightBoxSelector).css("bottom",o)}},i.greyOutClass="buttonGreyOut",i.submitErrorsLightboxClickSelector=".greyOut, .submitErrorsLightBox p",i.submitErrorsLightBoxSelector=".submitErrorsLightBox",i.updateIdentityButtonSelector="fieldset[data-section='update-identity'] div[data-control='button']",i.verificationOutroSelector="fieldset[data-section='update-identity'] div.verificationOutro",i.submitButtonSelector="fieldset[data-section=submit] button#Submit",i.lightBoxArrowHeight=13,i}(e.BaseLightBoxProcessor);e.LightBoxSubmitErrorsProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){this.submitButtonSelector="fieldset[data-section='submit'] div[data-control='button']"}return e.prototype.hide=function(){$(this.submitButtonSelector).show(),$(e.creatingAccountSelector).hide(),$(t.Services.LightBoxService.greyOutClassName).hide()},e.prototype.show=function(){$(this.submitButtonSelector).hide(),$(e.creatingAccountSelector).show(),$(t.Services.LightBoxService.greyOutClassName).show()},e.prototype.setupLightBox=function(t){},e.prototype.supports=function(e){return e===t.Enums.LightBoxEventSource.CreatingAccount},e.creatingAccountSelector="fieldset[data-section='submit'] div[data-control='creating-account']",e}();e.LightBoxCreatingAccountProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.VerifyingDetails,"LightBox.LightBoxVerifyingDetailsProcessor",i)||this}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("submitErrorsLightBoxContainer")},i.prototype.show=function(){e.prototype.show.call(this)},i.prototype.bindEvents=function(){},i.prototype.unbindEvents=function(){},i.prototype.setupLightBox=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("submitErrorsLightBoxContainer"),e.prototype.setupLightBox.call(this)},i}(e.BaseLightBoxProcessor);e.LightBoxVerifyingDetailsProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){this.submitButtonSelector="fieldset[data-section='submit'] div[data-control='button']"}return e.prototype.hide=function(){$(e.createdAccountSelector).hide(),$(t.Services.LightBoxService.greyOutClassName).hide()},e.prototype.show=function(){$(this.submitButtonSelector).hide(),$(e.createdAccountSelector).show(),$(t.Services.LightBoxService.greyOutClassName).show()},e.prototype.supports=function(e){return e===t.Enums.LightBoxEventSource.AccountCreated},e.createdAccountSelector="fieldset[data-section='submit'] div[data-control='account-created']",e}();e.LightBoxAccountCreatedProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.OnAccountCreationError,"LightBox.LightBoxAccountCreationErrorProcessor",i)||this}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.SubmitSelector).removeClass(i.greyOutClass),$(i.submitButtonSelector).toggleClass("error"),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("submitErrorsLightBoxContainer")},i.prototype.show=function(){e.prototype.show.call(this),$(t.Keys.LightBoxKeys.SubmitSelector).addClass(i.greyOutClass),$(i.submitButtonSelector).toggleClass("error")},i.prototype.bindEvents=function(){var t=this;$(i.clickSelector).on(e.prototype.buildEventName.call(this,"click"),function(){return t.hide()})},i.prototype.unbindEvents=function(){$(i.clickSelector).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.setupLightBox=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("submitErrorsLightBoxContainer"),e.prototype.setupLightBox.call(this)},i.greyOutClass="buttonGreyOut",i.clickSelector=".greyOut, .accountCreationErrorLightBox p",i.submitButtonSelector="fieldset[data-section=submit] button#Submit",i}(e.BaseLightBoxProcessor);e.LightBoxAccountCreationErrorProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e,i,o,n){var r=t.call(this,e,i,o)||this;return r.useragent=n,r}return __extends(e,t),e.prototype.bindEvents=function(){var e=this,i="number"==typeof window.orientation&&"object"==typeof window.onorientationchange;!i||this.useragent.isDeviceWithNativeBrowserScalingIssue()&&this.useragent.isAndroidNativeBrowser()?$(window).on(t.prototype.buildEventName.call(this,"resize"),function(){return e.onOrientationChange()}):$(window).on(t.prototype.buildEventName.call(this,"orientationchange"),function(){return e.onOrientationChange()})},e.prototype.unbindEvents=function(){$(window).off(t.prototype.buildEventName.call(this,"orientationchange")).off(t.prototype.buildEventName.call(this,"resize"))},e.prototype.onOrientationChange=function(){var t=this;if(this.useragent.isDeviceWithNativeBrowserScalingIssue()&&this.useragent.isAndroidNativeBrowser()){var e=Number(window.getComputedStyle($("fieldset[data-section='country-of-residence']")[0]).getPropertyValue("width").replace("px",""));window.setTimeout(function(){t.onOrientationChangeEvent(e)},100)}else this.initaliseLayout(null)},e.prototype.onOrientationChangeEvent=function(t){var e=this,i=Number(window.getComputedStyle($("fieldset[data-section='country-of-residence']")[0]).getPropertyValue("width").replace("px",""));i!==t?this.initaliseLayout(null):window.setTimeout(function(){e.onOrientationChangeEvent(t)},100)},e.prototype.initaliseLayout=function(t){this.layoutProcessors.forEach(function(e){return e.initialise(t)})},e}(t.BaseLightBoxProcessor);t.BaseModalLightBoxProcessor=e}(e=t.LightBox||(t.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i;!function(e){var i=function(){function e(t,e,i,o,n,r){this.logger=t,this.frameService=e,this.pageScroller=i,this.useragent=o,this.client=n,this.selectorPrefix=r}return e.prototype.clear=function(t){this.supports()&&(e.isInitialised=!1,this.clearLayout())},e.prototype.initialise=function(t){this.supports()&&this.initialiseLayout()},e.prototype.freezeBackground=function(t,i){var o=this;if(!e.isInitialised){e.isInitialised=!0;var n=$("div.searchMatchesLightBox div.lightBoxCloseButton, div.countryChangeLightBox div[data-control='button'], div.searchMatchesLightBox a.lightBoxCancelButton");$(window).on("touchmove.BaseLayoutProcessor touchstart.BaseLayoutProcessor",function(t){return o.stopImmediatePropagation(t)}),$(document).on("touchmove.BaseLayoutProcessor touchstart.BaseLayoutProcessor",function(t){return o.stopImmediatePropagation(t)}),n.on("touchmove.BaseLayoutProcessor",function(t){return o.stopImmediatePropagation(t)}),$(".greyOut, div.searchMatchesLightBox").on("touchmove.BaseLayoutProcessor touchstart.BaseLayoutProcessor",function(t){return o.stopImmediatePropagation(t)}),n.on("touchstart.BaseLayoutProcessor",function(t){return t.stopPropagation()}),$("div.searchMatchesLightBox div.dynamicContent").on("touchmove.BaseLayoutProcessor touchstart.BaseLayoutProcessor",function(t){return t.stopPropagation()})}this.client.deviceSupportsHtmlPositionFixed()?$("html").css({height:this.frameService.isInHostedMode()?t+"px":"100%",overflow:"hidden","overflow-y":"scroll",position:"fixed"}):$("html").css({height:this.frameService.isInHostedMode()?t+"px":"100%",overflow:"hidden","overflow-y":"scroll"})},e.prototype.unfreezeBackground=function(){$(window).off("touchmove.BaseLayoutProcessor touchstart.BaseLayoutProcessor"),$(document).off("touchmove.BaseLayoutProcessor touchstart.BaseLayoutProcessor"),$(".greyOut, div.searchMatchesLightBox, div.searchMatchesLightBox div.lightBoxCloseButton, div.searchMatchesLightBox div.dynamicContent, div.countryChangeLightBox div[data-control='button'], div.searchMatchesLightBox a.lightBoxCancelButton").off("touchmove.BaseLayoutProcessor touchstart.BaseLayoutProcessor"),$("html").removeAttr("style"),$(e.bodySelector).removeAttr("style"),$(e.overlaySelector).removeAttr("style"),this.frameService.postIframeHeight(t.OpenAccount.getPreviousIframeHeight())},e.prototype.hasIframe=function(){return this.frameService.isInHostedMode()},e.prototype.getLightBoxClassName=function(){return this.selectorPrefix},e.prototype.getLightBoxSelector=function(){return"."+this.selectorPrefix},e.prototype.getLightBoxHeaderSelector=function(){return"."+this.selectorPrefix+" .lightBoxHeader"},e.prototype.getLightBoxHorizontalRuleSelector=function(){return"."+this.selectorPrefix+" .lightBoxBody .hr"},e.prototype.getLightBoxCancelButtonSelector=function(){return"."+this.selectorPrefix+" .lightBoxBody div[data-control='button'] a#Cancel"},e.prototype.getLightBoxDynamicContentSelector=function(){return"."+this.selectorPrefix+" .lightBoxBody .dynamicContent"},e.prototype.isLandscapeOrientation=function(){return this.client.isLandscapeOrientation()},e.prototype.getCancelButtonHeight=function(){return $(this.getLightBoxCancelButtonSelector()).parent().is(":visible")?Math.abs($(this.getLightBoxCancelButtonSelector()).parent().outerHeight()):0},e.prototype.getHorizontalRuleHeight=function(){return Math.abs($(this.getLightBoxHorizontalRuleSelector()).outerHeight())},e.prototype.getHeaderHeight=function(){return Math.abs($(this.getLightBoxHeaderSelector()).outerHeight())},e.prototype.isMobileDevice=function(){return this.client.isMobileDevice()},e.prototype.isCasinoNativeDevice=function(){return"true"===$("body").attr("data-is-casino-native")},e.prototype.isHostedInCard=function(){return"true"===$("body").attr("data-hosted-in-card")},e.prototype.isLiveDealerDevice=function(){return"true"===$("body").attr("data-is-live-dealer")},e.prototype.showDateDropdown=function(){return"true"===$("body").attr("data-show-date-dropdown")},e.prototype.setDynamicContentMaxHeight=function(t){var i=t-(this.getHeaderHeight()+this.getCancelButtonHeight()+this.getHorizontalRuleHeight());i-=this.isCasinoNativeDevice()?4*e.mobileMargin:this.isHostedInCard()?6*e.mobileMargin:this.isLandscapeOrientation()?2*e.mobileMargin:3*e.mobileMargin,$(this.getLightBoxDynamicContentSelector()).css("max-height",i)},e.prototype.initialiseLayout=function(){var t=e.isInitialised?Number($(e.bodySelector).attr(e.scrollTopAttribute)):this.getScrollTop();!isNaN(t)&&t>0&&!e.isScrollTopSet&&($(e.bodySelector).attr(e.scrollTopAttribute,t),e.isScrollTopSet=!0),$(this.getLightBoxSelector()).css({top:""}),this.setLayoutProperties(this.client.getHeight(!this.useragent.isAndroidNativeBrowser()),t),this.freezeBackground(this.client.getHeight(!0),t),(this.hasIframe()||this.isHostedInCard())&&this.pageScroller.scrollToPoint(0)},e.prototype.clearLayout=function(){e.isScrollTopSet=!1;var t=$(e.bodySelector),i=Number(t.attr(e.scrollTopAttribute));t.removeAttr(e.scrollTopAttribute),this.unfreezeBackground(),$(this.getLightBoxSelector()).removeAttr("style"),!isNaN(i)&&i>0&&!this.isAppleDevice()&&($("fieldset[data-section='address']").css("overflow-y","hidden"),this.pageScroller.scrollToPoint(i),$("fieldset[data-section='address']").css("overflow-y",""))},e.prototype.isAppleDevice=function(){return/iP(hone|od|ad)/.test(navigator.platform)},e.prototype.getScrollTop=function(){var t=0;return this.isSelectOccupationLightBox()&&(t=this.hasIframe()?this.getOffset($("div#MexicoCountryOfBirthArea")).top:$(window).scrollTop()),this.isAddressLightBox()&&!this.isSelectOccupationLightBox()?this.hasIframe()&&(t=this.getOffset($("fieldset[data-section='address']")).top):this.isAccountCreationUSLightBox()&&this.hasIframe()&&(t=this.getOffset($("fieldset[data-section='submit']")).top),t},e.prototype.getOffset=function(t){var e=t.offset();return e.top-=window.scrollY,e.left-=window.scrollX,e},e.prototype.isAddressLightBox=function(){return"searchMatchesLightBox"===this.selectorPrefix},e.prototype.isSelectOccupationLightBox=function(){return"selectOccupationLightBox"===$(t.Keys.LightBoxKeys.LightBoxSelector).attr("id")},e.prototype.isAccountCreationUSLightBox=function(){return"accountCreationUSLightBox"===this.selectorPrefix},e.prototype.stopImmediatePropagation=function(t){t.stopImmediatePropagation(),t.preventDefault()},e.scrollTopAttribute="data-scroll-top",e.bodySelector="body",e.overlaySelector=".greyOut",e.mobileMinWidth=768,e.mobileMargin=44,e.isInitialised=!1,e.isScrollTopSet=!1,e}();e.BaseLayoutProcessor=i}(i=e.Common||(e.Common={}))}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i;!function(e){var i=function(i){function o(e){var o=this,n=t.Core.Ioc.OpenAccountContainer.container;return o=i.call(this,n.resolve("ILogger"),n.resolve("IFrameService"),n.resolve("IPageScroller"),n.resolve("IUserAgent"),n.resolve("IClient"),e)||this}return __extends(o,i),o.prototype.setLayoutProperties=function(t,i){var o=Math.abs(t),n=this.getTopPosition(i),r={height:"100%",width:"100%",position:"fixed",left:"0",overflow:"hidden!important",top:"-"+n},a={height:o.toString()+"px!important",top:n};$(e.BaseLayoutProcessor.bodySelector).css(r),$(e.BaseLayoutProcessor.overlaySelector).css(a),".searchMatchesLightBox"===this.getLightBoxSelector()?(this.setDynamicContentMaxHeight(o),this.setAddressLighBox(o)):".countryChangeLightBox"===this.getLightBoxSelector()?this.setCountryChangeLighbox(o):this.setAccountCreationUSLightbox(o)},o}(e.BaseLayoutProcessor);e.BaseNonIframeLayoutProcessor=i}(i=e.Common||(e.Common={}))}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),i.prototype.supports=function(){return!e.prototype.hasIframe.call(this)&&!e.prototype.isMobileDevice.call(this)},i.prototype.setAccountCreationUSLightbox=function(t){e.prototype.setDynamicContentMaxHeight.call(this,t);var i=Math.abs($("div.accountCreationUSLightBox").height())+e.prototype.getHeaderHeight.call(this)+e.prototype.getCancelButtonHeight.call(this)+e.prototype.getHorizontalRuleHeight.call(this),o=t-i;$(e.prototype.getLightBoxSelector.call(this)).css({top:o/2+"px","margin-top":"0","margin-bottom":"0"})},i.prototype.setCountryChangeLighbox=function(t){var i=$("div"+e.prototype.getLightBoxSelector.call(this)),o=i.find(".lightBoxBody").height()+6,n=((t-i.height())/2).toString()+"px";i.css({top:n,"margin-top":"0","margin-bottom":"0",height:o+"px"}),this.setleftIfIe8()},i.prototype.getTopPosition=function(t){return t+"px"},i.prototype.setAddressLighBox=function(t){e.prototype.setDynamicContentMaxHeight.call(this,t);var i=Math.abs($("div.searchMatchesLightBox .dynamicContent").height())+e.prototype.getHeaderHeight.call(this)+e.prototype.getCancelButtonHeight.call(this)+e.prototype.getHorizontalRuleHeight.call(this),o=t-i;$(e.prototype.getLightBoxSelector.call(this)).css({top:o/2+"px","margin-top":"0","margin-bottom":"0"})},i.prototype.setleftIfIe8=function(){if($(t.BaseLayoutProcessor.bodySelector).hasClass("ie8")){var i=$("div"+e.prototype.getLightBoxSelector.call(this));i.css({left:(($(window).width()-i.width())/2).toString()+"px","margin-left":"0","margin-right":"0"})}},i}(t.BaseNonIframeLayoutProcessor);t.DesktopLayoutProcessor=e}(e=t.Common||(t.Common={}))}(e=t.LightBox||(t.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i;!function(e){var i=function(i){function o(e){var o=this,n=t.Core.Ioc.OpenAccountContainer.container;return o=i.call(this,n.resolve("ILogger"),n.resolve("IFrameService"),n.resolve("IPageScroller"),n.resolve("IUserAgent"),n.resolve("IClient"),e)||this}return __extends(o,i),o.prototype.supports=function(){return i.prototype.isMobileDevice.call(this)&&this.hasIframe()},o.prototype.freezeBackground=function(t,o){var n=Math.abs(t);i.prototype.freezeBackground.call(this,n,o),this.frameService.postIframeHeight(n),this.client.deviceSupportsHtmlPositionFixed()?$(e.BaseLayoutProcessor.bodySelector).css({width:"100%",height:this.frameService.isInHostedMode()?t+"px":"100%",overflow:"hidden",position:"fixed"}):$(e.BaseLayoutProcessor.bodySelector).css({width:"100%",height:this.frameService.isInHostedMode()?t+"px":"100%",overflow:"hidden"}),$(e.BaseLayoutProcessor.overlaySelector).css({height:"100vh"})},o.prototype.setLayoutProperties=function(t,e){var i=Math.abs(t);".searchMatchesLightBox"===this.getLightBoxSelector()?this.setAddressLightBox(i):".countryChangeLightBox"===this.getLightBoxSelector()?this.setCountryChangeLightbox(i):this.setAccountCreationUSLightbox(i)},o.prototype.setAccountCreationUSLightbox=function(t){var e=Math.abs($("div.accountCreationUSLightBox").height())+this.getHeaderHeight()+this.getCancelButtonHeight()+this.getHorizontalRuleHeight(),i=this.isLandscapeOrientation()?(t-e)/2+"px":this.getTop(t,e);this.client.isAndroidNativeBrowserVersionLessThan4_4()?$(this.getLightBoxSelector()).parent().css({left:this.getLightboxMarginLeftForAndroidNativeBrowserVersionLessThan4_4CssValue(),top:i,"margin-bottom":"0","margin-top":"0"}):$(this.getLightBoxSelector()).css({"margin-bottom":"0","margin-top":"0",top:+this.getLightboxTopCssValue(t)+"px"})},o.prototype.setCountryChangeLightbox=function(t){this.client.isAndroidNativeBrowserVersionLessThan4_4()?$(this.getLightBoxSelector()).parent().css({left:this.getLightboxMarginLeftForAndroidNativeBrowserVersionLessThan4_4CssValue(),"margin-top":"0","margin-bottom":"0",top:this.getLightboxTopForAndroidNativeBrowserVersionLessThan4_4CssValue(t),"z-index":50}):$(this.getLightBoxSelector()).css({"margin-top":"0","margin-bottom":"0",top:+this.getLightboxTopCssValue(t)+"px"})},o.prototype.setAddressLightBox=function(t){this.setDynamicContentMaxHeight(t);var e=Math.abs($("div.searchMatchesLightBox .dynamicContent").height())+this.getHeaderHeight()+this.getCancelButtonHeight()+this.getHorizontalRuleHeight(),i=this.isLandscapeOrientation()?(t-e)/2+"px":this.getTop(t,e);this.client.isAndroidNativeBrowserVersionLessThan4_4()?$(this.getLightBoxSelector()).parent().css({left:this.getLightboxMarginLeftForAndroidNativeBrowserVersionLessThan4_4CssValue(),top:i,"margin-bottom":"0","margin-top":"0"}):$(this.getLightBoxSelector()).css({top:i,"margin-bottom":"0","margin-top":"0"})},o.prototype.getTop=function(t,i){var o=(100-100/t*(i+e.BaseLayoutProcessor.mobileMargin))/2;return this.useragent.isAndroidNativeBrowser()&&this.useragent.isDeviceWithNativeBrowserScalingIssue()&&(o/=2),o+"%"},o.prototype.getLightboxTopCssValue=function(t){var o=$("div"+this.getLightBoxSelector()).height(),n=i.prototype.isLandscapeOrientation.call(this)&&!this.useragent.isAndroid(),r=2*e.BaseLayoutProcessor.mobileMargin,a=n?0:r,s=t-(o+a),c=s/2;return c.toString()},o.prototype.getLightboxTopForAndroidNativeBrowserVersionLessThan4_4CssValue=function(t){var e=0;if(i.prototype.isLandscapeOrientation.call(this)){var o=$("div"+this.getLightBoxSelector()).height();e=Math.abs((t-o)/2)}else e=$("fieldset[data-section='personal-information']").offset().top;return e.toString()+"px"},o.prototype.getLightboxMarginLeftForAndroidNativeBrowserVersionLessThan4_4CssValue=function(){var t="0",e=$("div"+this.getLightBoxSelector()).width(),i=Number(window.getComputedStyle($("fieldset[data-section='country-of-residence']")[0]).getPropertyValue("width").replace("px",""));return i>e&&(t=Math.abs((i-e)/2).toString()+"px"),t},o}(e.BaseLayoutProcessor);e.MobileIframeLayoutProcessor=i}(i=e.Common||(e.Common={}))}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),i.prototype.supports=function(){return!this.hasIframe()&&this.isMobileDevice()},i.prototype.setAccountCreationUSLightbox=function(e){var i=Math.abs($("div.accountCreationUSLightBox").height())+this.getHeaderHeight()+this.getCancelButtonHeight()+this.getHorizontalRuleHeight(),o=0;o=this.isLiveDealerDevice()?e-(i+t.BaseLayoutProcessor.mobileMargin):this.isLandscapeOrientation()&&!this.isCasinoNativeDevice()?e-(i+2*t.BaseLayoutProcessor.mobileMargin):e-(i+3*t.BaseLayoutProcessor.mobileMargin),$(this.getLightBoxSelector()).css({"margin-top":"0","margin-bottom":"0",top:o/2+"px"})},i.prototype.setCountryChangeLighbox=function(t){var e=(t-$("div"+this.getLightBoxSelector()).height())/2;this.isCasinoNativeDevice()&&(e/=5),this.isLargeIPadPro()&&this.isBrowserChrome()?this.client.isLandscapeOrientation()?$(this.getLightBoxSelector()).css({top:e+"px","margin-top":"0","margin-bottom":"0","margin-left":"107px"}):$(this.getLightBoxSelector()).css({top:e+"px","margin-top":"0","margin-bottom":"0","margin-left":"-67px"}):$(this.getLightBoxSelector()).css({top:e+"px","margin-top":"0","margin-bottom":"0"})},i.prototype.setAddressLighBox=function(e){var i=Math.abs($("div.searchMatchesLightBox .dynamicContent").height())+this.getHeaderHeight()+this.getCancelButtonHeight()+this.getHorizontalRuleHeight(),o=0;o=this.isLiveDealerDevice()?e-(i+t.BaseLayoutProcessor.mobileMargin):this.isLandscapeOrientation()&&!this.isCasinoNativeDevice()?e-(i+2*t.BaseLayoutProcessor.mobileMargin):e-(i+3*t.BaseLayoutProcessor.mobileMargin),$(this.getLightBoxSelector()).css({"margin-top":"0","margin-bottom":"0",top:o/2+"px"})},i.prototype.getTopPosition=function(t){return(t*(this.isMobileDevice()&&!this.useragent.isAndroid()&&e.prototype.isLandscapeOrientation.call(this)?2:1)).toString()+"px"},i.prototype.isLargeIPadPro=function(){return this.useragent.userAgent().indexOf("iPad")>-1&&window.screen.availHeight>=1366&&window.screen.availWidth>=1024},i.prototype.isBrowserChrome=function(){return this.useragent.userAgent().indexOf("CriOS")>-1},i}(t.BaseNonIframeLayoutProcessor);t.MobileLayoutProcessor=e}(e=t.Common||(t.Common={}))}(e=t.LightBox||(t.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o,n,r,a,s,c){var l=e.call(this,t.Enums.LightBoxEventSource.OnCountryChange,"LightBox.LightBoxCountryChangeProcessor",a,o)||this;return l.countryChangeService=i,l.common=n,l.sessionSaveFormService=r,l.pageWaiting=s,l.client=c,l.registerLayoutProcessors(),l}return __extends(i,e),i.prototype.hide=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).removeAttr("data-is-countryChange"),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("confirmCountryChangeLightBox"),e.prototype.hide.call(this)},i.prototype.show=function(){this.client.isAndroidNativeBrowserVersionLessThan4_4()||$("fieldset[data-section='country-of-residence']").append($(t.Keys.LightBoxKeys.LightBoxSelector)),$(t.Keys.LightBoxKeys.LightBoxSelector).attr("data-is-countryChange",""),e.prototype.show.call(this),this.initaliseLayout(null),$(i.countryDropDownSelector).blur(),$(".lightBoxBody").attr("tabindex",-1).focus(),setTimeout(function(){return $("."+i.selectorPrefix).parent().show()},0)},i.prototype.setupLightBox=function(){e.prototype.setupLightBox.call(this),this.setMessageText(),$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("confirmCountryChangeLightBox")},i.prototype.bindEvents=function(){var i=this;e.prototype.bindEvents.call(this);var o=$(t.Keys.LightBoxKeys.CancelButton);$(t.Keys.LightBoxKeys.ConfirmButton).on(e.prototype.buildEventName.call(this,"click"),function(t){return i.confirmClick(t)}),o.on(e.prototype.buildEventName.call(this,"click"),function(t){return i.cancelClick(t)}),o.on(e.prototype.buildEventName.call(this,"keypress"),function(t){return i.onCancelKeyUp(t)}),this.sessionSaveFormService.removeForm()},i.prototype.unbindEvents=function(){$(t.Keys.LightBoxKeys.ConfirmButton).off(e.prototype.buildEventName.call(this,"click")),$(t.Keys.LightBoxKeys.CancelButton).off(e.prototype.buildEventName.call(this,"click")).off(e.prototype.buildEventName.call(this,"keypress")),e.prototype.unbindEvents.call(this)},i.prototype.registerLayoutProcessors=function(){this.layoutProcessors=new Array,this.layoutProcessors.push(new t.Processors.LightBox.Common.MobileIframeLayoutProcessor(i.selectorPrefix)),this.layoutProcessors.push(new t.Processors.LightBox.Common.DesktopLayoutProcessor(i.selectorPrefix)),this.layoutProcessors.push(new t.Processors.LightBox.Common.MobileLayoutProcessor(i.selectorPrefix))},i.prototype.clearLayout=function(){this.layoutProcessors.forEach(function(t){return t.clear(null)})},i.prototype.onCancelKeyUp=function(e){var i=e.which||e.keyCode;i===t.Enums.KeyCode.Enter&&this.cancelClick(e)},i.prototype.cancelClick=function(e){this.cancel(e,t.Keys.LightBoxKeys.CancelButton),this.clearLayout()},i.prototype.confirmClick=function(e){var i=$("#Country"),o=$("#OddsType");this.countryChangeService.changeCountry(i.find(":selected").val(),o.find(":selected").val());var n=$(e.target);n[0].hasAttribute("selected")||($(t.Keys.LightBoxKeys.ConfirmButton).removeAttr("selected"),n.attr("selected",""),n.parent().parent().attr("selected","")),this.hide(),this.clearLayout(),this.pageWaiting.show()},i.prototype.cancel=function(e,i){var o=$("#Country"),n=$("#hdnPleaseSelect").val(),r=$("#OddsType");if(0===o.find(":contains('"+n+"')").length){var a="{0}",s="<option value='-1' selected='selected'>{0}</option>",c=s.replace(a,n);o.prepend(c),o.val("-1")}this.countryChangeService.changeCountry(t.Enums.CountryId.PleaseSelect.toString(),r.find(":selected").val());var l=$(e.target);l[0].hasAttribute("selected")||($(i).removeAttr("selected"),l.attr("selected",""),l.parent().parent().attr("selected","")),this.hide()},i.prototype.setMessageText=function(){var t=$(i.countryDropDownSelector).find(":selected").text(),e=$("#lightBoxMessage"),o=e.text().replace("{0}",t);e.text(o)},i.countryDropDownSelector="#Country",i.selectorPrefix="countryChangeLightBox",i}(e.BaseModalLightBoxProcessor);e.LightBoxCountryChangeProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){
function i(t,i,o,n,r){var a=e.call(this,t,i,o)||this;return a.frameService=n,a.clickSelector=r,a}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("submitErrorsLightBoxContainer")},i.prototype.bindEvents=function(){var t=this;$(this.clickSelector).on(e.prototype.buildEventName.call(this,"click"),function(){return t.returnToHomepage()})},i.prototype.unbindEvents=function(){$(this.clickSelector).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.setupLightBox=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("submitErrorsLightBoxContainer"),e.prototype.setupLightBox.call(this)},i.prototype.returnToHomepage=function(){"true"===$("body").attr("data-is-desktop")?window.close():this.frameService.isInHostedMode()?this.frameService.postNavigateHome():document.location.href=$("#closeUrl").val()},i}(e.BaseLightBoxProcessor);e.ReturnToHomePageLightBoxProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o){return e.call(this,t.Enums.LightBoxEventSource.DuplicateDetails,"LightBox.DuplicateDetailsProcessor",i,o,".duplicateDetailsLightBox p")||this}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.SubmitButtonSelector).show(),$(t.Keys.LightBoxKeys.CannotCreateAccountSelector).hide()},i.prototype.show=function(){e.prototype.show.call(this),$(t.Keys.LightBoxKeys.SubmitButtonSelector).hide(),$(t.Keys.LightBoxKeys.CannotCreateAccountSelector).show()},i}(e.ReturnToHomePageLightBoxProcessor);e.LightBoxDuplicateDetailsProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o){return e.call(this,t.Enums.LightBoxEventSource.UnderageDetails,"LightBox.UnderageDetailsProcessor",i,o,".underageDetailsLightBox p")||this}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.SubmitButtonSelector).show(),$(t.Keys.LightBoxKeys.CannotCreateAccountSelector).hide()},i.prototype.show=function(){e.prototype.show.call(this),$(t.Keys.LightBoxKeys.SubmitButtonSelector).hide(),$(t.Keys.LightBoxKeys.CannotCreateAccountSelector).show()},i}(e.ReturnToHomePageLightBoxProcessor);e.LightBoxUnderageDetailsProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o){return e.call(this,t.Enums.LightBoxEventSource.DeceasedDetails,"LightBox.DeceasedDetailsProcessor",i,o,".deceasedDetailsLightBox p")||this}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.SubmitButtonSelector).show(),$(t.Keys.LightBoxKeys.CannotCreateAccountSelector).hide()},i.prototype.show=function(){e.prototype.show.call(this),$(t.Keys.LightBoxKeys.SubmitButtonSelector).hide(),$(t.Keys.LightBoxKeys.CannotCreateAccountSelector).show()},i}(e.ReturnToHomePageLightBoxProcessor);e.LightBoxDeceasedDetailsProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o){return e.call(this,t.Enums.LightBoxEventSource.FailedPasswordStorage,"LightBox.FailedPasswordStorageProcessor",i,o,".failedPasswordStorageLightBox p")||this}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.SubmitButtonSelector).show(),$(t.Keys.LightBoxKeys.CannotCreateAccountSelector).hide()},i.prototype.show=function(){e.prototype.show.call(this),$(t.Keys.LightBoxKeys.SubmitButtonSelector).hide(),$(t.Keys.LightBoxKeys.CannotCreateAccountSelector).show()},i}(e.ReturnToHomePageLightBoxProcessor);e.LightBoxFailedPasswordStorageProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(t){var e=this;this.isValidCountry(t.selectedCountry)&&t.addressStates.forEach(function(i){t.formattedAddresses.push(e.formatAddress(i))})},t.prototype.processParts=function(t){var e=[];return t.addressLine1&&""!==$.trim(t.addressLine1)&&e.push(t.addressLine1),t.addressLine2&&""!==$.trim(t.addressLine2)&&e.push(t.addressLine2),t.addressLine3&&""!==$.trim(t.addressLine3)&&e.push(t.addressLine3),e},t.prototype.formatAddress=function(t){return this.processParts(t).join(", ")},t}();t.BaseAddressFormatProcessor=e}(e=t.AddressLookup||(t.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.isValidCountry=function(e){return e===t.Enums.CountryId.UnitedKingdom},i}(e.BaseAddressFormatProcessor);e.AddressFormatProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.addressStateHandler=e.resolve("IAddressStateHandler")}return e.prototype.process=function(t){t.addressPreSearchState=this.addressStateHandler.read(!0,t.isPreviousAddress)},e}();e.ReadAddressPreSearchDataProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(e){this.searchType=e;var i=t.Core.Ioc.OpenAccountContainer.container;this.addressService=i.resolve("IAddressService"),this.addressStateHandler=i.resolve("IAddressStateHandler")}return e.prototype.process=function(t){var e=this;this.doLookup(this.getData(t),function(i){"moniker"===e.searchType?(t.monikerResponse=i.addresses,t.monikerSearchAuditAddressAcceleratorId=i.auditAddressAcceleratorId):(t.addressStates=i.addresses,t.auditAddressAcceleratorId=i.auditAddressAcceleratorId),e.onAddressSearchSuccess(t)},function(i){e.onAddressSearchFailure(t)})},e.prototype.onAddressSearchFailure=function(t){var e=this.getAddressOnSearchFailure(t);t.trackEvent=0!==e.addressLookupMatchType,this.setFailureState(t),this.addressStateHandler.write(e,!1,t.isPreviousAddress,t.auditAddressAcceleratorId)},e}();e.BaseAddressSearchProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){var i=e.call(this,"address")||this,o=t.Core.Ioc.OpenAccountContainer.container;return i.addressSuggestionFactory=o.resolve("IAddressSuggestionFactory"),i}return __extends(i,e),i.prototype.doLookup=function(t,e,i){this.addressService.getMatches(t,e,i)},i.prototype.getData=function(t){return t.addressPreSearchState},i.prototype.getAddressOnSearchFailure=function(t){return this.addressSuggestionFactory.getSuggestion(t.addressPreSearchState,t.selectedCountry)},i.prototype.onAddressSearchSuccess=function(t){if(t.isAddressSearchSuccess=!0,t.addressStates&&1===t.addressStates.length)t.trackEvent=0!==t.addressStates[0].addressLookupMatchType,this.addressStateHandler.write(t.addressStates[0],!1,t.isPreviousAddress,t.auditAddressAcceleratorId);else{var e=this.addressSuggestionFactory.getSuggestion(t.addressPreSearchState,t.selectedCountry);t.isAddressSearchSuccess=!1,this.addressStateHandler.write(e,!1,t.isPreviousAddress,t.auditAddressAcceleratorId)}t.onSuccess(t)},i.prototype.setFailureState=function(t){t.isAddressSearchSuccess=!1,t.onFailure(t)},i}(e.BaseAddressSearchProcessor);e.AddressSearchProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.isValidCountry=function(e){return e!==t.Enums.CountryId.UnitedKingdom&&e!==t.Enums.CountryId.Brazil&&e!==t.Enums.CountryId.Japan&&e!==t.Enums.CountryId.Slovakia&&e!==t.Enums.CountryId.CzechRepublic&&e!==t.Enums.CountryId.Austria},i.prototype.processParts=function(t){var i=e.prototype.processParts.call(this,t);return t.townCity&&""!==$.trim(t.townCity)&&i.push(t.townCity),t.postcode&&""!==$.trim(t.postcode)&&i.push(t.postcode),i},i}(e.BaseAddressFormatProcessor);e.TownPostcodeAddressFormatProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.isValidCountry=function(e){return e===t.Enums.CountryId.Brazil||e===t.Enums.CountryId.Slovakia||e===t.Enums.CountryId.CzechRepublic||e===t.Enums.CountryId.Austria},i.prototype.processParts=function(t){var e=[];return t.addressLine1&&""!==$.trim(t.addressLine1)&&e.push(t.addressLine1),t.townCity&&""!==$.trim(t.townCity)&&e.push(t.townCity),t.postcode&&""!==$.trim(t.postcode)&&e.push(t.postcode),e},i}(e.BaseAddressFormatProcessor);e.TownPostCodeLine1AddressFormatProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.isValidCountry=function(e){return e===t.Enums.CountryId.Japan},i.prototype.processParts=function(t){var e=[];return t.addressLine1&&""!==$.trim(t.addressLine1)&&e.push(t.addressLine1),t.postcode&&""!==$.trim(t.postcode)&&e.push(t.postcode),e},i}(e.BaseAddressFormatProcessor);e.Line1PostcodeAddressFormatProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.addressTemplate='<div data-control="button" class="addressButtons"><a id="CurrentAddress_{0}">{1}</a><div></div></div>',this.dynamicContentSelector="div[data-control='lightBox'] > div > div.lightBoxBody > div.dynamicContent"}return t.prototype.process=function(t){this.setAddressTemplate(t),this.setDynamicContent(t)},t.prototype.setDynamicContent=function(t){var e=$(this.dynamicContentSelector);e.empty(),t.addressTemplates.forEach(function(i,o){var n=$(i);n.data("addressState",t.addressStates[o]),e.append(n)})},t.prototype.setAddressTemplate=function(t){var e=this,i=["{0}","{1}"];t.formattedAddresses.forEach(function(o,n){t.addressTemplates.push(e.addressTemplate.replace(i[0],n.toString()).replace(i[1],o))})},t}();t.DynamicContentProcessor=e}(e=t.AddressLookup||(t.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.addressStateHandler=e.resolve("IAddressStateHandler"),this.addressSuggestionFactory=e.resolve("IAddressSuggestionFactory"),this.auditAddressHandler=e.resolve("IAuditAddressHandler")}return e.prototype.process=function(t){if(t.enterAddressManually){t.isPreviousAddress||$("#hdnCurrentAddressEnteredManually").val("true");var e=this.addressSuggestionFactory.getSuggestion(t.addressPreSearchState,t.selectedCountry);t.trackEvent=0!==e.addressLookupMatchType,this.addressStateHandler.write(e,!1,t.isPreviousAddress,0),this.auditAddressHandler.auditAddress(e,t.auditAddressAcceleratorId,!1)}},e}();e.EnterAddressManuallyProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.trackingService=e.resolve("ITrackingService"),this.domDisplayService=e.resolve("IDomDisplayService"),this.flexiLabelService=e.resolve("IFlexiLabelService"),this.validationService=e.resolve("IValidationService"),this.userAgent=e.resolve("IUserAgent"),this.client=e.resolve("IClient")}return e.prototype.process=function(e){e.trackEvent&&this.trackEvent(t.Enums.TrackingEvent.AddressLookupAddressSelected),e.enterAddressManually&&this.trackEvent(t.Enums.TrackingEvent.AddressLookupEnterManually),this.applyDomChanges(e.isPreviousAddress),this.resetFlexiLabels(e.isPreviousAddress),e.selectedCountry===t.Enums.CountryId.Spain&&this.validationService.hideValidationMessage($("div#FiscalResidenceArea").find("select")),this.resetDropDowns(e.isPreviousAddress),this.validatePostcode(e.isPreviousAddress)},e.prototype.trackEvent=function(t){this.trackingService.track({trackingEvent:t,additionalInformation:""})},e.prototype.applyDomChanges=function(e){var i=$(t.Keys.AddressKeys.getPostAddressSearch(e));this.domDisplayService.hide($(t.Keys.AddressKeys.getPreAddressSearch(e))),this.domDisplayService.show(i),i.attr("visible","")},e.prototype.resetFlexiLabels=function(e){for(var i=$(t.Keys.AddressKeys.getPostAddressSearch(e)).find(t.Keys.FlexiLabelKeys.InputSelector),o=0;o<i.length;o++)this.flexiLabelService.applyFlexiLabel($(i[o])),this.initialiseLabel(i[o])},e.prototype.resetDropDowns=function(e){for(var i=this,o=$(t.Keys.AddressKeys.getPostAddressSearch(e)).find("select"),n=0;n<o.length;n++)this.validationService.hideValidationMessage($(o[n]));setTimeout(function(){for(var t=0;t<o.length;t++){var e=i.validationService.validateSpecific($(o[t]),["data-val-restrictedstateregion"]);e.isValid||i.validationService.showValidationMessage($(e.controlId),e)}},0)},e.prototype.validatePostcode=function(e){for(var i=$(t.Keys.AddressKeys.getPostAddressSearch(e)).find("#CurrentPostcode"),o=0;o<i.length;o++){var n=this.validationService.validate($(i[o]));n.isValid||this.validationService.showValidationMessage($(n.controlId),n)}},e.prototype.initialiseLabel=function(t){this.userAgent&&this.userAgent.isAndroid()&&(this.client.isAndroidNativeBrowserVersionLessThan4_4()||(t.focus(),t.blur()),this.validationService.hideValidationMessage($(t)))},e}();e.ShowAddressPostSearchProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(t){t.monikerSearchData={addressSearchMonikerId:t.selectedAddress.addressSearchMonikerId,buildingNumber:t.addressPreSearchState.buildingNumber,buildingFloor:t.addressPreSearchState.buildingFloor,unitNumber:t.addressPreSearchState.unitNumber,streetName:t.addressPreSearchState.streetName,city:t.addressPreSearchState.city,postcode:t.addressPreSearchState.postcode}},t}();t.ReadMonikerPreSearchDataProcessor=e}(e=t.AddressLookup||(t.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){var i=e.call(this,"moniker")||this,o=t.Core.Ioc.OpenAccountContainer.container;return i.addressSuggestionFactory=o.resolve("IAddressSuggestionFactory"),i.auditAddressHandler=o.resolve("IAuditAddressHandler"),i}return __extends(i,e),i.prototype.process=function(t){t.enterAddressManually||e.prototype.process.call(this,t)},i.prototype.doLookup=function(t,e,i){this.addressService.getMonikerMatch(t,e,i)},i.prototype.getData=function(t){return t.monikerSearchData},i.prototype.getAddressOnSearchFailure=function(t){this.addressSuggestionFactory.getSuggestion(t.addressPreSearchState,t.selectedCountry)},i.prototype.onAddressSearchSuccess=function(t){t.isMonikerSearchSuccess=!0,t.monikerResponse&&t.monikerResponse.length>0?(this.addressStateHandler.write(t.monikerResponse[0],!1,t.isPreviousAddress,t.auditAddressAcceleratorId),t.trackEvent=0!==t.monikerResponse[0].addressLookupMatchType,this.auditAddressHandler.auditAddress(t.monikerResponse[0],t.monikerSearchAuditAddressAcceleratorId,!0)):(this.addressStateHandler.write(t.selectedAddress,!1,t.isPreviousAddress,t.auditAddressAcceleratorId),t.trackEvent=0!==t.selectedAddress.addressLookupMatchType,this.auditAddressHandler.auditAddress(t.selectedAddress,t.auditAddressAcceleratorId,!1)),t.onMonikerSearch(t)},i.prototype.setFailureState=function(t){t.isMonikerSearchSuccess=!1},i}(e.BaseAddressSearchProcessor);e.MonikerSearchProcessor=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(i){var o=function(o){function n(e,i,n,r,a,s){var c=o.call(this,t.Enums.LightBoxEventSource.OnAddressLookup,"LightBox.LightBoxAddressLookupProcessor",e,r)||this;return c.addressService=i,c.logger=n,c.pageScroller=a,c.client=s,c.registerAddressLookupProcessors(),c.registerPostAddressLookupProcessors(),c.registerAddressProcessors(),c.registerMonikerSearchProcessors(),c.registerLayoutProcessors(),c}return __extends(n,o),n.prototype.hide=function(){this.clearLayout(),this.hideAddressFinding(),$(t.Keys.LightBoxKeys.DynamicContentSelector).empty(),$(n.lightBoxMessageSelector).show(),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("addressSearchLightBox"),this.getLightBoxEvent().unbind(),o.prototype.hide.call(this)},n.prototype.show=function(){var t=this;this.showAddressFinding();var e=setTimeout(function(){t.runProcessors(),clearTimeout(e)},1e3)},n.prototype.bindEvents=function(){var e=this;$(t.Keys.LightBoxKeys.CloseButton).on(o.prototype.buildEventName.call(this,"click"),function(){return e.hide()}),o.prototype.bindEvents.call(this)},n.prototype.unbindEvents=function(){$(t.Keys.LightBoxKeys.CloseButton).off(o.prototype.buildEventName.call(this,"click")),o.prototype.unbindEvents.call(this)},n.prototype.setupLightBox=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("addressSearchLightBox"),o.prototype.setupLightBox.call(this)},n.prototype.runProcessors=function(){var t=this.getAddressContext();this.processAddressLookupProcessors(t)},n.prototype.processIfContextHasAddressStates=function(e){e.addressStates&&e.addressStates.length>1?(this.processPostAddressLookupProcessors(e),o.prototype.show.call(this),o.prototype.initaliseLayout.call(this,!1),this.hideAddressFinding(),this.getLightBoxEvent().bind(e),this.client.isAndroidNativeBrowserVersionLessThan4_4()||$("fieldset[data-section='address']").append($(t.Keys.LightBoxKeys.LightBoxSelector)),$(n.lightBoxMessageSelector).hide(),setTimeout(function(){return $("."+n.selectorPrefix).parent().show()},0)):this.processIfContextHasNoAddressStates(e)},n.prototype.processIfContextHasNoAddressStates=function(t){this.processAddressProcessors(t),this.hideAddressFinding()},n.prototype.registerAddressLookupProcessors=function(){this.addressLookupProcessors=new Array,this.addressLookupProcessors.push(new e.AddressLookup.ReadAddressPreSearchDataProcessor),this.addressLookupProcessors.push(new e.AddressLookup.AddressSearchProcessor)},n.prototype.registerLayoutProcessors=function(){this.layoutProcessors=new Array,this.layoutProcessors.push(new i.Common.MobileIframeLayoutProcessor(n.selectorPrefix)),this.layoutProcessors.push(new i.Common.DesktopLayoutProcessor(n.selectorPrefix)),this.layoutProcessors.push(new i.Common.MobileLayoutProcessor(n.selectorPrefix))},n.prototype.registerPostAddressLookupProcessors=function(){this.postAddressLookupProcessors=new Array,this.postAddressLookupProcessors.push(new e.AddressLookup.AddressFormatProcessor),this.postAddressLookupProcessors.push(new e.AddressLookup.TownPostcodeAddressFormatProcessor),this.postAddressLookupProcessors.push(new e.AddressLookup.TownPostCodeLine1AddressFormatProcessor),this.postAddressLookupProcessors.push(new e.AddressLookup.Line1PostcodeAddressFormatProcessor),this.postAddressLookupProcessors.push(new e.AddressLookup.DynamicContentProcessor)},n.prototype.registerAddressProcessors=function(){this.addressProcessors=new Array,this.addressProcessors.push(new e.AddressLookup.EnterAddressManuallyProcessor),this.addressProcessors.push(new e.AddressLookup.ShowAddressPostSearchProcessor)},n.prototype.registerMonikerSearchProcessors=function(){this.monikerSearchProcessors=new Array,this.monikerSearchProcessors.push(new e.AddressLookup.ReadMonikerPreSearchDataProcessor),this.monikerSearchProcessors.push(new e.AddressLookup.MonikerSearchProcessor)},n.prototype.clearLayout=function(){this.layoutProcessors.forEach(function(t){return t.clear(null)})},n.prototype.showAddressFinding=function(){var e=this,i=$(window).scrollTop();this.disableFormElements(),$(t.Keys.AddressKeys.getFindAddressButton(this.isPreviousAddress())).hide(),$(t.Keys.AddressKeys.getPreAddressSearch(this.isPreviousAddress())+" "+t.Keys.AddressKeys.Addressfinding).show(),"true"===$("body").attr("data-is-desktop")&&/(Edge)/i.test(this.useragent.userAgent())&&setTimeout(function(){return e.pageScroller.scrollToPoint(i)},0)},n.prototype.hideAddressFinding=function(){this.enableFormElements(),$(t.Keys.AddressKeys.getFindAddressButton(this.isPreviousAddress())).show(),$(t.Keys.AddressKeys.getPreAddressSearch(this.isPreviousAddress())+" "+t.Keys.AddressKeys.Addressfinding).hide()},n.prototype.disableFormElements=function(){for(var t=$("input:not([disabled],[type='hidden']), select:not([disabled],[type='hidden'])"),e=0;e<t.length;e++)t[e].setAttribute("disabled","disabled"),t[e].setAttribute("data-disabled-value","temp")},n.prototype.enableFormElements=function(){for(var t=$("input[data-disabled-value='temp'], select[data-disabled-value='temp']"),e=0;e<t.length;e++)t[e].removeAttribute("disabled"),t[e].removeAttribute("data-disabled-value")},n.prototype.isPreviousAddress=function(){return $(t.Keys.AddressKeys.TimeLivedAreaSelector).is(":visible")},n.prototype.getAddressContext=function(){var t=this;return{addressPreSearchState:null,addressStates:null,formattedAddresses:[],addressTemplates:[],isPreviousAddress:this.isPreviousAddress(),isAddressSearchSuccess:!1,enterAddressManually:!1,trackEvent:!1,selectedCountry:Number($("#Country").find(":selected").val()),selectedAddress:null,monikerSearchData:null,monikerResponse:null,isMonikerSearchSuccess:!1,auditAddressAcceleratorId:0,monikerSearchAuditAddressAcceleratorId:0,onAddressClick:function(e){t.onAddressSelect(e)},onCancelClick:function(e){t.onAddressCancel(e)},onCloseClick:function(e){t.onAddressCancel(e)},onSuccess:function(e){t.processIfContextHasAddressStates(e)},onFailure:function(e){t.processIfContextHasNoAddressStates(e)},onMonikerSearch:function(e){t.processAddressSelectOrCancel(e)}}},n.prototype.processAddressLookupProcessors=function(t){this.addressLookupProcessors.forEach(function(e){return e.process(t)})},n.prototype.processPostAddressLookupProcessors=function(t){t.addressStates&&t.addressStates.length>0&&this.postAddressLookupProcessors.forEach(function(e){return e.process(t)})},n.prototype.processAddressProcessors=function(t){var e=t.addressStates;(!e||0===e.length||e&&1===e.length||t.selectedAddress||t.enterAddressManually)&&this.addressProcessors.forEach(function(e){return e.process(t)})},n.prototype.processMonikerSearchProcessors=function(t){this.monikerSearchProcessors.forEach(function(e){return e.process(t)})},n.prototype.onAddressSelect=function(e){var i=e.selectedAddress;i.countryAddressAcceleratorLevelId===t.Enums.CountryAddressAcceleratorLevel.QAS&&null!==i.addressSearchMonikerId&&""!==i.addressSearchMonikerId?this.processMonikerSearchProcessors(e):this.processAddressSelectOrCancel(e)},n.prototype.onAddressCancel=function(t){t.enterAddressManually=!0,this.processAddressSelectOrCancel(t),this.onCancelSetFocusToFirstPostSearchControl()},n.prototype.processAddressSelectOrCancel=function(e){this.processAddressProcessors(e),this.hide(),this.addressService.IsSelectedCountryValidForPreviousAddress()&&$("#"+t.Keys.AddressKeys.HidePreviousAddress).focus(),this.useragent.isIe9AndBelow()&&this.hide()},n.prototype.getLightBoxEvent=function(){return this.lightBoxEvent||(this.lightBoxEvent=t.OpenAccount.getEvent(t.Enums.EventName.AddressLookupLightBoxClickEvent)),this.lightBoxEvent},n.prototype.onCancelSetFocusToFirstPostSearchControl=function(){var t=$("#ShowPreviousAddress:visible").length&&"selected"===$("#ShowPreviousAddress").attr("selected")?$("#PreviousAddressLine1"):$("#CurrentAddressLine1");if($("body")[0].hasAttribute("data-is-mobile"))var e=setTimeout(function(){t.focus(),clearTimeout(e)});else t.focus()},n.lightBoxSelector=".searchMatchesLightBox",n.lightBoxMessageSelector="div.searchMatchesLightBox > .lightBoxBody > p",n.selectorPrefix="searchMatchesLightBox",n}(i.BaseModalLightBoxProcessor);i.LightBoxAddressLookupProcessor=o}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o){return e.call(this,t.Enums.LightBoxEventSource.ItalyNoRetry,"LightBox.LightBoxItalyNoRetryProcessor",i,o,".italyNoRetryLightBox p")||this}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(t.Keys.LightBoxKeys.UnableToLoginSelector).hide(),$(t.Keys.LightBoxKeys.SubmitSelector).show()},i.prototype.show=function(i){e.prototype.show.call(this),i&&this.setupLightBoxData(i),$(t.Keys.LightBoxKeys.UnableToLoginSelector).show(),$(t.Keys.LightBoxKeys.SubmitButtonSelector).hide()},i.prototype.setupLightBoxData=function(e){$(t.Keys.LightBoxKeys.Header).text(e.verificationErrorResponse.responseDescription)},i}(e.ReturnToHomePageLightBoxProcessor);e.LightBoxItalyNoRetryProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.hide=function(){$(e.updatingDetailsSelector).hide(),$(t.Services.LightBoxService.greyOutClassName).hide()},e.prototype.show=function(){$(e.updatingDetailsSelector).show(),$(t.Services.LightBoxService.greyOutClassName).show()},e.prototype.setupLightBox=function(t){},e.prototype.supports=function(e){return e===t.Enums.LightBoxEventSource.UpdatingDetails},e.updatingDetailsSelector="div[data-control='updating-details']",e}();e.LightBoxSpanishUpdatingDetailsProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o){var n=e.call(this,t.Enums.LightBoxEventSource.OnUpdatingDetailsError,"LightBox.LightBoxSpanishUpdateErrorProcessor",o)||this;return n.pageScroller=i,n}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this),$(i.submitSelector).removeClass(i.greyOutClass),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("submitErrorsLightBoxContainer")},i.prototype.show=function(){var t=this;e.prototype.showWithPostSetupCallback.call(this,this.setPosition),this.pageScroller.scrollToPoint(document.body.scrollHeight),$(i.submitSelector).addClass(i.greyOutClass),$(window).on(e.prototype.buildEventName.call(this,"resize"),function(){return t.setPosition()})},i.prototype.bindEvents=function(){var t=this;$(i.clickSelector).on(e.prototype.buildEventName.call(this,"click"),function(){return t.hide()})},i.prototype.unbindEvents=function(){$(i.clickSelector).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.setupLightBox=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("submitErrorsLightBoxContainer"),e.prototype.setupLightBox.call(this)},i.prototype.setPosition=function(){var t=parseInt($(i.updateIdentityButtonSelector).css("height")),e=parseInt($(i.verificationOutroSelector).css("height"));if(t&&e){var o=t+e+i.lightBoxArrowHeight;$(i.accountCreationErrorLightBoxSelector).css("bottom",o)}},i.greyOutClass="buttonGreyOut",i.clickSelector=".greyOut, .accountCreationErrorLightBox p",i.submitSelector="#UpdateSpanishIdentity",i.verificationOutroSelector="fieldset[data-section='update-identity'] div.verificationOutro",i.updateIdentityButtonSelector="fieldset[data-section='update-identity'] div[data-control='button']",i.accountCreationErrorLightBoxSelector=".accountCreationErrorLightBox",i.lightBoxArrowHeight=13,i}(e.BaseLightBoxProcessor);e.LightBoxSpanishUpdateErrorProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.NonResidentAlien,"LightBox.NonResidentAlienLightBoxProcessor",i)||this}return __extends(i,e),i}(e.BaseLightBoxLinksProcessor);e.NonResidentAlienLightBoxProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.ProhibitedPlayer2,"LightBox.ProhibitedPlayer2LightBoxProcessor",i)||this}return __extends(i,e),i}(e.BaseLightBoxLinksProcessor);e.ProhibitedPlayer2LightBoxProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i){return e.call(this,t.Enums.LightBoxEventSource.RussiaTax,"LightBox.RussiaTaxLightBoxProcessor",i)||this}return __extends(i,e),i}(e.BaseLightBoxLinksProcessor);e.RussiaTaxLightBoxProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){this.showHybridCss="true"===$("body").data("show-hybrid-css").toLowerCase(),this.processors=new Array,this.registerProcessors()}return e.prototype.show=function(t,e){this.processors.forEach(function(i){i.supports(t)&&(e?i.show(e):i.show())})},e.prototype.hide=function(t){this.processors.forEach(function(e){e.supports(t)&&e.hide()})},e.prototype.registerProcessors=function(){var e=t.Core.Ioc.OpenAccountContainer.container,i=e.resolve("ILightBoxContentService"),o=e.resolve("IFrameService"),n=e.resolve("IPageScroller"),r=e.resolve("ILogger"),a=e.resolve("ICountryChangeService"),s=e.resolve("IAddressService"),c=e.resolve("IUserAgent"),l=e.resolve("ICommon"),u=e.resolve("ISessionSaveFormService"),d=e.resolve("IPageWaiting"),p=e.resolve("IClient");this.processors.push(new t.Processors.LightBox.AgeVerificationLightBoxLinksProcessor(i)),this.processors.push(new t.Processors.LightBox.KnowYourCustomerLightBoxLinksProcessor(i)),this.processors.push(new t.Processors.LightBox.BeneficialOwnershipLightBoxLinksProcessor(i)),this.processors.push(new t.Processors.LightBox.FundsProtectionLightBoxLinksProcessor(i)),this.processors.push(new t.Processors.LightBox.LightBoxSubmitErrorsProcessor(n,i)),this.processors.push(new t.Processors.LightBox.LightBoxCreatingAccountProcessor),this.processors.push(new t.Processors.LightBox.LightBoxVerifyingDetailsProcessor(i)),this.processors.push(new t.Processors.LightBox.LightBoxAccountCreatedProcessor),this.processors.push(new t.Processors.LightBox.LightBoxAccountCreationErrorProcessor(i)),this.processors.push(new t.Processors.LightBox.LightBoxCountryChangeProcessor(a,c,l,u,i,d,p)),this.processors.push(new t.Processors.LightBox.LightBoxDuplicateDetailsProcessor(i,o)),this.processors.push(new t.Processors.LightBox.LightBoxDeceasedDetailsProcessor(i,o)),this.processors.push(new t.Processors.LightBox.LightBoxFailedPasswordStorageProcessor(i,o)),
this.processors.push(new t.Processors.LightBox.LightBoxUnderageDetailsProcessor(i,o)),this.processors.push(new t.Processors.LightBox.LightBoxAddressLookupProcessor(i,s,r,c,n,p)),this.processors.push(new t.Processors.LightBox.LightBoxSelectOccupationProcessor(i,c,n,p,o)),this.processors.push(new t.Processors.LightBox.LightBoxItalyNoRetryProcessor(i,o)),this.processors.push(new t.Processors.LightBox.LightBoxSpanishUpdatingDetailsProcessor),this.processors.push(new t.Processors.LightBox.LightBoxSpanishUpdateErrorProcessor(n,i)),this.processors.push(new t.Processors.LightBox.LightBoxAccountCreationUSProcessor(c,u,this,i,n,p)),this.processors.push(new t.Processors.LightBox.NonResidentAlienLightBoxProcessor(i)),this.processors.push(new t.Processors.LightBox.ProhibitedPlayer2LightBoxProcessor(i)),this.processors.push(new t.Processors.LightBox.RussiaTaxLightBoxProcessor(i))},e.greyOutClassName=".greyOut",e}();e.LightBoxService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.common=e.resolve("ICommon")}return e.prototype.isValidDate=function(t){var e=this.getDateValue(t).split("-"),i=this.allDatePartsAreNumber(e);if(i){var o=parseInt(e[0]),n=parseInt(e[1]),r=parseInt(e[2]);if(i=4===o.toString().length,i&&(i=n>=0&&n<=12&&r>-1)){var a=new Date(o,n,0).getDate();i=r<=a}}return i},e.prototype.getDateValue=function(t){var e="",i=t.attr("id");if(!t.is("input")){var o=this.common.getContainer(t,"class","date-fallback");i=o.attr("for")}var n=$("div[data-section='date'] div[for='"+i+"']"),r=Number(n.find("#"+i+"Day").find(":selected").val()),a=Number(n.find("#"+i+"Month").find(":selected").val()),s=Number(n.find("#"+i+"Year").find(":selected").val()),c=$("#"+i).val(),l=$("input#"+i).parent().is(":visible");if(!l&&r>-1&&a>-1&&s>-1&&this.dateIsDifferentToPrepopulatedDefaults(i,s,a,r))e=this.createDate(s,a,r);else if(c&&c.length&&c.length>0){var u=new Date(c);if(isNaN(u.valueOf())){var d=c.replace(/-/g,"/");u=new Date(d)}e=this.isValidDateObject(u)?u.toISOString():""}return e},e.prototype.getDate=function(t){var e=this.getDateValue(t);return Date.fromISOString(e)},e.prototype.allDatePartsAreNumber=function(t){var e=parseInt(t[2]),i=parseInt(t[1]),o=parseInt(t[0]);return!(isNaN(e)&&isNaN(i)&&isNaN(o))},e.prototype.userNotSelectedInitialDate=function(){var t=$(".date-fallback"),e=t.data("set-day")&&t.data("set-month")&&t.data("set-year");return!e&&!$(".date-native").is(":visible")},e.prototype.dateIsDifferentToPrepopulatedDefaults=function(t,e,i,o){var n=!0,r=$("div[data-section='date'] div[for='"+t+"']"),a=r.find("#"+t+"Day").data("selected-value"),s=r.find("#"+t+"Month").data("selected-value"),c=r.find("#"+t+"Year").data("selected-value");return $.isNumeric(c)&&Number(c)===e&&$.isNumeric(s)&&Number(s)===i&&$.isNumeric(a)&&Number(a)===o&&(n=!1),n},e.prototype.createDate=function(t,e,i){var o=new Date(t,e,i),n=o.getDate(),r=o.getMonth(),a=o.getFullYear();return n===i&&r===e&&a===t?t.toString()+"-"+this.leftPad(e+1)+"-"+this.leftPad(i)+"T00:00:00.000Z":""},e.prototype.leftPad=function(t){var e="0"+t;return e.substr(e.length-2)},e.prototype.isValidDateObject=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},e}();e.DateService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.testPassword=function(e,i){this.applySelected(e,t.LowerCaseTest.test(i),"[data-lowercase]"),this.applySelected(e,t.UpperCaseTest.test(i),"[data-uppercase]"),this.applySelected(e,t.NumberTest.test(i),"[data-numbers]"),this.applySelected(e,t.SymbolsTest.test(i),"[data-symbols]")},t.prototype.applySelected=function(t,e,i){var o=t.find(i);e?o.removeClass("selected").addClass("selected"):o.removeClass("selected")},t.LowerCaseTest=/[a-z]/,t.UpperCaseTest=/[A-Z]/,t.NumberTest=/[0-9]/,t.SymbolsTest=/[_\u0021-\u002F\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007E]/,t}();t.PasswordInformationService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.jsonParser=e.resolve("IJsonParser"),this.processors=new Array,this.processors.push(new t.Processors.Platform.CloseButtonProcessor),this.processors.push(new t.Processors.Platform.MembersHostedInIFrameProcessor),this.processors.push(new t.Processors.Platform.CasinoNativeAttributeProcessor),this.processors.push(new t.Processors.Platform.LiveDealerAttributeProcessor),this.processors.push(new t.Processors.Platform.ShowDateDropdownProcessor),this.processors.push(new t.Processors.Platform.BingoIosNativeAttributeProcessor),this.processors.push(new t.Processors.Platform.GamesAndroidNativeAttributeProcessor),this.processors.push(new t.Processors.Platform.MembersHostedInCardProcessor)}return e.prototype.readSupportedPlatforms=function(){var t=$("#ClientSidePlatformFeatures"),e=this.jsonParser.parse(t.val());e.isSuccess()&&(this.features=e.result(),this.performPlatformTasks())},e.prototype.performPlatformTasks=function(){var t=this;this.processors.forEach(function(e){e.isSupported(t.features)&&e.performPlatformTask()})},e}();e.PlatformService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.isValidDni=function(t){return this.testIfSet(t.data("val-identitynumber-dni"),t.val())},t.prototype.isValidNie=function(t){return this.testIfSet(t.data("val-identitynumber-nie"),t.val())},t.prototype.testIfSet=function(t,e){if(t&&t.length){var i=new RegExp(t);return i.test(e)}return!1},t}();t.DniNieService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.scrollToPoint=function(t){window.scrollTo(0,t)},t.prototype.scrollToElement=function(t){t.scrollIntoView()},t}();t.DefaultPageScroller=e}(e=t.Scroller||(t.Scroller={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.frameService=e.resolve("IFrameService")}return e.prototype.scrollToPoint=function(t){this.frameService.postPageScroll(t)},e.prototype.scrollToElement=function(t){var e=$(t),i=e.offset().top-e.outerHeight();this.scrollToPoint(i)},e}();e.FramePageScroller=i}(i=e.Scroller||(e.Scroller={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){this.months=["A","B","C","D","E","H","L","M","P","R","S","T"]}return t.prototype.calculateCodiceFiscale=function(t){var e=this.generateDay(t.day,t.isFemale),i=isNaN(parseInt(t.month))?"":this.months[parseInt(t.month)],o=t.year.substring(2,4),n=this.generateSurnamePart(t.surname.toUpperCase()),r=this.generateFirstNamePart(t.firstName.toUpperCase()),a=n+r+o+i+e+t.placeOfBirthCode,s=this.generateCheckDigit(a);return a+s},t.prototype.generateFirstNamePart=function(t){var e=this.getConstonants(t);return 3===e.length?e:e.length>3?e.charAt(0)+e.substring(2,4):(e+=this.getVowels(t),e.length>=3?e.substring(0,3):(e+"XXX").substring(0,3))},t.prototype.generateSurnamePart=function(t){var e=this.getConstonants(t);return e.length>=3?e.substring(0,3):(e+=this.getVowels(t),e.length>=3?e.substring(0,3):(e+"XXX").substring(0,3))},t.prototype.generateCheckDigit=function(t){for(var e=0,i=[1,0,5,7,9,13,15,17,19,21,2,4,18,20,11,3,6,8,12,14,16,10,22,25,24,23],o=0;o<15;o++){var n=parseInt(t.charAt(o));e+=o%2?isNaN(n)?t.charCodeAt(o)-65:n:isNaN(n)?i[t.charCodeAt(o)-65]:i[n]}return String.fromCharCode(e%26+65)},t.prototype.getConstonants=function(t){return t.replace(/[^BCDFGHJKLMNPQRSTVWXYZ]/g,"")},t.prototype.getVowels=function(t){return t.replace(/[^AEIOU]/g,"")},t.prototype.generateDay=function(t,e){var i=e?parseInt(t)+40:parseInt(t);return(i<10?"0":"")+i.toString()},t}();t.CodiceFiscaleService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.httpService=e.resolve("IHttpService"),this.logger=e.resolve("ILogger"),this.url=$("#hdnAddressLookupUrl").val()}return e.prototype.getMatches=function(t,e,i){this.httpService.post(this.url,t,function(t){return e(t)},function(t){return i(t)})},e.prototype.getMonikerMatch=function(t,e,i){this.httpService.post(this.url,t,function(t){return e(t)},function(t){return i(t)})},e.prototype.IsSelectedCountryValidForPreviousAddress=function(){var e=Number($("#Country").find(":selected").val());return e===t.Enums.CountryId.Bulgaria},e}();e.AddressService=i}(i=e.AddressLookup||(e.AddressLookup={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){this.buildingNumberSearchSelector="BuildingNumberSearch",this.buildingFloorSearchSelector="BuildingFloorSearch",this.unitNumberSearchSelector="UnitNumberSearch",this.streetNameSearchSelector="StreetNameSearch",this.citySearchSelector="CitySearch",this.postcodeSearchSelector="PostcodeSearch",this.addressLine1Selector="AddressLine1",this.addressLine2Selector="AddressLine2",this.addressLine3Selector="AddressLine3",this.townCitySelector="TownCity",this.stateRegionSelector="StateRegion",this.statesSelector="States",this.postcodeSelector="Postcode",this.hdnPostalValidationStatus="#hdnCurrentPostalAddressStatus",this.hdnMatchType="#hdnCurrentMatchTypeId";var e=t.Core.Ioc.OpenAccountContainer.container;this.validationService=e.resolve("IValidationService")}return e.prototype.read=function(t,e){return t?this.readPreSearch(e):this.readPostSearch(e)},e.prototype.write=function(t,e,i,o){e?this.writePreSearch(t,i):this.writePostSearch(t,i,o)},e.prototype.readPreSearch=function(t){var e=this.getSelectorPrefix(!0,t);return{buildingNumber:this.getValueIfExists($(e+this.buildingNumberSearchSelector)),buildingFloor:this.getValueIfExists($(e+this.buildingFloorSearchSelector)),unitNumber:this.getValueIfExists($(e+this.unitNumberSearchSelector)),streetName:this.getValueIfExists($(e+this.streetNameSearchSelector)),city:this.getValueIfExists($(e+this.citySearchSelector)),postcode:$(e+this.postcodeSearchSelector).val()}},e.prototype.readPostSearch=function(t){var e=this.getSelectorPrefix(!0,t);return{addressLine1:$(e+this.addressLine1Selector).val(),addressLine2:$(e+this.addressLine2Selector).val(),addressLine3:$(e+this.addressLine3Selector).val(),townCity:$(e+this.townCitySelector).val(),county:$(e+this.stateRegionSelector).val(),stateRegion:$(e+this.stateRegionSelector).val(),state:$(e+this.statesSelector).val(),postcode:$(e+this.postcodeSelector).val(),addressSearchMonikerId:"",countryAddressAcceleratorLevelId:null,addressLookupMatchType:$(this.hdnMatchType).val(),postalValidationStatus:$(this.hdnPostalValidationStatus).val()}},e.prototype.writePreSearch=function(t,e){var i=this.getSelectorPrefix(!1,e);this.changeValue(i+this.buildingNumberSearchSelector,t.buildingNumber,!1),this.changeValue(i+this.buildingFloorSearchSelector,t.buildingFloor,!1),this.changeValue(i+this.unitNumberSearchSelector,t.unitNumber,!1),this.changeValue(i+this.streetNameSearchSelector,t.streetName,!1),this.changeValue(i+this.citySearchSelector,t.city,!1),this.changeValue(i+this.postcodeSelector,t.postcode,!1)},e.prototype.writePostSearch=function(t,e,i){var o=this.getSelectorPrefix(!1,e),n=t.county&&t.county.length?t.county:t.stateRegion;this.changeValue(o+this.addressLine1Selector,t.addressLine1,!1),this.changeValue(o+this.addressLine2Selector,t.addressLine2,!1),this.changeValue(o+this.addressLine3Selector,t.addressLine3,!1),this.changeValue(o+this.townCitySelector,t.townCity,!1),this.changeValue(o+this.postcodeSelector,t.postcode,!1),this.changeValue(o+this.statesSelector,t.state,!1),this.changeValue(o+this.stateRegionSelector,n,!1),$(o+this.statesSelector).change();var r=$(o+this.addressLine1Selector),a=this.validationService.validate(r);a.isValid||this.validationService.showValidationMessage(r,a),e||this.writeAaAddress(t,n,i)},e.prototype.writeAaAddress=function(t,e,i){this.changeValue(this.hdnPostalValidationStatus,t.postalValidationStatus,!0),this.changeValue(this.hdnMatchType,t.addressLookupMatchType,!0)},e.prototype.getSelectorPrefix=function(e,i){return(e?t.Keys.AddressKeys.getPreAddressSearch(i):t.Keys.AddressKeys.getPostAddressSearch(i))+" #"+(i?"Previous":"Current")},e.prototype.changeValue=function(t,e,i){if(0!==e||i){var o=$(t);o.length&&o.val(e)}},e.prototype.getValueIfExists=function(t){return t.length?t.val():""},e}();e.AddressStateHandler=i}(e=t.StateHandlers||(t.StateHandlers={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.isApplicableToCountry=function(t){var e=this.applicableCountryCodes();return e.indexOf(t)>=0},t.prototype.containsMultipleAlphaCharacters=function(t){var e=new RegExp("^.*[a-zA-Z\\u00c0-\\u01ff].*[a-zA-Z\\u00c0-\\u01ff].*$","g");return e.test(t)},t.prototype.isNumeric=function(t){var e=new RegExp("^\\d*$");return e.test(t)},t}();t.BaseAddressStrategy=e}(e=t.Strategies||(t.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.Australia]},i.prototype.generate=function(t){var e="";if(0!==t.buildingNumber.length&&(e=0===t.streetName.length?t.buildingNumber:t.buildingNumber+" "+t.streetName),0!==t.unitNumber.length){var i=t.unitNumber;i=i.replace(/flat/i,"").trim(),i=i.replace(/unit/i,"").trim(),i=i.replace(/apt/i,"").trim(),e=0===e.length?e:"U "+i+" "+e}return{addressLine1:e,addressLine2:"",addressLine3:"",townCity:"",county:"",stateRegion:"",state:0,postcode:t.postcode,addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15}},i}(e.BaseAddressStrategy);e.AustraliaAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.Canada]},i.prototype.generate=function(t){var e="";return 0!==t.unitNumber.length&&(e=this.isNumeric(t.unitNumber)?0===t.buildingNumber.length?t.unitNumber:t.buildingNumber+" "+t.unitNumber:0===t.buildingNumber.length?t.unitNumber:t.unitNumber+" - "+t.buildingNumber),0===e.length&&0!==t.buildingNumber.length&&(e=t.buildingNumber),0!==e.length&&0!==t.streetName.length&&(e=e+" "+t.streetName),{addressLine1:e,addressLine2:"",addressLine3:"",townCity:"",county:"",stateRegion:"",state:0,postcode:t.postcode,addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15}},i}(e.BaseAddressStrategy);e.CanadaAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.Denmark,t.Enums.CountryId.Greenland,t.Enums.CountryId.Finland,t.Enums.CountryId.Switzerland,t.Enums.CountryId.Liechtenstein]},i.prototype.generate=function(t){var e="";return 0!==t.unitNumber.length&&(e=0===t.buildingFloor.length?t.unitNumber:t.buildingFloor+" "+t.unitNumber),0!==t.buildingNumber.length&&(e=t.buildingNumber+" "+e),0!==t.streetName.length&&(e=t.streetName+" "+e),{addressLine1:e,addressLine2:"",addressLine3:"",townCity:"",county:"",stateRegion:"",state:0,postcode:t.postcode,addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15}},i}(e.BaseAddressStrategy);e.DenmarkAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.France,t.Enums.CountryId.Guadeloupe,t.Enums.CountryId.Martinique,t.Enums.CountryId.Reunion,t.Enums.CountryId.FrenchGuyana,t.Enums.CountryId.Mayotte,t.Enums.CountryId.WallisAndFutunaIslands,t.Enums.CountryId.FrenchPolynesia,t.Enums.CountryId.NewCaledonia,t.Enums.CountryId.Malaysia,t.Enums.CountryId.Vietnam,t.Enums.CountryId.Thailand,t.Enums.CountryId.Japan]},i.prototype.generate=function(t){var e=0===t.streetName.length?t.buildingNumber:t.buildingNumber+" "+t.streetName;return{addressLine1:e,addressLine2:"",addressLine3:"",townCity:"",county:"",stateRegion:"",state:0,postcode:t.postcode,addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15}},i}(e.BaseAddressStrategy);e.FranceAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.Ireland]},i.prototype.generate=function(t){var e={addressLine1:"",addressLine2:"",addressLine3:"",townCity:t.city,county:"",stateRegion:"",state:0,postcode:"",addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15};return 0!==t.buildingNumber.length?this.containsMultipleAlphaCharacters(t.buildingNumber)?(e.addressLine1=t.buildingNumber,e.addressLine2=t.streetName):e.addressLine1=0===t.streetName.length?t.buildingNumber:t.buildingNumber+" "+t.streetName:e.addressLine1=t.streetName,e},i}(e.BaseAddressStrategy);e.IrelandAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.NewZealand]},i.prototype.generate=function(t){var e={addressLine1:"",addressLine2:"",addressLine3:"",townCity:"",county:"",stateRegion:"",state:0,postcode:t.postcode,addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15},i="",o="";return 0!==t.buildingNumber.length&&(i=0===t.streetName.length?t.buildingNumber:t.buildingNumber+" "+t.streetName),0!==t.unitNumber.length?(t.unitNumber.toLowerCase().indexOf("unit")===-1&&t.unitNumber.toLowerCase().indexOf("flat")===-1&&(o="FLAT "+t.unitNumber),e.addressLine1=o,e.addressLine2=i):e.addressLine1=i,e},i}(e.BaseAddressStrategy);e.NewZealandAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.Australia,t.Enums.CountryId.Canada,t.Enums.CountryId.Denmark,t.Enums.CountryId.Greenland,t.Enums.CountryId.Finland,t.Enums.CountryId.Switzerland,t.Enums.CountryId.Liechtenstein,t.Enums.CountryId.France,t.Enums.CountryId.Guadeloupe,t.Enums.CountryId.Martinique,t.Enums.CountryId.Reunion,t.Enums.CountryId.FrenchGuyana,t.Enums.CountryId.Mayotte,t.Enums.CountryId.WallisAndFutunaIslands,t.Enums.CountryId.FrenchPolynesia,t.Enums.CountryId.NewCaledonia,t.Enums.CountryId.Malaysia,t.Enums.CountryId.Vietnam,t.Enums.CountryId.Thailand,t.Enums.CountryId.Japan,t.Enums.CountryId.Ireland,t.Enums.CountryId.NewZealand,t.Enums.CountryId.UnitedKingdom,t.Enums.CountryId.UnitedStatesOfAmerica]},i.prototype.isApplicableToCountry=function(t){var e=this.applicableCountryCodes();return e.indexOf(t)===-1},i.prototype.generate=function(t){var e="";return 0!==t.unitNumber.length&&(e=0===t.buildingNumber.length?t.unitNumber:t.buildingNumber+" "+t.unitNumber),0===e.length&&0!==t.buildingNumber.length&&(e=t.buildingNumber),0!==t.streetName.length&&(e=t.streetName+" "+e),{addressLine1:e,addressLine2:"",addressLine3:"",townCity:"",county:"",stateRegion:"",state:0,postcode:t.postcode,addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15}},i}(e.BaseAddressStrategy);e.RestOfWorldAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.UnitedKingdom]},i.prototype.generate=function(t){var e={addressLine1:"",addressLine2:"",addressLine3:"",townCity:"",county:"",stateRegion:"",state:0,postcode:t.postcode,addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15};return 0!==t.unitNumber.length?(e.addressLine1="FLAT "+t.unitNumber,0!==t.buildingNumber.length?this.containsMultipleAlphaCharacters(t.buildingNumber)?(e.addressLine2=t.buildingNumber,e.addressLine3=t.streetName):e.addressLine2=0===t.streetName.length?t.buildingNumber:t.buildingNumber+" "+t.streetName:e.addressLine2=t.streetName):0!==t.buildingNumber.length?this.containsMultipleAlphaCharacters(t.buildingNumber)?(e.addressLine1=t.buildingNumber,e.addressLine2=t.streetName):e.addressLine1=0===t.streetName.length?t.buildingNumber:t.buildingNumber+" "+t.streetName:e.addressLine1=t.streetName,e},i}(e.BaseAddressStrategy);e.UKAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(e){var i=function(){function e(){this.suggestionStrategies=new Array,this.suggestionStrategies.push(new t.Strategies.AustraliaAddressStrategy),this.suggestionStrategies.push(new t.Strategies.CanadaAddressStrategy),this.suggestionStrategies.push(new t.Strategies.DenmarkAddressStrategy),this.suggestionStrategies.push(new t.Strategies.FranceAddressStrategy),this.suggestionStrategies.push(new t.Strategies.IrelandAddressStrategy),this.suggestionStrategies.push(new t.Strategies.NewZealandAddressStrategy),this.suggestionStrategies.push(new t.Strategies.RestOfWorldAddressStrategy),this.suggestionStrategies.push(new t.Strategies.UKAddressStrategy),this.suggestionStrategies.push(new t.Strategies.USAAddressStrategy)}return e.prototype.getSuggestion=function(t,e){var i;return this.suggestionStrategies.forEach(function(t){!i&&t.isApplicableToCountry(e)&&(i=t)}),i?i.generate(t):{addressLine1:"",addressLine2:"",addressLine3:"",townCity:"",county:"",stateRegion:"",state:0,postcode:"",addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:17}},e}();e.AddressSuggestionFactory=i}(e=t.AddressLookup||(t.AddressLookup={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.jsonParser=e.resolve("IJsonParser")}return e.prototype.getLightBoxContent=function(e){this.getAllLightBoxContent();for(var i=0;i<this.lightBoxContent.length;i++){var o=this.lightBoxContent[i];if(o.lightBoxSource===t.Enums.LightBoxEventSource[e])return o}return null},e.prototype.getAllLightBoxContent=function(){if(!this.lightBoxContent){var t=this.jsonParser.parse($("#lightBoxContent").val());t.isSuccess()&&(this.lightBoxContent=t.result())}},e}();e.LightBoxContentService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.postMessenger=e.resolve("IPostMessageService"),this.logger=e.resolve("ILogger")}return e.prototype.isInHostedMode=function(){return top!==self&&this.canPlatformBeHosted()},e.prototype.postIframeLoaded=function(){this.postMessage(this.createFrameMessage(t.Frame.Messenger.FrameMessages.IframeLoaded))},e.prototype.postHideHeader=function(){this.postMessage(this.createFrameMessage(t.Frame.Messenger.FrameMessages.HideHeader))},e.prototype.postHideFooterOverlay=function(){this.postMessage(this.createFrameMessage(t.Frame.Messenger.FrameMessages.HideFooterOverlay))},e.prototype.postInactivityReset=function(){this.postMessage(this.createFrameMessage(t.Frame.Messenger.FrameMessages.InactivityReset))},e.prototype.postNavigateHome=function(){this.postMessage(this.createFrameMessage(t.Frame.Messenger.FrameMessages.NavHome))},e.prototype.postIframeComplete=function(){this.postMessage(this.createFrameMessage(t.Frame.Messenger.FrameMessages.IFrameComplete))},e.prototype.postIframeHeight=function(e){var i={message:t.Frame.Messenger.FrameMessages.IframeHeight,height:e};this.postMessage(i)},e.prototype.postSessionUpdated=function(){var e={message:t.Frame.Messenger.FrameMessages.SessionUpdated};this.postMessage(e)},e.prototype.postPageScroll=function(e){var i={message:t.Frame.Messenger.FrameMessages.PageScroll,left:"0",top:e.toString()};this.postMessage(i)},e.prototype.postRedirectViaFrame=function(e){var i={message:t.Frame.Messenger.FrameMessages.NavDomain,url:e};this.postMessage(i)},e.prototype.createFrameMessage=function(t){var e={message:t};return e},e.prototype.postMessage=function(t){this.isInHostedMode()&&(this.postMessenger.sendMessage(t),this.logMessage(JSON.stringify(t)))},e.prototype.logMessage=function(t){},e.prototype.canPlatformBeHosted=function(){return"true"===$("body").attr("data-can-be-hosted")},e}();e.FrameService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.getHostname=function(){return window.location.hostname},t.prototype.getUrl=function(){return window.location.href},t.prototype.insertParameter=function(t,e,i){var o=t.split("?"),n="";if(o.length>1)for(var r=o[1].split("&"),a=0;a<r.length;a++){var s=r[a].split("=");if(s[0]!==e){""===n?n="?":n+="&";var c=r[a].replace(s[0].toString()+"=","").toString();n+=s[0]+"="+c}}return""===n?n="?":n+="&",n+=e+"="+i,o[0]+n},t.prototype.getParameter=function(t){for(var e,i=decodeURIComponent(window.location.search.substring(1)),o=i.split("&"),n=0;n<o.length;n++)if(e=o[n].split("="),e[0].toLowerCase()===t.toLowerCase()){var r=o[n].replace(e[0].toString()+"=","").toString();return void 0===r?"":r}return""},t}();t.UrlService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container,i=e.resolve("IJsonParser");this.regulatoryDomains=i.parse($("#regulatoryDomains").val()).result()}return e.prototype.getRegulatoryDomainForUrl=function(t){var e=this.getHostnameFromUrl(t),i=this.findRegulatoryDomainForHost(e,!1);return i},e.prototype.updateDomainForCountry=function(t,e){var i=t,o=this.getHostnameFromUrl(t),n=this.findRegulatoryDomainForHost(o,!0),r=this.findRegulatoryDomainForCountry(e,!1);if(r||(r=this.getDefaultRegulatoryDomain()),n&&r){var a=this.replaceDomain(o,n,r);i=i.replace(o,a)}return i},e.prototype.getHostnameFromUrl=function(t){var e=t,i=document.createElement("a");return i.href=t,e=i.hostname},e.prototype.findRegulatoryDomainForCountry=function(t,e){var i;return this.regulatoryDomains.forEach(function(o){(e||o.isActive)&&!o.isDefault&&o.countryIds.indexOf(t)>=0&&(i=o)}),i},e.prototype.findRegulatoryDomainForHost=function(t,e){var i,o,n=this;this.regulatoryDomains.forEach(function(r){(e||r.isActive)&&n.doesRegulatoryDomainMatchHost(r,t)&&(r.regulatorySubDomain?o=r:i=r)});var r=o?o:i;return r},e.prototype.getDefaultRegulatoryDomain=function(){var t;return this.regulatoryDomains.forEach(function(e){e.isDefault&&(t=e)}),t},e.prototype.replaceDomain=function(t,e,i){var o=t,n=this.getRegexToMatchWithHost(e),r=n.exec(t);if(r){var a=i.regulatorySubDomain?i.regulatorySubDomain+".":"",s=i.regulatoryTopLevelDomain;o=r[1]+a+r[3]+s}return o},e.prototype.doesRegulatoryDomainMatchHost=function(t,e){var i=this.getRegexToMatchWithHost(t),o=i.exec(e),n=null!=o;return n},e.prototype.getRegexToMatchWithHost=function(t){var e=t.regulatorySubDomain?t.regulatorySubDomain+"\\.":"",i=t.regulatoryTopLevelDomain.replace(".","\\."),o="^([^\\.]+\\.)??("+e+")([^\\.]+\\.)("+i+")$",n=new RegExp(o,"i");return n},e}();e.RegulatoryService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.getSanitisedPhoneNumber=function(){var t=$("#DialingCode").val(),e=$("#PhoneNumber").val(),i=t.replace("00","").replace("+",""),o=e.replace(new RegExp("-","g"),"");return"44"===i?"0"+o:"00"+i+" "+o},t}();t.PhoneNumberService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.httpService=e.resolve("IHttpService"),this.isTrackingEnabled=!!$("#trackingEnabled").val(),this.url=$("#hdnTrackingUrl").val()}return e.prototype.track=function(t){this.isTrackingEnabled&&this.httpService.post(this.url,t)},e}();e.RemoteTrackingService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.show=function(t){t.removeClass("hide").removeAttr("tabindex").removeAttr("disabled").show(),t.find("input, select, button").removeAttr("tabindex").removeAttr("disabled"),t.find("div[data-val-requiredcheckcomponent]").attr("tabindex","0").removeAttr("disabled"),t.find("div[data-val-requiredradiocomponent]").attr("tabindex","0").removeAttr("disabled")},t.prototype.hide=function(t){t.addClass("hide").attr("tabindex",-1).removeAttr("style").attr("disabled","disabled"),t.find("input, select, button, div[data-val-requiredcomponent]").attr("tabindex","-1").attr("disabled","disabled")},t}();t.DomDisplayService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t[t.Singleton=0]="Singleton",t[t.Transient=1]="Transient"}(e=t.LifeStyle||(t.LifeStyle={}))}(e=t.Ioc||(t.Ioc={}))}(e=t.Core||(t.Core={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.httpService=e.resolve("IHttpService")}return e.prototype.shouldSessionTerminateOnClose=function(){return 0!==$("#hdnClearSessionUrl").length},e.prototype.terminateSession=function(){this.httpService.post($("#hdnClearSessionUrl").val(),function(){},function(){},function(){},!1)},e}();e.TerminateSessionService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.httpService=e.resolve("IHttpService"),this.url=$("#hdnAddressLookupAuditUrl").val()}return e.prototype.auditAddress=function(t,e,i){
var o=this,n=$("#Country").find(":selected").val(),r={countryId:n,addressLine1:t.addressLine1,addressLine2:t.addressLine2,addressLine3:t.addressLine3,postcode:t.postcode,townCity:t.townCity,stateRegion:t.state===-1?t.county:t.stateRegion,auditAcceleratorId:e,postalValidationStatus:t.postalValidationStatus,isMonikerSearch:i};this.httpService.post(this.url,r,function(t){return o.onAddressAuditSucess(t)},function(t){return o.onAddressAuditFailure(t)},!1)},e.prototype.onAddressAuditSucess=function(t){},e.prototype.onAddressAuditFailure=function(t){},e}();e.AuditAddressHandler=i}(e=t.StateHandlers||(t.StateHandlers={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.redirectToErrorPage=function(){var t=$("#hdnErrorPageUrl").val();window.location.href=t},t}();t.ErrorHandlingService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=t.Services.AccountCreation.BaseAccountService,o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.saveForm=function(){var e="true"===$("body").attr("data-is-casino-native");if(e){var i=$("#Country").find(":selected").val(),o={Country:i,Title:$("#Title").find(":selected").val(),FirstName:$("#FirstName").val(),Surname:$("#Surname").val(),Surname2:$("#Surname2").val(),NationalityId:this.fetchNationality(),DniNieNumber:$("#DniNieNumber").val(),CprNumber:this.getCprNumber(),PersonalIdentificationCode:this.getPersonalIdentificationCode(),FullName:$("#FullName").val(),DateOfBirth:$("#DateOfBirth").val(),EmailAddress:$("#EmailAddress").val(),DialingCode:$("#DialingCode").val(),PhoneNumber:$("#PhoneNumber").val(),CurrentBuildingNumberSearch:$("#CurrentBuildingNumberSearch").val(),CurrentBuildingFloorSearch:$("#CurrentBuildingFloorSearch").val(),CurrentUnitNumberSearch:$("#CurrentUnitNumberSearch").val(),CurrentStreetNameSearch:$("#CurrentStreetNameSearch").val(),CurrentPostcodeSearch:$("#CurrentPostcodeSearch").val(),CurrentAddressLine1:$("#CurrentAddressLine1").val(),CurrentAddressLine2:$("#CurrentAddressLine2").val(),CurrentAddressLine3:$("#CurrentAddressLine3").val(),CurrentTownCity:$("#CurrentTownCity").val(),CurrentStateRegion:$("#CurrentStateRegion").val(),CurrentPostcode:$("#CurrentPostcode").val(),FiscalResidence:$("#FiscalResidence").find(":selected").val(),UserName:$("#UserName").val(),TimeZone:$("#TimeZone").find(":selected").val(),RealityChecks:$("#RealityChecks").find(":selected").val(),OddsType:$("#OddsType").find(":selected").val(),ExpectedMonthlySpend:$("#ExpectedMonthlySpend").find(":selected").val(),BonusCode:$("#BonusCode").val(),DocumentType:$("#DocumentType").find(":selected").val(),DocumentNumber:$("#DocumentNumber").val(),CountryOfIssue:$("#CountryOfIssue").val(),PlaceOfIssue:0===$("#PlaceOfIssue").length?null:$("#PlaceOfIssue").val(),IssuingAuthority:0===$("#IssuingAuthority").length?null:$("#IssuingAuthority").find(":selected").val(),DateOfIssue:t.prototype.getDateOfIssue.call(this),product:$("#product").val()};this.addAcceptanceProperties(o),t.prototype.addItalySpecificProperties.call(this,o),t.prototype.addMexicoSpecificProperties.call(this,o),i>-1&&(this.httpService.post($("#hdnSaveFormToSessionUrl").val(),{state:JSON.stringify(o)}),$("#hdnLoadFormFromSession").val("true"))}},e.prototype.loadForm=function(){var t=this,e="true"===$("body").attr("data-is-casino-native");e&&this.httpService.get($("#hdnGetFormFromSessionUrl").val(),"",function(e){return t.populateFormData(e)})},e.prototype.removeForm=function(){this.httpService.post($("#hdnRemoveFormFromSessionUrl").val(),"")},e.prototype.populateFormData=function(t){if(t&&t.length){var e=JSON.parse(t);$.each(e,function(t,e){$("#"+t).val(e)})}},e.prototype.getServiceUrl=function(){return""},e.prototype.fetchNationality=function(){return $("#Nationality:visible").length?$("#Nationality").find(":selected").val():$("#Citizenship").find(":selected").val()},e.prototype.getCprNumber=function(){var t=$("#CprNumber").val();return t?t.replace("-",""):t},e.prototype.getPersonalIdentificationCode=function(){var t=$("#PersonalIdentificationCode").val();return t},e.prototype.addAcceptanceProperties=function(e){e.AcceptedMarketing=t.prototype.isChecked.call(this,$("#MarketingAcceptance")),e.AcceptedClientContract=t.prototype.isChecked.call(this,$("#ClientContractAcceptance")),e.AcceptedPrivacyPolicyAndCookiePolicy=t.prototype.isChecked.call(this,$("#PrivacyCookieAcceptance")),e.AcceptedTermsRulesAgeKyc=t.prototype.isChecked.call(this,$("#TermsRulesAgeKycAcceptance")),e.AcceptedStandardPolicies=t.prototype.isChecked.call(this,$("#PoliciesAcceptance")),e.AcceptedDeclaration=t.prototype.isChecked.call(this,$("#DeclarationCheck")),e.AcceptedRestrictedAccess=t.prototype.isChecked.call(this,$("#RestrictedAccessCheck")),e.AcceptedResidentCheck=t.prototype.isChecked.call(this,$("#ResidentCheck")),e.AcceptedRussiaTaxCheck=t.prototype.isChecked.call(this,$("#RussiaTaxCheck"))},e}(i);e.SessionSaveFormService=o}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.nextField=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=!0),void 0===i&&(i=null),null==t&&(t=this.getFocusedField());var o=this.getAllFocusableElements(!1,i),n=o.index(t);n===-1&&(n=o.length);var r=n===o.length-1?0:n+1,a=o.eq(r);return a.focus(),a},t.prototype.previousField=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=!0),void 0===i&&(i=null),null==t&&(t=this.getFocusedField());var o=this.getAllFocusableElements(!1,i),n=o.index(t);n===-1&&(n=0);var r=0===n?o.length-1:n-1,a=o.eq(r);return a.focus(),a},t.prototype.focus=function(t){return t.focus(),t},t.prototype.getFocusedField=function(){return $(":focus")},t.prototype.getAllFocusableElements=function(t,e){void 0===t&&(t=!1);var i=$("input:not([type='hidden']), select, textarea, button, object, [tabindex]").not(e).filter(function(){return!$(this).attr("tabindex")||parseInt($(this).attr("tabindex"),10)>=0}),o=this.filterByVisible(i);return t?this.sortByTabIndex(o):o},t.prototype.sortByTabIndex=function(t){return $(t.toArray().sort(function(t,e){var i=$(t),o=$(e),n=void 0!=i.attr("tabindex")?parseInt(i.attr("tabindex")):1/0,r=void 0!=o.attr("tabindex")?parseInt(o.attr("tabindex")):1/0;return n==r?0:n>r?-1:1}))},t.prototype.filterByVisible=function(t){return t.filter(function(t,e){var i=$(e),o=i.attr("tabindex"),n=e.hasAttribute("disabled"),r=i.is(":disabled");return!(void 0!=o&&parseInt(o)<0)&&("none"!==i.css("display")&&"hidden"!==i.css("visibility")&&"0"!==i.css("opacity")&&(!n&&!r&&!!("a"!==e.nodeName||e.hasAttribute("href")&&e.hasAttribute("tabindex"))))})},t}();t.TabbingService=e}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.hasUserSelectedNoLimitTimePeriod=function(){return Number($(t.Keys.DepositLimitKeys.depositLimitPeriodSelector).attr("data-selected-value"))===t.Enums.DepositLimitTimePeriod.NoLimit},e.prototype.hasUserSelectedNoLimitAmount=function(){var t=$("div[data-section='deposit-limit-amount']").find("div[data-control='button-dropdown-options'] div div[key='NoLimit'] input").attr("data-selected");return"true"===t},e.Keys=t.Keys.DepositLimitKeys,e}();e.DepositLimitService=i}(e=t.Services||(t.Services={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){var e=t.Core.Ioc.OpenAccountContainer.container;this.common=e.resolve("ICommon"),this.validationService=e.resolve("IValidationService"),this.userAgent=e.resolve("IUserAgent")}return e.prototype.process=function(t,e,i){},e.prototype.supports=function(t){return!1},e.prototype.nextOrPreviousArrowKeyEvent=function(t,e,i){var o=$();"previous"===i?o=t.find("input[data-selected='true']").parent().prev().find("input"):"next"===i&&(o=t.find("input[data-selected='true']").parent().next().find("input")),o.length&&this.setSelectedValue(o,e)},e.prototype.isNumericTest=function(t){var e=t.replace(/[.,\s]/g,"");return!isNaN(+e)},e.prototype.setSelectedValue=function(t,e){var i=e.data().hasOwnProperty("suffix")?e.data("suffix"):"",o=this.isNumericTest(t.val()),n=o?$.trim(t.val()+" "+i):t.val();e.val(n),e.attr("data-selected-value",t.attr("data-value")).data("ignore-blur","true"),e.trigger("change"),t.parents("div[data-control='button-dropdown-options']").find("input").attr("data-selected","false"),t.attr("data-selected","true")},e.prototype.depositLimitButtonClick=function(t){var i=$(e.buttonDropdownSelector+" "+e.optionsSelector),o=t.parentsUntil("fieldset, body","div[data-control='button-dropdown']").find(e.optionsSelector),n=o.hasClass(e.showClass);o.attr(e.optionOpenAttribute,"true"),this.hideAndValidateOpenDropdown(i.filter("."+e.showClass).not(o)),n?(o.removeClass(e.showClass).removeAttr(e.optionOpenAttribute),t.parent().find("input").removeAttr("data-ignore-blur").data("ignore-blur","false"),o.trigger("hide-dropdown")):(this.validationService.hideValidationMessage(t),this.showOptionList(t,o),o.trigger("show-dropdown"))},e.prototype.hideValidationMessage=function(t){this.validationService.hideValidationMessage(t)},e.prototype.onOptionClick=function(t){var i=$(t),o=$(t).closest("div[data-control='button-dropdown-options']"),n=setTimeout(function(){o.fadeOut(500,function(){o.removeClass(e.showClass),o.removeAttr("style")}),clearTimeout(n)},200),r=this.common.getContainer($(t),"data-control","button-dropdown").find("div[data-control='dropdown']>input");this.setSelectedValue(i,r),r.removeAttr("data-ignore-blur").data("ignore-blur","false"),o.removeAttr(e.optionOpenAttribute),this.hideValidationMessage(r),o.trigger("change"),i.parents("div[data-section='deposit-limit-amount']")&&this.timePeriodOptionClick(i),r.focus({preventScroll:!0}),this.validateDepositAmount()},e.prototype.onDocumentClick=function(t){if(!t.target.hasAttribute("data-button-dropdown")&&!t.target.hasAttribute("data-button-dropdown-option")&&!$(t.target).hasClass("non-selectable-option")){var i=$(e.buttonDropdownSelector+" "+e.optionsSelector+"["+e.optionOpenAttribute+"]"),o=i.parent().find("div[data-control='dropdown'] > input[type='button']");if(i.removeClass(e.showClass),i.removeAttr(e.optionOpenAttribute),o.length>0){var n=this.validationService.validate(o);n.isValid||this.validationService.showValidationMessage(o,n)}i.trigger("hide-dropdown"),this.toggleOtherAmountField()}},e.prototype.toggleOtherAmountField=function(){var t=$("div[data-section='deposit-limit-amount']").find("div[data-control='button-dropdown-options'] div div[key='OtherItem'] input").attr("data-selected"),e=$("fieldset[data-section='deposit-limits']").find("fieldset[data-section='deposit-limit-other']");"true"===t?e.addClass("otherSelected"):e.removeClass("otherSelected")},e.prototype.showOptionList=function(t,i){setTimeout(function(){i.addClass(e.showClass),t.parent().find("input").attr("data-ignore-blur","true").data("ignore-blur","true")},0)},e.prototype.setAmountVisibility=function(t){var e=$("div[data-section='deposit-limit-amount']");t?e.show():e.hide()},e.prototype.setNonVerifiedRegulatoryMessageVisibility=function(t){var e=$("div#NonVerifiedRegulatoryMessage");t?e.show():e.hide()},e.prototype.setDepositLimitOptOutVisibility=function(t){var e=$("#depositLimitOptOutSection");t?e.show():(e.hide(),$("#DepositLimitOptOut").addClass("unchecked").removeClass("checked"))},e.prototype.isNonVerifiedLimitExceeded=function(t,e){return!isNaN(t)&&t>0&&e>t},e.prototype.hideAndValidateOpenDropdown=function(t){if(t.length){t.removeClass(e.showClass).removeAttr(e.optionOpenAttribute);var i=t.siblings().find("input"),o=this.validationService.validate(i);o.isValid?this.validationService.hideValidationMessage(i):this.validationService.showValidationMessage(i,o)}},e.prototype.timePeriodOptionClick=function(t){var e="NoDepositLimit"===t.parent().attr("key");this.setAmountVisibility(!e),this.setNonVerifiedRegulatoryMessageVisibility(e),this.setDepositLimitOptOutVisibility(e)},e.prototype.validateDepositAmount=function(){var t=$("#DepositAmount");if(t.length&&t.val().length>0){var e=this.validationService.validate(t);e.isValid?this.validationService.hideValidationMessage(t):(this.validationService.showValidationMessage(t,e),t.focus())}},e.buttonDropdownSelector="fieldset[data-section='deposit-limits'] div[data-control='button-dropdown']",e.dropdownContainerSelector="div[data-control='dropdown']",e.dropdownSelector="div[data-control='dropdown']>input",e.dropdownArrowSelector="div[data-control='dropdown']>div:first-child",e.optionsSelector="div[data-control='button-dropdown-options']",e.optionSelector="div[data-control='button-dropdown-options']>div>div>input",e.optionOpenAttribute="data-options-open",e.showClass="show",e}();e.BaseDropdownEventProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.supports=function(e){var i=t.BaseDropdownEventProcessor.buttonDropdownSelector+" "+t.BaseDropdownEventProcessor.dropdownSelector,o=t.BaseDropdownEventProcessor.dropdownContainerSelector,n="click"===e.type||"mousedown"===e.type||"mouseup"===e.type;return n&&($(e.currentTarget).is(i)||$(e.currentTarget).is(o))},i.prototype.process=function(t,e,i){this.depositLimitButtonClick($(i.target))},i}(t.BaseDropdownEventProcessor);t.DropdownClickEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.supports=function(e){return $(e.currentTarget).is(t.BaseDropdownEventProcessor.buttonDropdownSelector+" "+t.BaseDropdownEventProcessor.dropdownArrowSelector)},i.prototype.process=function(t,e,i){var o=$(i.target).siblings("input");o.focus(),this.depositLimitButtonClick(o)},i}(t.BaseDropdownEventProcessor);t.DropdownArrowClickEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.supports=function(e){var i="click"===e.type||"mousedown"===e.type||"mouseup"===e.type;return i&&$(e.currentTarget).is(t.BaseDropdownEventProcessor.buttonDropdownSelector+" "+t.BaseDropdownEventProcessor.optionSelector)},i.prototype.process=function(t,e,i){this.onOptionClick(i.target)},i}(t.BaseDropdownEventProcessor);t.DropdownOptionClickEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.supports=function(t){return $(t.currentTarget).is(document)},e.prototype.process=function(t,e,i){this.onDocumentClick(i)},e}(t.BaseDropdownEventProcessor);t.DocumentClickEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(i){function o(){var e=i.call(this)||this,o=t.Core.Ioc.OpenAccountContainer.container;return e.httpService=o.resolve("IHttpService"),e}return __extends(o,i),o.prototype.supports=function(t){return $(t.currentTarget).is(e.BaseDropdownEventProcessor.buttonDropdownSelector+" "+e.BaseDropdownEventProcessor.optionSelector)&&$(t.currentTarget).parents("div[data-section='deposit-limit-period']").length>0&&"NoDepositLimit"!==$(t.currentTarget).parent().attr("key")},o.prototype.process=function(t,e,i){$(i.currentTarget).parents().find("#DepositLimitPeriod").trigger("time-period-change")},o}(e.BaseDropdownEventProcessor);e.TimePeriodDropdownOptionClick=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){var i=e.call(this)||this,o=t.Core.Ioc.OpenAccountContainer.container;return i.tabbingService=o.resolve("ITabbingService"),i}return __extends(i,e),i.prototype.supports=function(t){if("focus"!==t.type)return!1;var e=$(":focus"),o="dropdown"===e.data("control")&&e.find(i.internalButtonSelector).length>0;return o},i.prototype.process=function(t,e,o){var n=$(":focus"),r=$(o.relatedTarget),a=n.find(i.internalButtonSelector);r.is(a)&&this.tabbingService.previousField()},i.internalButtonSelector="input[type='button']",i}(e.BaseDropdownEventProcessor);e.DropDownFocusEventProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.supports=function(e){return $(e.currentTarget).is(t.BaseDropdownEventProcessor.buttonDropdownSelector+" "+t.BaseDropdownEventProcessor.optionSelector)&&$(e.currentTarget).parents("div[data-section='deposit-limit-amount']").length>0},i.prototype.process=function(t,e,i){this.toggleOtherAmountField()},i}(t.BaseDropdownEventProcessor);t.OtherAmountOptionClickEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.supports=function(e){var i=[t.Enums.KeyCode.Tab,t.Enums.KeyCode.Escape,t.Enums.KeyCode.Enter],o=i.indexOf(e.keyCode)>-1,n=$(e.target).is(t.Keys.DepositLimitKeys.depositLimitAmountSelector)||$(e.target).children(t.Keys.DepositLimitKeys.depositLimitAmountSelector).length>0;return o&&n},i.prototype.process=function(t,e,i){this.toggleOtherAmountField()},i}(e.BaseDropdownEventProcessor);e.OtherAmountOptionKeyEventProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.upArrowKeyCode=38,t}return __extends(i,e),i.prototype.supports=function(t){var e=$(":focus");return e.parents("fieldset[data-section='deposit-limits']").length&&t.keyCode===this.upArrowKeyCode},i.prototype.process=function(e,i,o){o.preventDefault(),o.returnValue=!1;var n=i.find("input[data-selected='true']");"true"===i.attr("aria-hidden")||i.is(":hidden")?(i.attr(t.BaseDropdownEventProcessor.optionOpenAttribute,"true"),this.validationService.hideValidationMessage(e),i.trigger("show-dropdown"),this.showOptionList(e,i)):n.length&&(e.parents("div[data-section='deposit-limit-period']").length?this.nextOrPreviousArrowKeyEvent(i,e,"previous"):this.upArrowKeyEventForAmount(e,i))},i.prototype.upArrowKeyEventForAmount=function(t,e){if("true"!==e.attr("aria-hidden")&&t.parents("div[data-section='deposit-limit-amount']").length){var i=this.getNextOptionToSelect(e),o=e.find("div[key='NoLimit']").find("input");i.length?this.setSelectedValue(i,t):"false"===o.attr("data-selected")&&this.setSelectedValue(o,t)}},i.prototype.getNextOptionToSelect=function(t){var e=t.find("div.col3layout").length,i=t.find("input[data-selected='true']").parent(),o=$();return o=e?i.prev().prev().prev().find("input"):i.prev().prev().prev().prev().find("input")},i}(t.BaseDropdownEventProcessor);t.UpArrowKeyEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.downArrowKeyCode=40,t}return __extends(i,e),i.prototype.supports=function(t){var e=$(":focus"),i=e.parents("fieldset[data-section='deposit-limits']").length&&t.keyCode===this.downArrowKeyCode;return i},i.prototype.process=function(e,i,o){o.preventDefault(),o.returnValue=!1;var n=i.find("input[data-selected='true']");n.length?this.optionAlreadySelectedAction(e,i):this.optionNotSelectedAction(e,i),this.dropdownOptionListIsHidden(i)&&(i.attr(t.BaseDropdownEventProcessor.optionOpenAttribute,"true"),this.validationService.hideValidationMessage(e),i.trigger("show-dropdown"),this.showOptionList(e,i))},i.prototype.dropdownOptionListIsHidden=function(t){return"true"===t.attr("aria-hidden")||t.is(":hidden")},i.prototype.optionAlreadySelectedAction=function(t,e){this.dropdownOptionListIsHidden(e)===!1&&(t.parents("div[data-section='deposit-limit-period']").length?this.nextOrPreviousArrowKeyEvent(e,t,"next"):this.downArrowKeyEventForAmount(t,e))},i.prototype.optionNotSelectedAction=function(t,e){var i=e.find("input").first();this.setSelectedValue(i,t)},i.prototype.downArrowKeyEventForAmount=function(t,e){var i=this.getNextOptionToSelect(e),o=e.find("div[key='NoLimit']").find("input"),n=e.find("div[key='NoLimit']").next().find("input");"true"===o.attr("data-selected")?this.setSelectedValue(n,t):i.length&&this.setSelectedValue(i,t)},i.prototype.getNextOptionToSelect=function(t){var e=t.find("div.col3layout").length,i=t.find("input[data-selected='true']").parent(),o=$();return o=e?i.next().next().next().find("input"):i.next().next().next().next().find("input")},i}(t.BaseDropdownEventProcessor);t.DownArrowKeyEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftArrowKeyCode=37,t}return __extends(i,e),i.prototype.supports=function(t){var e=$(":focus");return e.parents("fieldset[data-section='deposit-limits']").length&&t.keyCode===this.leftArrowKeyCode&&e.parents("div[data-section='deposit-limit-amount']").length>0},i.prototype.process=function(e,i){"true"===i.attr("aria-hidden")||i.is(":hidden")?(i.attr(t.BaseDropdownEventProcessor.optionOpenAttribute,"true"),this.validationService.hideValidationMessage(e),i.trigger("show-dropdown"),this.showOptionList(e,i)):this.nextOrPreviousArrowKeyEvent(i,e,"previous")},i}(t.BaseDropdownEventProcessor);t.LeftArrowKeyEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.rightArrowKeyCode=39,t}return __extends(i,e),i.prototype.supports=function(t){var e=$(":focus");return e.parents("fieldset[data-section='deposit-limits']").length&&t.keyCode===this.rightArrowKeyCode&&e.parents("div[data-section='deposit-limit-amount']").length>0},i.prototype.process=function(e,i){"true"===i.attr("aria-hidden")||i.is(":hidden")?(i.attr(t.BaseDropdownEventProcessor.optionOpenAttribute,"true"),this.validationService.hideValidationMessage(e),i.trigger("show-dropdown"),this.showOptionList(e,i)):this.nextOrPreviousArrowKeyEvent(i,e,"next")},i}(t.BaseDropdownEventProcessor);t.RightArrowKeyEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.escapeKeyCode=27,t}return __extends(i,e),i.prototype.supports=function(t){var e=$(":focus"),i="button-dropdown"===e.attr("control")?e:e.parents("div[data-control='button-dropdown']"),o=i.find("div[data-control='button-dropdown-options']").is(":visible");return e.parents("fieldset[data-section='deposit-limits']").length&&o&&t.keyCode===this.escapeKeyCode},i.prototype.process=function(e,i){i.removeClass(t.BaseDropdownEventProcessor.showClass).removeAttr(t.BaseDropdownEventProcessor.optionOpenAttribute),e.trigger("time-period-change")},i}(t.BaseDropdownEventProcessor);t.EscapeKeyEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(i){function o(){return null!==i&&i.apply(this,arguments)||this}return __extends(o,i),o.prototype.supports=function(e){var i=$(":focus"),o="button-dropdown"===i.attr("control")?i:i.parents("div[data-control='button-dropdown']"),n=o.find("div[data-control='button-dropdown-options']").is(":visible");return i.parents("fieldset[data-section='deposit-limits']").length&&e.keyCode===t.Enums.KeyCode.Tab&&n},o.prototype.process=function(t,i,o){if(this.userAgent.isIe()||o.preventDefault(),i.hasClass(e.BaseDropdownEventProcessor.showClass))i.removeClass(e.BaseDropdownEventProcessor.showClass).removeAttr(e.BaseDropdownEventProcessor.optionOpenAttribute),i.trigger("hide-dropdown"),t.data("ignore-blur","false"),"DepositLimitPeriod"===t.attr("id")&&t.trigger("time-period-change");else{var n=this.validationService.validate(t);n.isValid||this.validationService.showValidationMessage(t,n)}},o}(e.BaseDropdownEventProcessor);e.TabKeyEventProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=t.Keys.DepositLimitKeys,o=function(e){function o(){var i=e.call(this)||this,o=t.Core.Ioc.OpenAccountContainer.container;return i.depositLimitService=o.resolve("IDepositLimitService"),i}return __extends(o,e),o.prototype.supports=function(e){return(e.keyCode===t.Enums.KeyCode.Enter||e.keyCode===t.Enums.KeyCode.Spacebar||e.keyCode===t.Enums.KeyCode.Escape)&&($(e.target).children("input").first().is(i.depositLimitPeriodSelector)||$(e.target).is(i.depositLimitPeriodSelector))},o.prototype.process=function(t,e,o){var n=!this.depositLimitService.hasUserSelectedNoLimitTimePeriod();this.setAmountVisibility(n);var r=$(o.target);r.is(i.depositLimitPeriodSelector)?r.trigger("time-period-change"):r.find("#DepositLimitPeriod").trigger("time-period-change")},o}(e.BaseDropdownEventProcessor);e.TimePeriodKeyEventProcessor=o}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(i){function o(){return null!==i&&i.apply(this,arguments)||this}return __extends(o,i),o.prototype.supports=function(i){var o=e.BaseDropdownEventProcessor.dropdownContainerSelector;return(i.keyCode===t.Enums.KeyCode.Enter||i.keyCode===t.Enums.KeyCode.Spacebar)&&$(i.target).is(o)},o.prototype.process=function(t,e,i){this.depositLimitButtonClick($(i.target).find("input[type='button']"))},o}(e.BaseDropdownEventProcessor);e.DropdownEnterKeyEventProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.supports=function(e){var i=e.keyCode===t.Enums.KeyCode.Enter||e.keyCode===t.Enums.KeyCode.Spacebar||e.keyCode===t.Enums.KeyCode.Escape||e.keyCode===t.Enums.KeyCode.Tab,o=$(e.target).children("input").first().is("input[data-button-dropdown]"),n="true"===$(e.target).parents("div[data-control='button-dropdown']").attr("data-validation"),r="-1"!==$(e.target).children("input").first().attr("data-selected-value");return i&&o&&n&&r},i.prototype.process=function(t,e,i){var o=e.parents("div[data-control='button-dropdown']").find("div[data-control='dropdown'] input");this.hideValidationMessage(o)},i}(e.BaseDropdownEventProcessor);e.KeyEventHideValidationProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){}return e.prototype.getClickEvents=function(){return this.clickEvents||(this.clickEvents=new Array,this.clickEvents.push(new t.DropdownClickEventProcessor),this.clickEvents.push(new t.DropdownArrowClickEventProcessor),this.clickEvents.push(new t.DropdownOptionClickEventProcessor),this.clickEvents.push(new t.DocumentClickEventProcessor),this.clickEvents.push(new t.TimePeriodDropdownOptionClick),this.clickEvents.push(new t.DropDownFocusEventProcessor),this.clickEvents.push(new t.OtherAmountOptionClickEventProcessor),this.clickEvents.push(new t.NonVerifiedLimitClickEventProcessor)),this.clickEvents},e.prototype.getKeyEvents=function(){return this.keyEvents||(this.keyEvents=new Array,this.keyEvents.push(new t.UpArrowKeyEventProcessor),this.keyEvents.push(new t.DownArrowKeyEventProcessor),this.keyEvents.push(new t.LeftArrowKeyEventProcessor),this.keyEvents.push(new t.RightArrowKeyEventProcessor),this.keyEvents.push(new t.EscapeKeyEventProcessor),this.keyEvents.push(new t.TabKeyEventProcessor),this.keyEvents.push(new t.TimePeriodKeyEventProcessor),this.keyEvents.push(new t.DropdownEnterKeyEventProcessor),this.keyEvents.push(new t.KeyEventHideValidationProcessor),this.keyEvents.push(new t.OtherAmountOptionKeyEventProcessor),this.keyEvents.push(new t.NonVerifiedLimitKeyEventProcessor)),this.keyEvents},e}();t.DepositLimitEventProcessorFactory=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e=t.Core.Logging.ConsoleLogger,i=t.Core.Logging.LegacyLogger,o=t.Services.UserAgent.UserAgent,n=t.Services.PageWaiting.PageWaiting,r=t.Services.Client.Client,a=t.Services.Common.Common,s=t.Validation.ValidationService,c=t.Services.CountryChange.CountryChangeService,l=t.Services.TextWidth.CanvasTextWidthService,u=t.Services.TextWidth.LegacyTextWidthService,d=t.Services.AccountCreation.AccountCreationService,p=t.Services.AccountCreation.DanishIdentityUpdateService,h=t.Services.AccountCreation.SpanishIdentityUpdateService,v=t.Services.AccountCreation.ItalianIdentityUpdateService,f=t.Services.AccountCreation.SwedishIdentityUpdateService,m=t.Frame.PostMessage.PostMessageService,g=t.Services.FlexiLabelService,y=t.Services.LightBoxService,S=t.Services.DateService,A=t.Services.PasswordInformationService,C=t.Services.PlatformService,b=t.Services.DniNieService,E=t.Services.Scroller.DefaultPageScroller,P=t.Services.Scroller.FramePageScroller,L=t.Services.CodiceFiscaleService,B=t.Services.AddressLookup.AddressService,x=t.StateHandlers.AddressStateHandler,w=t.Services.AddressLookup.AddressSuggestionFactory,I=t.Services.UrlService,$=t.Services.RegulatoryService,D=t.Services.LightBoxContentService,N=t.Services.FrameService,k=t.Services.PhoneNumberService,V=t.Services.RemoteTrackingService,F=t.Services.DomDisplayService,T=t.Services.TerminateSessionService,O=t.Core.Ioc.LifeStyle,M=t.StateHandlers.AuditAddressHandler,_=t.Services.ErrorHandlingService,K=t.Services.SessionSaveFormService,R=t.Services.TabbingService,H=t.Processors.DepositLimitEvents.DepositLimitEventProcessorFactory,U=t.Services.DepositLimitService,W=t.Services.CultureInfoService,G=function(){function G(){}return G.installOpenAccount=function(z){z.register("IUrlService",I,O.Singleton),z.register("IHttpService",t.Core.HttpService.JQueryHttpService,O.Transient),z.register("IJsonParser",t.Services.JsonParser,O.Singleton),
z.register("ITrackingService",V,O.Singleton),z.register("IUserAgent",o,O.Singleton),z.register("ICultureInfoService",W,O.Singleton),z.register("IClient",r,O.Singleton),z.register("IPageWaiting",n,O.Singleton),z.register("IDomDisplayService",F,O.Singleton),z.register("ICommon",a,O.Singleton),z.register("IDateService",S,O.Singleton),z.register("IDniNieService",b,O.Singleton),z.register("IPhoneNumberService",k,O.Singleton),z.register("IPostMessageService",m,O.Singleton),G.installWithFallback(function(){return!!console},"ILogger",e,i,O.Singleton,z),G.installWithFallback(this.isCanvasSupported,"ITextWidthService",l,u,O.Singleton,z),z.register("IFrameService",N,O.Singleton),G.installWithFallback(function(){return top!==self},"IPageScroller",P,E,O.Singleton,z),z.register("IFlexiLabelService",g,O.Singleton),z.register("ICodiceFiscaleService",L,O.Singleton),z.register("IDepositLimitService",U,O.Singleton),z.register("IValidationService",s,O.Singleton),z.register("ILightBoxContentService",D,O.Singleton),z.register("IAuditAddressHandler",M,O.Singleton),z.register("IAddressStateHandler",x,O.Singleton),z.register("IAddressSuggestionFactory",w,O.Singleton),z.register("IAddressService",B,O.Singleton),z.register("IRegulatoryService",$,O.Singleton),z.register("ISessionSaveFormService",K,t.Core.Ioc.LifeStyle.Singleton),z.register("ICountryChangeService",c,O.Singleton),z.register("IAccountCreationService",d,t.Core.Ioc.LifeStyle.Singleton),z.register("ILightBoxService",y,O.Singleton),z.register("IDanishIdentityUpdateService",p,t.Core.Ioc.LifeStyle.Singleton),z.register("ISpanishIdentityUpdateService",h,t.Core.Ioc.LifeStyle.Singleton),z.register("IItalianIdentityUpdateService",v,t.Core.Ioc.LifeStyle.Singleton),z.register("ISwedishIdentityUpdateService",f,t.Core.Ioc.LifeStyle.Singleton),z.register("IPasswordInformationService",A,O.Singleton),z.register("IPlatformService",C,O.Singleton),z.register("ICodiceFiscaleService",L,O.Singleton),z.register("ITerminateSessionService",T,O.Singleton),z.register("IErrorHandlingService",_,O.Singleton),z.register("ITabbingService",R,O.Singleton),z.register("IDepositLimitEventProcessorFactory",H,O.Singleton)},G.isCanvasSupported=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},G.installWithFallback=function(t,e,i,o,n,r){try{t()?r.register(e,i,n):r.register(e,o,n)}catch(t){r.register(e,o,n)}},G}();t.OpenAccountInstaller=G}(Application||(Application={}));var Application;!function(t){var e=function(){function e(){}return e.start=function(){var i=t.OpenAccountInstaller;e.container=t.Core.Ioc.OpenAccountContainer.container,i.installOpenAccount(e.container),e.components=t.Repository.ComponentRepository.initialiseComponents(e.container),e.events=t.Repository.EventRepository.initialiseEvents(e.container),e.domInitialisers=t.Repository.DomInitialiserRepository.initialiseDom(e.container),e.initialiseDom(),e.initialiseUiComponents(),e.initialiseFrameMessenger(),e.initialiseEvents(),e.showHeader()},e.destroy=function(){e.destroyUiComponents()},e.reinitialise=function(){this.initialiseDom(),e.components.forEach(function(t){t.component.canReinitialise()&&t.component.destroy()}),e.components.forEach(function(t){t.component.canReinitialise()&&t.component.initialise()}),e.initialiseEvents()},e.reinitialiseEvents=function(){e.events.forEach(function(t){t.event.canReinitialise()&&t.event.reinitialise()})},e.getComponent=function(t){var i;return e.components.forEach(function(e){i||e.componentName===t&&(i=e.component)}),i},e.getEvent=function(t){var i;return e.events.forEach(function(e){i||e.eventName===t&&(i=e.event)}),i},e.getPreviousIframeHeight=function(){return e.isInHostedMode?e.frameMessenger.getPreviousIframeHeight():0},e.initialiseUiComponents=function(){e.components.forEach(function(t){t.initialiseOnLoad&&t.component.initialise()})},e.initialiseEvents=function(){e.events.forEach(function(t){t.initialiseOnLoad&&t.event.bind()})},e.initialiseDom=function(){e.domInitialisers.forEach(function(t){t.initialise()})},e.destroyUiComponents=function(){e.components.forEach(function(t){t.component.destroy()})},e.initialiseFrameMessenger=function(){var i=e.container.resolve("IFrameService");i.isInHostedMode()&&(e.frameMessenger=new t.Frame.Messenger.FrameMessenger(e.container.resolve("ILogger"),e.container.resolve("IFrameService"),e.container.resolve("IPageScroller"),e.container.resolve("IPostMessageService")),e.frameMessenger.initialise(),e.isInHostedMode=!0),e.removeLoadingClass()},e.removeLoadingClass=function(){setTimeout(function(){$(".greyOut").removeClass("pageLoading")},0)},e.showHeader=function(){$("header.su-Branding").removeClass("hide")},e}();t.OpenAccount=e}(Application||(Application={})),$(document).ready(function(){Application.OpenAccount.start()}),$(window).unload(function(){Application.OpenAccount.destroy()});var Application;!function(t){var e;!function(t){var e=function(){function t(t){this.eventNamespace=t}return t.prototype.destroy=function(){},t.prototype.canReinitialise=function(){return!0},t.prototype.initialiseFor=function(t){},t.prototype.buildEventName=function(t){return t+"."+this.eventNamespace},t}();t.BaseComponent=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this,"AnchorTagsTargetBlank")||this;return t.aTagtargetBlankSelector="a[target='_blank']",t.hdnPlatformId="#hdnPlatformId",t.iosSportsAppPlatformid="70",t.androidSportsAppPlatformId="71",t}return __extends(i,e),i.prototype.initialise=function(){var t=this,i=$(this.hdnPlatformId).val();i!==this.iosSportsAppPlatformid&&i!==this.androidSportsAppPlatformId||$(this.aTagtargetBlankSelector).on(e.prototype.buildEventName.call(this,"click"),function(e){return t.onAnchorTagTargetBlankClicked(e)})},i.prototype.destroy=function(){$(this.aTagtargetBlankSelector).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.onAnchorTagTargetBlankClicked=function(e){var i=$(e.target),o=i.attr("href"),n={message:t.Frame.Messenger.FrameMessages.NavDomain,url:o},r=window.parent;return r&&r.webkit&&r.webkit.messageHandlers&&r.webkit.messageHandlers.members&&r.webkit.messageHandlers.members.postMessage(JSON.stringify(n)),!1},i}(e.BaseComponent);e.AnchorTagsTargetBlank=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this,"BulgariaTimeLivedComponent")||this;return i.domDisplayService=t,i}return __extends(i,e),i.prototype.initialise=function(){var e=Number($("#Country").find(":selected").val());e===t.Enums.CountryId.Bulgaria&&(this.domDisplayService.show($(t.Keys.AddressKeys.TimeLivedAreaSelector)),this.domDisplayService.show($(t.Keys.AddressKeys.TimeLivedSelector)),this.domDisplayService.show($(t.Keys.AddressKeys.TimeLivedSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.getPostAddressSearch(!0))),this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousFindAddressButtonSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousAddressHeaderSelector)),this.initialiseTimeLivedEvent(),this.timeLivedEvent.bind())},i.prototype.destroy=function(){this.initialiseTimeLivedEvent(),this.timeLivedEvent.unbind()},i.prototype.initialiseTimeLivedEvent=function(){this.timeLivedEvent||(this.timeLivedEvent=t.OpenAccount.getEvent(t.Enums.EventName.TimeLivedClickEvent))},i}(e.BaseComponent);e.BulgariaTimeLivedComponent=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this,"CheckComponent")||this;return i.userAgent=t,i.hitAreaSelector="div[data-control='checkcomponent'] div",i.checkComponentSelector="div[data-control='checkcomponent']",i}return __extends(i,e),i.prototype.initialise=function(){var t=this;this.initialiseBrowserSpecificChanges();var i=$(this.hitAreaSelector);"true"===$("body").attr("data-is-mobile")?i.on(e.prototype.buildEventName.call(this,"touchend"),function(e){return t.toggleState(e)}):(i.on(e.prototype.buildEventName.call(this,"click"),function(e){return t.toggleState(e)}),i.on(e.prototype.buildEventName.call(this,"blur"),function(t){return $(t.currentTarget).removeClass("focusin")}),i.on(e.prototype.buildEventName.call(this,"focus"),function(t){return $(t.currentTarget).addClass("focusin")})),i.on(e.prototype.buildEventName.call(this,"keypress"),function(e){return t.onKeyPress(e)})},i.prototype.destroy=function(){$(this.hitAreaSelector).off(e.prototype.buildEventName.call(this,"click")).off(e.prototype.buildEventName.call(this,"keypress")).off(e.prototype.buildEventName.call(this,"focus")).off(e.prototype.buildEventName.call(this,"blur")).off(e.prototype.buildEventName.call(this,"touchend"))},i.prototype.toggleState=function(t){var e=$(t.currentTarget);e.hasClass("hitArea")&&(e.toggleClass("checked"),e.toggleClass("unchecked"),this.isIe8()&&($(this.checkComponentSelector+" .hitArea").removeClass("focusin"),e.addClass("focusin"),this.bindDocumentEvent(!0),t.stopPropagation()))},i.prototype.onKeyPress=function(e){var i=e.which||e.keyCode;i!==t.Enums.KeyCode.Enter&&i!==t.Enums.KeyCode.Spacebar||this.toggleState(e)},i.prototype.initialiseBrowserSpecificChanges=function(){this.initialiseFor8(),this.initialiseForIe9AndAbove()},i.prototype.initialiseForIe9AndAbove=function(){this.userAgent.isIe()&&!this.isIe8()&&$(this.checkComponentSelector+" > div").append("<parentfocus></parentfocus>")},i.prototype.initialiseFor8=function(){this.isIe8()&&$(this.checkComponentSelector+" > div").append("<span></span>")},i.prototype.isIe8=function(){return $("body").hasClass("ie8")},i.prototype.bindDocumentEvent=function(t){var i=this;t?$(document).on(e.prototype.buildEventName.call(this,"click"),function(t){return i.onOutsideCheckComponentClick(t)}):$(document).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.onOutsideCheckComponentClick=function(t){var e=$(t.currentTarget);e.hasClass("hitArea")&&!$.contains($(".hitArea")[0],e[0])||($(this.checkComponentSelector+" .hitArea").removeClass("focusin"),this.bindDocumentEvent(!1))},i}(e.BaseComponent);e.CheckComponent=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o){var n=e.call(this,"CloseWindow")||this;return n.frameService=t,n.trackingService=i,n.terminateSessionService=o,n.hdnPlatformId="#hdnPlatformId",n.sportsMobilePlatformid="2",n.sportsProductId=1,n}return __extends(i,e),i.prototype.initialise=function(){var t=this,i=$(".su-Branding_CloseButton");i.on(e.prototype.buildEventName.call(this,"click"),function(){return t.closeWindow()})},i.prototype.destroy=function(){var t=$(".su-Branding_CloseButton");t.off(e.prototype.buildEventName.call(this,"click"))},i.prototype.closeWindow=function(){this.terminateSessionService.shouldSessionTerminateOnClose()&&(this.terminateSessionService.terminateSession(),this.unbindUnloadEvents()),this.redirectToHomepage()},i.prototype.redirectToHomepage=function(){if(this.frameService.isInHostedMode()){var e=$(this.hdnPlatformId).val(),i=Number($("#product").val());e==this.sportsMobilePlatformid&&i==this.sportsProductId?this.frameService.postIframeComplete():this.frameService.postNavigateHome(),this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.OpenAccountClosed,additionalInformation:""})}else window.location.href=$("#closeUrl").val()},i.prototype.unbindUnloadEvents=function(){var e=t.OpenAccount.getEvent(t.Enums.EventName.PageUnloadEvent);e&&e.unbind()},i.prototype.canReinitialise=function(){return!1},i}(e.BaseComponent);e.CloseWindow=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this,"ContactInformation")||this}return __extends(i,e),i.prototype.initialise=function(){this.showHideDialingCode($("#Country").find(":selected").val())},i.prototype.showHideDialingCode=function(e){var i=parseInt(e)===t.Enums.CountryId.UnitedKingdom||parseInt(e)===t.Enums.CountryId.UnitedStatesOfAmerica?"false":"true";$("fieldset[data-section='contact-information'] div[data-control='phone-number']>div").attr("data-show-dialing-code",i)},i}(e.BaseComponent);e.ContactInformation=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i){var o=e.call(this,"CountryOfResidence")||this;return o.countryChangeService=t,o.lightBoxService=i,o}return __extends(i,e),i.prototype.initialise=function(){this.initialiseCountryDropdown()},i.prototype.destroy=function(){var t=$("#Country");t.off(e.prototype.buildEventName.call(this,"change"))},i.prototype.initialiseCountryDropdown=function(){var t=this,i=$("#Country"),o=$("#OddsType");this.countryChangeService.initialise(i.find(":selected").val()),i.on(e.prototype.buildEventName.call(this,"change"),function(){return t.updateLayout(i.find(":selected").val(),o.find(":selected").val())})},i.prototype.updateLayout=function(t,e){this.showLightbox()||this.countryChangeService.changeCountry(this.sanitiseCountryId(t),e)},i.prototype.showLightbox=function(){var e=$("#Country");return $("#hdnDefaultCountry").val()!==e.find(":selected").val()&&0===$(i.countryChangeLightbox+":visible").length&&(this.lightBoxService.show(t.Enums.LightBoxEventSource.OnCountryChange),!0)},i.prototype.sanitiseCountryId=function(t){var e=Number(t);return isNaN(e)||e===-1?"0":t},i.countryChangeLightbox="fieldset[data-section='country-of-residence'] div[data-control='lightBox'] div.countryChangeLightBox",i}(e.BaseComponent);e.CountryOfResidence=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(t){function e(e){var i=t.call(this,"DepositLimitAmountDropDown")||this;return i.validationService=e,i}return __extends(e,t),e.prototype.initialise=function(){this.appendNonSelectableOptions(),this.setSelectedOption()},e.prototype.appendNonSelectableOptions=function(){for(var t=$(e.depositLimitOptionsSelector),i=0;i<t.length;i++)this.addNonSelectableOptions($(t[i]))},e.prototype.addNonSelectableOptions=function(t){var e=t.find(">div").not("div[key='NoLimit']").length,i=this.checkIf3ColumnLayoutRequired(t),o=i?3:4;if(e%o!==0)for(var n=o-e%o,r=0;r<n;r++)t.append("<div class='non-selectable-option'></div>");i&&this.apply3ColumnLayoutClassesToDom(t)},e.prototype.checkIf3ColumnLayoutRequired=function(t){var i=!1,o=t.find(">div").not("div[key='NoLimit']");return o.find(">input").each(function(t,o){var n=$(o).data("value");n&&parseInt(n,10)>e.maxValueFor4ColumnLayout&&(i=!0)}),i},e.prototype.apply3ColumnLayoutClassesToDom=function(t){t.addClass(e.threeColLayoutClass),t.find(">div").not("div[key='NoLimit']").each(function(t,i){t%3||$(i).addClass(e.colStartClass)})},e.prototype.setSelectedOption=function(){for(var t=$("div[data-control='button-dropdown-options'] input[data-selected='true']"),e=0;e<t.length;e++){var i=$(t[e]),o=i.parents("div[data-section='deposit-limit-amount']").find("input[data-button-dropdown]"),n=null!=o.data("suffix")?o.data("suffix"):"",r=$.trim(i.val()+" "+n);o.val(r)}},e.depositLimitOptionsSelector="fieldset[data-section='deposit-limits'] div[data-section='deposit-limit-amount'] div[data-control='button-dropdown-options'] > div",e.maxValueFor4ColumnLayout=999999,e.threeColLayoutClass="col3layout",e.colStartClass="col3Start",e}(t.Components.BaseComponent);e.DepositLimitAmountDropDown=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e){var i=t.call(this,"DniNieNumberComponent")||this;return i.dniNieService=e,i}return __extends(e,t),e.prototype.initialise=function(){if($("[data-section='verification-retry']").length>0){var t=$("#DniNieNumber");this.dniNieService.isValidDni(t)?t.attr("data-dni-or-nie","dni"):this.dniNieService.isValidNie(t)&&t.attr("data-dni-or-nie","nie")}},e}(t.BaseComponent);t.DniNieNumberComponent=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o){var n=e.call(this,"FlexiLabel")||this;return n.userAgent=t,n.common=i,n.flexiLabelService=o,n}return __extends(i,e),i.prototype.initialise=function(){this.initializeFlexiLabels($("body"))},i.prototype.initialiseFor=function(t){this.initializeFlexiLabels(t)},i.prototype.componentName=function(){return t.Enums.ComponentName.FlexiLabel},i.prototype.destroy=function(){var i=$(t.Keys.FlexiLabelKeys.InputSelector).not(t.Keys.FlexiLabelKeys.SelectDateControl);i.off(e.prototype.buildEventName.call(this,"input")).off(e.prototype.buildEventName.call(this,"keyup")).off(e.prototype.buildEventName.call(this,"focus")),$(window).off(e.prototype.buildEventName.call(this,"resize"))},i.prototype.canReinitialise=function(){return i.reinitialise=!0,!0},i.prototype.initializeFlexiLabels=function(o){var n=this,r=o.find(t.Keys.FlexiLabelKeys.InputSelector);this.userAgent.isIe9AndBelow()?r.on(e.prototype.buildEventName.call(this,"keyup"),function(t){return n.onInput(t)}):r.on(e.prototype.buildEventName.call(this,"input"),function(t){return n.onInput(t)}),r.on(e.prototype.buildEventName.call(this,"focus"),function(t){return n.onFocus(t)}),$(window).on(e.prototype.buildEventName.call(this,"resize"),this.common.debounce(this,this.onWindowResize,50)),i.reinitialise&&this.onWindowResize()},i.prototype.onFocus=function(t){var e=$(t.target),o=e.parent();1!==o.find("."+i.rulerClassName).length&&(o.append("<label style='display:none;' class='"+i.rulerClassName+"'></label>"),o.append("<label style='display:none;' class='"+i.labelRulerClassName+"'>"+this.flexiLabelService.getLabel(o).text()+"</label>"))},i.prototype.onInput=function(t){var e=$(t.target);this.applyFlexiLabel(e)},i.prototype.applyFlexiLabel=function(t){this.flexiLabelService.applyFlexiLabel(t)},i.prototype.onWindowResize=function(){for(var e=$(t.Keys.FlexiLabelKeys.InputSelector).not(t.Keys.FlexiLabelKeys.SelectDateControl),i=0;i<e.length;i++)this.applyFlexiLabel($(e[i]))},i.rulerClassName="flexiField_Ruler",i.labelRulerClassName="flexiField_Label_Ruler",i.reinitialise=!1,i}(e.BaseComponent);e.FlexiLabel=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e){var i=t.call(this,"FormStateComponent")||this;return i.sessionSaveFormService=e,i}return __extends(e,t),e.prototype.initialise=function(){"true"===$("body").attr("data-is-casino-native")&&this.sessionSaveFormService.loadForm()},e}(t.BaseComponent);t.FormStateComponent=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this,"GdprInformation")||this}return __extends(e,t),e.prototype.initialise=function(){},e}(t.BaseComponent);t.GdprInformation=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this,"Help")||this}return __extends(e,t),e.prototype.initialise=function(){this.initialiseHelp()},e.prototype.destroy=function(){$(e.helpContactUsLinkSelector).off(t.prototype.buildEventName.call(this,"click")),$(e.emailSelector).off(t.prototype.buildEventName.call(this,"click")),$(e.liveChatLinkSelector).off(t.prototype.buildEventName.call(this,"click"))},e.prototype.initialiseHelp=function(){var i=this;$(e.helpContactUsLinkSelector).on(t.prototype.buildEventName.call(this,"click"),function(t){return i.onHelpContactUsClick(t)}),$(e.emailSelector).on(t.prototype.buildEventName.call(this,"click"),function(t){return i.onEmailClick(t)}),$(e.liveChatLinkSelector).on(t.prototype.buildEventName.call(this,"click"),function(t){return i.onLiveChatLinkClick(t)})},e.prototype.onHelpContactUsClick=function(t){var i=$(e.helpInfoSelector),o=i.attr("data-reg-showing-help");i.attr("data-reg-showing-help","true"===o?"false":"true")},e.prototype.onEmailClick=function(t){var e=$(t.target),i=e.attr("data-email"),o=e.attr("data-body"),n="mailto:"+i;return o&&o.length>0&&(n=n+"&body="+o),window.location.href=n,!1},e.prototype.onLiveChatLinkClick=function(t){var e=$(t.currentTarget),i=e.attr("data-link");return i&&i.length>0&&(window.location.href=i),!1},e.helpContactUsLinkSelector=".su-GetHelp a.su-GetHelp_Link",e.helpInfoSelector=".su-GetHelp>div.su-GetHelp_Info",e.emailSelector=".su-GetHelp div.su-GetHelp_Info>span[data-email], div[data-section='verify-your-document'] span[data-email]",e.liveChatLinkSelector=".su-GetHelp div.su-GetHelp_Info>span[data-link]",e}(t.BaseComponent);t.Help=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e,i,o){var n=t.call(this,"InactivityTimeout")||this;return n.httpService=e,n.terminateSessionService=i,n.errorHandlingService=o,n}return __extends(e,t),e.prototype.initialise=function(){$("#inactivity").length&&this.initialiseInactivityChecks()},e.prototype.initialiseInactivityChecks=function(){var t=this,e=Number($("#millisecondsRemaining").val());this.checkUrl=$("#checkInactivityUrl").val(),this.redirectUrl=$("#inactivityTimeoutUrl").val(),window.setTimeout(function(){return t.checkInactivityTimeout()},e)},e.prototype.checkInactivityTimeout=function(){var t=this;this.httpService.get(this.checkUrl,{},function(e){return t.onSuccess(e)},function(){return t.onFail()})},e.prototype.onSuccess=function(t){var e=this,i=new DOMParser,o=i.parseFromString(t,"text/xml"),n=o.childNodes[0];if(n){var r=n.childNodes[1];if(r){var a=Number(r.childNodes[3].textContent);if(a<=0)this.terminateSessionService.terminateSession(),window.location.href=this.redirectUrl;else{var s=1e3*a;window.setTimeout(function(){return e.checkInactivityTimeout()},s)}}}},e.prototype.onFail=function(){this.errorHandlingService.redirectToErrorPage()},e}(t.BaseComponent);t.InactivityTimeout=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e,i,o){var n=t.call(this,"InformationBox")||this;return n.jsonParser=i,n.validationService=o,n.isIe9AndBelow=e.isIe9AndBelow(),n}return __extends(e,t),e.prototype.initialise=function(){this.initialiseInformationBox()},e.prototype.destroy=function(){$(e.infoIconSelector).off(t.prototype.buildEventName.call(this,"click")).off(t.prototype.buildEventName.call(this,"mouseover")).off(t.prototype.buildEventName.call(this,"mouseout")).off(t.prototype.buildEventName.call(this,"blur.infoIcon")).off(t.prototype.buildEventName.call(this,this.getTouchEvent())).off("blur.infoIconHost"),$(document).off(t.prototype.buildEventName.call(this,"click"))},e.prototype.initialiseInformationBox=function(){var i=this,o=$(e.informationTextHiddenFieldSelector);this.initialiseInfoIcons(o),this.isIe9AndBelow&&($(e.infoIconSelector).on(t.prototype.buildEventName.call(this,"mouseover"),function(t){return i.onMouseOver(t)}),$(e.infoIconSelector).on(t.prototype.buildEventName.call(this,"mouseout"),function(t){return i.onMouseOut(t)})),$(e.infoIconSelector).on(t.prototype.buildEventName.call(this,this.getTouchEvent()),function(t){return i.onInfoIconClick(t)}),$(e.infoIconSelector).on("blur.infoIcon",function(t){return i.onInfoIconBlur(t)})},e.prototype.initialiseInfoIcons=function(t){for(var i=0;i<t.length;i++){var o=$(t[i]);if(o.val().length>0){var n=o.parent();n.prepend(e.infoIconTemplate),n.append(e.asideTemplate.replace("[infotext]",this.getInfoTextHtml(o)))}}},e.prototype.onInfoIconClick=function(t){var e=this;this.unHighlightInformationBox($(".su-FieldNotes_Info"));var i=$(t.target),o=i.parent().parent().find(".su-Information.su-InformationAlt"),n="false"===o.attr("aria-hidden");n||($("a.su-FieldNotes_Info").parent().parent().find(".su-Information.su-InformationAlt").attr("aria-hidden","true"),this.highlightInformationBox(i)),o.attr("aria-hidden",n.toString()),this.bindDocumentEvent(!n);var r=i.siblings(".flexiField_Input");r.on("blur.infoIconHost",function(t){return e.onInfoIconHostBlur(t)}),this.isIe9AndBelow||r.focus(),t.preventDefault()},e.prototype.onOutsideInfoBoxClick=function(t){var e=$(t.target);if(!(e.is(".su-Information_Text")||e.is(".su-Information_Content")||e.is(".su-FieldNotes_Info"))||"blur"===t.type){var i=$("aside.su-Information.su-InformationAlt[aria-hidden='false']");i.attr("aria-hidden","true"),this.unHighlightInformationBox($("a.su-FieldNotes_Info")),this.bindDocumentEvent(!1)}},e.prototype.onInfoIconBlur=function(t){var e=$(t.target),i=e.parent().siblings(".su-Information.su-InformationAlt");i.attr("aria-hidden","true"),this.unHighlightInformationBox(e),this.bindDocumentEvent(!1)},e.prototype.onInfoIconHostBlur=function(t){var i=$(t.target),o=i.parent().siblings(".su-Information.su-InformationAlt");o.attr("aria-hidden","true"),i.off("blur.infoIconHost");var n=i.siblings(e.infoIconSelector);this.unHighlightInformationBox(n)},e.prototype.onMouseOver=function(t){var e=$(t.target);this.isHighlighted(e)||this.highlightInformationBox(e)},e.prototype.onMouseOut=function(t){var e=$(t.target),i=e.parent().parent().find(".su-Information.su-InformationAlt");"true"===i.attr("aria-hidden")&&this.unHighlightInformationBox(e)},e.prototype.bindDocumentEvent=function(t){var e=this;t?$(document).on(this.getTouchEvent(),function(t){return e.onOutsideInfoBoxClick(t)}):$(document).off(this.getTouchEvent())},e.prototype.getInfoTextHtml=function(t){var e="",i=this.jsonParser.parse(t.val());if(i.isSuccess())for(var o=i.result(),n=0;n<o.length;n++)e+="<div>"+o[n]+"</div>";return e},e.prototype.highlightInformationBox=function(t){t.addClass(e.infoIconHighlightClass)},e.prototype.unHighlightInformationBox=function(t){t.removeClass(e.infoIconHighlightClass)},e.prototype.isHighlighted=function(t){return t.hasClass(e.infoIconHighlightClass)},e.prototype.getTouchEvent=function(){return"true"===$("body").attr("data-is-mobile")?"touchstart":"mousedown"},e.infoIconTemplate="<a class='su-FieldNotes_Info su-FieldNotes_InfoAbs' tabindex='9999'></a>",e.asideTemplate="<aside class='su-Information su-InformationAlt' aria-hidden='true'><div class='su-Information_Content'><div class='su-Information_Text'>[infotext]</div></div></aside>",e.infoIconSelector="a.su-FieldNotes_Info.su-FieldNotes_InfoAbs",e.informationTextHiddenFieldSelector="input[type='hidden']#InformationText",e.infoIconHighlightClass="su-FieldNotes_Info_Highlight",e}(t.BaseComponent);t.InformationBox=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this,"LegendComponent")||this;return e.showHybridCss="true"===$("body").data("show-hybrid-css").toLowerCase(),e.legendSelector="legend",e}return __extends(e,t),e.prototype.initialise=function(){this.showHybridCss||$(this.legendSelector).each(function(t,e){$(e).attr("align","center")})},e}(t.BaseComponent);t.LegendComponent=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this,"LightBox")||this;return i.lightBoxService=t,i}return __extends(i,e),i.prototype.initialise=function(){this.initialiseShowLinks(),this.initialiseOnLoadState()},i.prototype.destroy=function(){$(i.linkClassName).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.initialiseShowLinks=function(){var t=this;$(i.linkClassName).on(e.prototype.buildEventName.call(this,"click"),function(e){return t.onShowClicked(e)})},i.prototype.initialiseOnLoadState=function(){$("[data-control='"+i.lightBoxControlName+"']").hide()},i.prototype.onShowClicked=function(e){var i=$(e.target).data("url");this.lightBoxService.show(t.Enums.LightBoxEventSource[i])},i.lightBoxControlName="lightBox",i.linkClassName=".lightBoxLink",i}(e.BaseComponent);e.LightBox=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this,"MsiExplorer")||this;return i.userAgent=t,i.indicatorSelector="fieldset input, fieldset select",i}return __extends(i,e),i.prototype.initialise=function(){this.initialiseForIe9AndBelow(),this.initialiseForPokerClient()},i.prototype.destroy=function(){$(this.indicatorSelector).off(e.prototype.buildEventName.call(this,"focus")).off(e.prototype.buildEventName.call(this,"blur"))},i.prototype.initialiseFor=function(t){var i=this.userAgent.isIe9AndBelow();i&&t.find("select, input").on(e.prototype.buildEventName.call(this,"focus"),this.onFocus).on(e.prototype.buildEventName.call(this,"blur"),this.onBlur)},i.prototype.componentName=function(){return t.Enums.ComponentName.MsiExplorer},i.prototype.initialiseForIe9AndBelow=function(){var t=this.userAgent.isIe9AndBelow();$("body").attr("data-ie9AndBelow",t.toString()),t&&($(this.indicatorSelector).on(e.prototype.buildEventName.call(this,"focus"),this.onFocus).on(e.prototype.buildEventName.call(this,"blur"),this.onBlur),$("#Country").focus())},i.prototype.initialiseForPokerClient=function(){var t=this.userAgent.isPokerClient();t&&$("body").attr("data-isPokerClient","true")},i.prototype.onFocus=function(t){var e=$(t.target);e.is("select")?e.find("+div").addClass("indicator"):e.find("+span+div, +div").addClass("indicator")},i.prototype.onBlur=function(t){var e=$(t.target);e.is("select")?e.find("+div").removeClass("indicator"):e.find("+span+div, +div").removeClass("indicator")},i}(e.BaseComponent);e.MsiExplorer=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e,i){var o=t.call(this,"OpenWindow")||this;return o.logger=e,o.userAgent=i,o.newHeight=800,o.newWidth=1075,o.version2Point5Height=735,o.version2Point5Width=828,o}return __extends(e,t),e.prototype.initialise=function(){this.isMobile=!!$("body").data("is-mobile"),this.isDesktop=!!$("body").data("is-desktop"),this.showHybridCss="true"===$("body").data("show-hybrid-css").toLowerCase(),this.setNewHeightAndWidthIfDeskTopAndHybridCss(),this.resizeWindowAndCentreWindow()},e.prototype.resizeWindowAndCentreWindow=function(){var t=this,e=100,i=this.userAgent.isIe9AndBelow()?e:1;if(!this.isMobile)try{setTimeout(function(){t.centreWindow(),window.resizeTo(t.newWidth,t.newHeight)},i)}catch(t){}},e.prototype.centreWindow=function(){var t=screen.width/2-this.newWidth/2,e=screen.height/2-this.newHeight/2;this.userAgent.isMozillaFirefox()||window.screenX&&window.screenX>=screen.width&&(t+=window.screenX),window.moveTo(t,e)},e.prototype.setNewHeightAndWidthIfDeskTopAndHybridCss=function(){this.isDesktop&&this.showHybridCss&&(this.newHeight=this.version2Point5Height,this.newWidth=this.version2Point5Width)},e.prototype.canReinitialise=function(){return!1},e}(t.BaseComponent);t.OpenWindow=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var i=e.call(this,"PopupWindow")||this,o=t.Core.Ioc.OpenAccountContainer.container;return i.sessionSaveFormService=o.resolve("ISessionSaveFormService"),i}return __extends(i,e),i.prototype.initialise=function(){this.initialiseShowLinks()},i.prototype.destroy=function(){$(i.linkClassName).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.initialiseShowLinks=function(){var t=this;$(i.linkClassName).on(e.prototype.buildEventName.call(this,"click"),function(e){return t.onShowClicked(e)})},i.prototype.onShowClicked=function(t){this.sessionSaveFormService.saveForm();var e=$(t.target).data("url");e&&e.length>0&&this.createPopupWindow(e,i.windowName,i.defaultWidth,i.defaultHeight)},i.prototype.createPopupWindow=function(t,e,i,o){var n=window.open(t,e,"width="+i+", height="+o+", status=yes, toolbar=no, menubar=no, location=no, scrollbars=yes, resizable=yes");
window.focus&&n.focus()},i.linkClassName=".popupWindowLink",i.defaultHeight=650,i.defaultWidth=799,i.windowName="bet365_help_window",i}(e.BaseComponent);e.PopupWindow=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var i=e.call(this,"PrePopulation")||this;i.dropdownSelector="select[data-selected-value]";var o=t.Core.Ioc.OpenAccountContainer.container;return i.flexiLabelService=o.resolve("IFlexiLabelService"),i}return __extends(i,e),i.prototype.initialise=function(){this.prePopulateDropdowns(),this.resetFlexiLabels()},i.prototype.prePopulateDropdowns=function(){$(this.dropdownSelector).each(function(t,e){var i=$(e).data("selected-value");""!==i&&$(e).val(i)})},i.prototype.resetFlexiLabels=function(){for(var e=$(t.Keys.FlexiLabelKeys.InputSelector).not(t.Keys.FlexiLabelKeys.SelectDateControl),i=0;i<e.length;i++)this.flexiLabelService.applyFlexiLabel($(e[i]))},i}(e.BaseComponent);e.PrePopulation=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i){var o=e.call(this,"RadioComponent")||this;return o.userAgent=t,o.validationService=i,o.hitAreaSelector="div[data-control='radiocomponent']",o.radioButtonSelector="div[data-control='radiocomponent'] div.hitAreaRadio",o.radioComponentSelector="div[data-control='radiocomponent']",o}return __extends(i,e),i.prototype.initialise=function(){var t=this;this.initialiseBrowserSpecificChanges();var i=$(this.hitAreaSelector);"true"===$("body").attr("data-is-mobile")?(i.on(e.prototype.buildEventName.call(this,"touchend"),function(e){return t.toggleState(e)}),i.on(e.prototype.buildEventName.call(this,"click"),function(e){return t.toggleState(e)})):i.on(e.prototype.buildEventName.call(this,"click"),function(e){return t.toggleState(e)}),i.on(e.prototype.buildEventName.call(this,"keypress"),function(e){return t.onKeyPress(e)});var o=$(this.radioButtonSelector);"true"===$("body").attr("data-is-mobile")?(o.on(e.prototype.buildEventName.call(this,"focus"),function(e){return t.radioButtonFocus(e)}),o.on(e.prototype.buildEventName.call(this,"blur"),function(e){return t.radioButtonBlur(e)})):(o.on(e.prototype.buildEventName.call(this,"focus"),function(e){return t.radioButtonFocus(e)}),o.on(e.prototype.buildEventName.call(this,"blur"),function(e){return t.radioButtonBlur(e)}))},i.prototype.destroy=function(){$(this.hitAreaSelector).off(e.prototype.buildEventName.call(this,"click")).off(e.prototype.buildEventName.call(this,"keypress")).off(e.prototype.buildEventName.call(this,"focus")).off(e.prototype.buildEventName.call(this,"blur")).off(e.prototype.buildEventName.call(this,"touchend"))},i.prototype.toggleState=function(t){var e,i=t.currentTarget.querySelectorAll(".hitAreaRadio")[0],o=i.getAttribute("groupname"),n=i.getAttribute("name"),r=$("input[name='PhoneNumber']"),a=$("input[name='EmailAddress']");$(i).addClass("touched"),$("div[groupname="+o+"]").addClass("off").removeClass("on").removeClass("errorradio").removeClass("focusradio").addClass("touched"),$("div[name="+n+"]").addClass("on").removeClass("errorradio").removeClass("off"),"TextMessageYes"===n?(r.attr("data-force-remote-validation",""),e=this.validationService.validate($(r)),e.isValid||(r.addClass("gdpr"),this.validationService.showValidationMessage(r,e))):"TextMessageNo"===n&&(r.attr("data-force-remote-validation",""),e=this.validationService.validate($(r)),e.isValid?this.validationService.hideValidationMessage(r):this.validationService.showValidationMessage(r,e)),"EmailMessageYes"===n?(e=this.validationService.validate($(a)),e.isValid||this.validationService.showValidationMessage(a,e)):"EmailMessageNo"===n&&this.validationService.hideValidationMessage(a),t.preventDefault(),t.stopPropagation()},i.prototype.radioButtonBlur=function(t){$(t.currentTarget).hasClass("on")||$(t.currentTarget).removeClass("focusradio").removeClass("errorradio").addClass("off"),$(t.currentTarget).addClass("touched");var e,i=["Notification","TextMessage","Email","WebMessage"];if($(t.currentTarget).hasClass("hitAreaRadio"))for(var o=0;o<i.length;o++)e=$("div[groupname ='"+i[o]+"']"),e[0].getAttribute("class").indexOf("touched")!==-1&&e[1].getAttribute("class").indexOf("touched")!==-1&&(e.hasClass("on")||e.addClass("errorradio"))},i.prototype.radioButtonFocus=function(t){($(t.currentTarget).hasClass("off")||$(t.currentTarget).hasClass("errorradio"))&&$(t.currentTarget).removeClass("off").removeClass("errorradio").addClass("focusradio")},i.prototype.onKeyPress=function(e){var i=e.which||e.keyCode;i!==t.Enums.KeyCode.Enter&&i!==t.Enums.KeyCode.Spacebar||this.toggleState(e)},i.prototype.initialiseBrowserSpecificChanges=function(){this.initialiseFor8(),this.initialiseForIe9AndAbove()},i.prototype.initialiseForIe9AndAbove=function(){this.userAgent.isIe()&&!this.isIe8()&&$(this.radioComponentSelector+" > div").append("<parentfocus></parentfocus>")},i.prototype.initialiseFor8=function(){this.isIe8()&&$(this.radioComponentSelector+" > div").append("<span></span>")},i.prototype.isIe8=function(){return $("body").hasClass("ie8")},i.prototype.bindDocumentEvent=function(t){var i=this;t?$(document).on(e.prototype.buildEventName.call(this,"click"),function(t){return i.onOutsideRadioComponentClick(t)}):$(document).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.onOutsideRadioComponentClick=function(t){var e=$(t.currentTarget);e.hasClass("hitAreaRadio")&&!$.contains($(".hitAreaRadio")[0],e[0])||($(this.radioComponentSelector+" .hitAreaRadio").removeClass("focusin"),this.bindDocumentEvent(!1))},i}(e.BaseComponent);e.RadioComponent=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this,"SetCountryChangeFocus")||this;return t.focusElement="fieldset[data-section='personal-information']",t.storageKey="IsCountryChange",t}return __extends(i,e),i.prototype.initialise=function(){this.setFocus()},i.prototype.setFocus=function(){var e=this;if(window.sessionStorage&&"1"===sessionStorage.getItem(this.storageKey)){var i=t.Core.Ioc.OpenAccountContainer.container,o=i.resolve("IUserAgent");sessionStorage.removeItem(this.storageKey),o.isIos()||setTimeout(function(){$(e.focusElement).find("input, select").first().focus()},0)}},i.prototype.canReinitialise=function(){return!1},i}(e.BaseComponent);e.SetCountryChangeFocus=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this,"TestHarness")||this}return __extends(e,t),e.prototype.initialise=function(){this.initializeTestHarnessLabels(),this.initialiseShowHide(),this.initialiseDebuggerTools()},e.prototype.destroy=function(){$("div.test-herness>.test-harness-link").off(t.prototype.buildEventName.call(this,"click")),$("#Country").off(t.prototype.buildEventName.call(this,"change")),$("#TimeZone").off(t.prototype.buildEventName.call(this,"change")),$("#OddsType").off(t.prototype.buildEventName.call(this,"change"))},e.prototype.initializeTestHarnessLabels=function(){this.initialiseTestHarnessPopup(),this.initialiseDropDown("Country","testCountrySelected"),this.initialiseDropDown("TimeZone","testTimeZoneSelected"),this.initialiseDropDown("OddsType","testOddsTypeSelected")},e.prototype.initialiseTestHarnessPopup=function(){$("div.test-herness>.test-harness-link").off(t.prototype.buildEventName.call(this,"click")),$("div.test-harness>.test-harness-link").on(t.prototype.buildEventName.call(this,"click"),function(){$("div.test-harness>.test-harness-popup").toggle()})},e.prototype.initialiseDropDown=function(e,i){var o=$("#"+e),n=function(){var t=o.find(":selected");$("#"+i).text(t.val()+", "+t.text())};n(),o.on(t.prototype.buildEventName.call(this,"change"),function(){return n()})},e.prototype.initialiseShowHide=function(){var e=this;$(".test-harness-showhide").on(t.prototype.buildEventName.call(this,"click"),function(){return e.showHideTestHarness()})},e.prototype.showHideTestHarness=function(){$("div.test-harness>.test-harness-popup").hide()},e.prototype.initialiseDebuggerTools=function(){$("#show-json-data").on(t.prototype.buildEventName.call(this,"click"),function(){$("#showJsondata").toggle()}),$("#show-ajax-error").on(t.prototype.buildEventName.call(this,"click"),function(){$("#showAjaxError").toggle()})},e}(t.BaseComponent);t.TestHarness=e}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e){this.eventNamespace=t,this.validationService=e}return t.prototype.triggerEventValidation=function(t){var e=this.validationService.validate(t),i=t.is("select#DateOfBirthYear")||t.is("select#DateOfIssueYear")?t:$(e.controlId);e.isValid?this.validationService.hideValidationMessage(i):this.validationService.showValidationMessage(i,e),this.validationService.getValidationContainer(i).find("aside").attr("data-has-focus","false")},t.prototype.buildEventName=function(t){return t+"."+this.eventNamespace},t}();t.BaseValidationProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.clear=function(t){},t.prototype.initialise=function(t){this.appendValidationContainer(t),this.appendAdditionalMessageTemplate(t)},t.prototype.appendValidationContainer=function(e){var i=e.find(t.allValidationControlSelector).not("select[data-val-pleaseselectdate]").parent().parent(),o=e.find(t.validatableCheckComponentSelector).parent().parent().parent(),n=e.find(t.validatableRadioComponentSelector).parent().parent().parent().parent(),r=$(t.timeLivedSelectcor),a=e.find(t.findAddressSelector).parent().parent();this.addTemplate(i,t.fieldValidationTemplate,t.validationContainerClass),this.addTemplate(o,t.fieldValidationTemplate,t.validationContainerClass),this.addTemplate(n,t.fieldValidationTemplate,t.validationContainerClass),this.addTemplate(r,t.fieldValidationTemplate,t.validationContainerClass),this.addTemplate(a,"<div>"+t.fieldValidationTemplate+"<div>",t.validationContainerClass,"prepend")},t.prototype.appendAdditionalMessageTemplate=function(e){var i=e.find("[data-val-additionalmessage]").parent().parent().find(".su-FlexiField_Validation_Container");this.addTemplate(i,t.fieldValidationAddionalMessageTemplate,t.additionalMessageClass)},t.prototype.addTemplate=function(t,e,i,o){void 0===o&&(o="append");for(var n=0;n<t.length;n++){var r=$(t[n]);r.html()&&r.html().indexOf(i)===-1&&("append"===o?r.append(e):r.prepend(e))}},t.allValidationControlSelector="input[data-val='true'],select[data-val='true']",t.validatableCheckComponentSelector="div[data-val='true'].hitArea",t.validatableRadioComponentSelector="div[data-val='true'].hitAreaRadio",t.findAddressSelector="button[data-val-findaddress]",t.timeLivedSelectcor="div#TimeLived",t.validationContainerClass="su-FlexiField_Validation_Container",t.fieldValidationTemplate='<div class="su-FlexiField_Validation_Container"><span class="su-FlexiField_Validation"></span></div>',t.fieldValidationAddionalMessageTemplate='<aside data-has-messages="false" data-has-focus="false" class="su-FlexiField_Validation_AdditionalMessage"><div class="su-FlexiField_Validation_AdditionalMessage_Content"><div></div></div></aside>',t.additionalMessageClass="su-FlexiField_Validation_AdditionalMessage",t}();t.TemplateProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.clear=function(t){},t.prototype.initialise=function(t){this.setFixedLengthLimitations(t)},t.prototype.setFixedLengthLimitations=function(e){e.find(t.fixedLengthControlsSelector).each(function(t,e){var i=$(e),o=i.data("val-fixedlength-size");i.attr("maxlength",o)})},t.fixedLengthControlsSelector="input[data-val-fixedlength]",t}();t.FixedLengthProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.clear=function(t){},t.prototype.initialise=function(t){this.setMaxLengthLimitations(t)},t.prototype.setMaxLengthLimitations=function(e){e.find(t.maxLengthControlsSelector).each(function(t,e){var i=$(e),o=i.data("val-characterlimit-maxuserinput");i.attr("maxlength",o)})},t.maxLengthControlsSelector="input[data-val-characterlimit]",t}();t.MaxLengthProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.clear=function(e){e.find(t.additionalMessageCloseSelector).off("click.AdditionalMessageOnCloseProcessor")},t.prototype.initialise=function(e){var i=this;e.find(t.additionalMessageCloseSelector).on("click.AdditionalMessageOnCloseProcessor",function(t){return i.onClick(t)})},t.prototype.onClick=function(t){$(t.target).parent().parent().attr("data-has-focus","false")},t.additionalMessageCloseSelector=".su-FlexiField_Validation_AdditionalMessage_Content>div",t}();t.AdditionalMessageOnCloseProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e){return t.call(this,"Validation.OnBlurProcessor",e)||this}return __extends(e,t),e.prototype.clear=function(i){i.find(e.onBlurAndOnFocusControlSelector).off(t.prototype.buildEventName.call(this,"blur"))},e.prototype.initialise=function(i){var o=this;i.find(e.onBlurAndOnFocusControlSelector).on(t.prototype.buildEventName.call(this,"blur"),function(t){return o.onBlur(t)})},e.prototype.onBlur=function(e){var i=$(e.target);"true"!==i.data("ignore-blur")&&t.prototype.triggerEventValidation.call(this,i)},e.onBlurAndOnFocusControlSelector="input[data-val-required-onblur],select[data-val-pleaseselect-onblur],input[data-val-regex-onblur],select[data-val-pleaseselectdate-onblur],input[data-val-fixedlength-onblur],input[data-val-pinregexfourdigitpinconsecutive-onblur],input[data-val-confirm-onblur],input[data-val-pinregexfourdigitpinrepeating-onblur],input[data-val-pleaseselectdate-onblur],button[data-val-timelived-onblur],input[data-val-identitynumber-onblur],div[data-val-requiredcheckcomponent-onblur],input[data-val-uniqueaddressfields-onblur],input[data-val-nienumber-onblur],input[data-val-EstoniaPic-onblur]",e}(t.BaseValidationProcessor);t.OnBlurProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e){return t.call(this,"Validation.OnChangeProcessor",e)||this}return __extends(e,t),e.prototype.clear=function(i){i.find(e.onChangeControlSelector).off(t.prototype.buildEventName.call(this,"change"))},e.prototype.initialise=function(i){var o=this;i.find(e.onChangeControlSelector).on(t.prototype.buildEventName.call(this,"change"),function(t){return o.onChange(t)})},e.prototype.onChange=function(e){var i=$(e.currentTarget);t.prototype.triggerEventValidation.call(this,i)},e.onChangeControlSelector="select[data-val-pleaseselect-onchange]",e}(t.BaseValidationProcessor);t.OnChangeProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e){return t.call(this,"Validation.OnClickProcessor",e)||this}return __extends(e,t),e.prototype.clear=function(i){i.find(e.onCheckClickControlSelector).off(t.prototype.buildEventName.call(this,"click")),i.find(e.onRadioClickControlSelector).off(t.prototype.buildEventName.call(this,"click"))},e.prototype.initialise=function(i){var o=this;i.find(e.onCheckClickControlSelector).on(t.prototype.buildEventName.call(this,"click"),function(t){return o.onClick(t)}),i.find(e.onRadioClickControlSelector).on(t.prototype.buildEventName.call(this,"click"),function(t){return o.onClick(t)})},e.prototype.onClick=function(e){var i=$(e.currentTarget);t.prototype.triggerEventValidation.call(this,i)},e.onCheckClickControlSelector="div[data-val-requiredcheckcomponent-onclick]",e.onRadioClickControlSelector="div[data-val-requiredradiocomponent-onclick]",e}(t.BaseValidationProcessor);t.OnClickProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e){return t.call(this,"Validation.OnFocusProcessor",e)||this}return __extends(e,t),e.prototype.clear=function(i){i.find(e.onFocusControlSelector).off(t.prototype.buildEventName.call(this,"focus"))},e.prototype.initialise=function(i){var o=this;i.find(e.onFocusControlSelector).on(t.prototype.buildEventName.call(this,"focus"),function(t){return o.onFocus(t)})},e.prototype.onFocus=function(t){this.validationService.getValidationContainer($(t.target)).find("aside").attr("data-has-focus","true")},e.onFocusControlSelector="input[data-val-required-onblur],select[data-val-pleaseselect-onblur],input[data-val-regex-onblur],select[data-val-pleaseselectdate-onblur],input[data-val-fixedlength-onblur],input[data-val-pinregexfourdigitpinconsecutive-onblur],input[data-val-confirm-onblur],input[data-val-pinregexfourdigitpinrepeating-onblur],input[data-val-pleaseselectdate-onblur],button[data-val-timelived-onblur],input[data-val-identitynumber-onblur],button[data-val-findaddress-onblur],div[data-val-requiredcheckcomponent-onblur],input[data-val-uniqueaddressfields-onblur],input[data-val-nienumber-onblur]",e}(t.BaseValidationProcessor);t.OnFocusProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(t){return e.call(this,"Validation.onKeyPressControlSelector",t)||this}return __extends(i,e),i.prototype.clear=function(t){t.find(i.onKeyPressControlSelector).off(e.prototype.buildEventName.call(this,"keypress")),t.find(i.onRadioKeyPressControlSelector).off(e.prototype.buildEventName.call(this,"keypress"))},i.prototype.initialise=function(t){var o=this;t.find(i.onKeyPressControlSelector).on(e.prototype.buildEventName.call(this,"keypress"),function(t){return o.onKeyPress(t)}),t.find(i.onRadioKeyPressControlSelector).on(e.prototype.buildEventName.call(this,"keypress"),function(t){return o.onKeyPress(t)})},i.prototype.onKeyPress=function(i){var o=i.which||i.keyCode;o!==t.Enums.KeyCode.Enter&&o!==t.Enums.KeyCode.Spacebar||e.prototype.triggerEventValidation.call(this,$(i.currentTarget))},i.onKeyPressControlSelector="div[data-val-requiredcheckcomponent-onkeypress]",i.onRadioKeyPressControlSelector="div[data-val-requiredradiocomponent-onkeypress]",i}(e.BaseValidationProcessor);e.OnKeyPressProcessor=i}(i=e.Component||(e.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.clear=function(e){e.find(t.dateContainerSelector).off("focusout.DateContainerOnFocusOutProcessor")},t.prototype.initialise=function(e){var i=this;e.find(t.dateContainerSelector).on("focusout.DateContainerOnFocusOutProcessor",function(t){return i.onDateContainerFocusOut(t)})},t.prototype.onDateContainerFocusOut=function(t){if(!$(t.currentTarget).data("set-day")||!$(t.currentTarget).data("set-month")||!$(t.currentTarget).data("set-year")){for(var e=$(t.currentTarget).children().children().children("select"),i=!1,o=0;o<e.length;o++)$(e[o]).get(0)===$(t.relatedTarget).get(0)&&(i=!0);i||($(t.currentTarget).attr("data-set-day","true"),$(t.currentTarget).attr("data-set-month","true"),$(t.currentTarget).attr("data-set-year","true"))}},t.dateContainerSelector="div.date-fallback",t}();t.DateContainerOnFocusOutProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e){return t.call(this,"Validation.FindAddressContainerOnFocusOutProcessor",e)||this}return __extends(e,t),e.prototype.clear=function(i){i.find(e.addressPreSearchSelector).off(t.prototype.buildEventName.call(this,"focusout")),i.find(e.addressButtonSelector).off(t.prototype.buildEventName.call(this,"touchstart"))},e.prototype.initialise=function(i){var o=this;i.find(e.addressPreSearchSelector).on(t.prototype.buildEventName.call(this,"focusout"),function(t){return o.onFindAddressContainerFocusOut(t)}),i.find(e.addressButtonSelector).on(t.prototype.buildEventName.call(this,"touchstart"),function(t){return o.onFindAddressButtonTouch(t)})},e.prototype.onFindAddressButtonTouch=function(t){this.buttonRelatedTarget=t.target},e.prototype.onFindAddressContainerFocusOut=function(i){var o=$(e.addressPreSearchSelector).parent();this.buttonRelatedTarget||(this.buttonRelatedTarget=i.relatedTarget||i.originalEvent.toElement||i.currentTarget);var n=o.find(e.addressButtonSelector);if(n.length>0&&this.validateDependencies()){n.removeAttr("data-animation");var r=o.has(this.buttonRelatedTarget);(!this.buttonRelatedTarget||r.length<=0)&&t.prototype.triggerEventValidation.call(this,n)}this.buttonRelatedTarget=null},e.prototype.validateDependencies=function(){var t=$(e.addressSearchInputs),i=!0;return this.validationService.validateForm(t).forEach(function(t){t.isValid||(i=!1)}),i},e.addressPreSearchSelector="div#AddressPreSearch:not([tabindex]), div#AddressPreSearch:visible",e.addressButtonSelector="button[data-val-findaddress]:visible",e.addressSearchInputs="div#AddressPreSearch:visible input[data-val]:visible",e}(t.BaseValidationProcessor);t.FindAddressContainerOnFocusOutProcessor=e}(e=t.Component||(t.Component={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i){var o=e.call(this,"Validation")||this;return o.clientValidationEnabled=t,o.validationService=i,o.registerProcessors(),o}return __extends(i,e),i.prototype.initialise=function(){this.doInitialise(i.defaultContainer)},i.prototype.destroy=function(){this.clear(i.defaultContainer)},i.prototype.initialiseFor=function(t){this.clear(t),this.doInitialise(t)},i.prototype.componentName=function(){return t.Enums.ComponentName.Validation},i.prototype.clear=function(t){this.processors.forEach(function(e){return e.clear(t)})},i.prototype.doInitialise=function(t){this.clientValidationEnabled&&(this.processors.forEach(function(e){return e.initialise(t)}),this.validationService.reinitialise(t))},i.prototype.registerProcessors=function(){this.processors=new Array,this.processors.push(new t.Processors.Component.TemplateProcessor),this.processors.push(new t.Processors.Component.FixedLengthProcessor),this.processors.push(new t.Processors.Component.MaxLengthProcessor),this.processors.push(new t.Processors.Component.AdditionalMessageOnCloseProcessor),this.processors.push(new t.Processors.Component.OnBlurProcessor(this.validationService)),this.processors.push(new t.Processors.Component.OnChangeProcessor(this.validationService)),this.processors.push(new t.Processors.Component.OnClickProcessor(this.validationService)),this.processors.push(new t.Processors.Component.OnFocusProcessor(this.validationService)),this.processors.push(new t.Processors.Component.OnKeyPressProcessor(this.validationService)),this.processors.push(new t.Processors.Component.DateContainerOnFocusOutProcessor),this.processors.push(new t.Processors.Component.FindAddressContainerOnFocusOutProcessor(this.validationService))},i.defaultContainer=$("body"),i}(e.BaseComponent);e.Validation=i}(e=t.Components||(t.Components={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.createAjaxPostHeadersWithAntiForgeryToken=function(){var t={__RequestVerificationToken:this.getAntiForgeryToken()};return t},t.getAntiForgeryToken=function(){return $("[name=__RequestVerificationToken]").val()},t}();t.AntiForgery=e}(e=t.Core||(t.Core={}))}(Application||(Application={})),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,o=this.length;i<o;++i)t.call(e,this[i],i,this)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),n=o.length>>>0;if(0===n)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),r>=n)return-1;for(i=Math.max(r>=0?r:n-Math.abs(r),0);i<n;){if(i in o&&o[i]===t)return i;i++}return-1}),Date.prototype.toISOString||!function(){function t(t){var e=String(t);return 1===e.length&&(e="0"+e),e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),function(){var t=new Date("2011-06-02T09:34:29+02:00");t&&1307000069e3===+t?Date.fromISOString=function(t){return new Date(t)}:Date.fromISOString=function(t){var e,i,o=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,n=o.exec(t)||[];if(n[1]){e=n[1].split(/\D/);for(var r=0,a=e.length;r<a;r++)e[r]=parseInt(e[r],10)||0;return e[1]-=1,e=new Date(Date.UTC.apply(Date,e)),e.getDate()?(n[5]&&(i=60*parseInt(n[5],10),n[6]&&(i+=parseInt(n[6],10)),"+"==n[4]&&(i*=-1),i&&e.setUTCMinutes(e.getUTCMinutes()+i)),e):NaN}return NaN}}();var Application;!function(t){var e;!function(t){var e=function(){function t(){this.clear()}return t.prototype.add=function(t,e){this._keys.push(t),this._values.push(e)},t.prototype.clear=function(){this._keys=new Array,this._values=new Array},t.prototype.contains=function(t){return this._keys.indexOf(t)>-1},t.prototype.remove=function(t){var e=this._keys.indexOf(t);e>-1&&(this._keys.splice(e,1),this._values.splice(e,1))},t.prototype.keys=function(){return this._keys},t.prototype.values=function(){return this._values},t}();t.Dictionary=e}(e=t.Core||(t.Core={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.Base=0]="Base",t[t.MsiExplorer=1]="MsiExplorer",t[t.Validation=2]="Validation",t[t.FlexiLabel=3]="FlexiLabel",t[t.BulgariaTimeLivedComponent=4]="BulgariaTimeLivedComponent",t[t.CheckComponent=5]="CheckComponent",t[t.RadioComponent=6]="RadioComponent",t[t.CloseWindow=7]="CloseWindow",t[t.ContactInformation=8]="ContactInformation",t[t.GdprInformation=9]="GdprInformation",t[t.CountryOfResidence=10]="CountryOfResidence",t[t.Help=11]="Help",t[t.InformationBox=12]="InformationBox",t[t.LightBox=13]="LightBox",t[t.OpenWindow=14]="OpenWindow",t[t.Platform=15]="Platform",t[t.PopupWindow=16]="PopupWindow",t[t.Tooltip=17]="Tooltip",t[t.PrePopulation=18]="PrePopulation",t[t.DniNieNumberComponent=19]="DniNieNumberComponent",t[t.InactivityTimeoutComponent=20]="InactivityTimeoutComponent",t[t.FormStateComponent=21]="FormStateComponent",t[t.SetCountryChangeFocus=22]="SetCountryChangeFocus",t[t.DepositLimitAmountDropDown=23]="DepositLimitAmountDropDown",t[t.AnchorTagsTargetBlank=24]="AnchorTagsTargetBlank",t[t.Legend=25]="Legend"}(e=t.ComponentName||(t.ComponentName={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.NationalLevel5Validation=0]="NationalLevel5Validation",t[t.QAS=1]="QAS",t[t.AddressDoctor=2]="AddressDoctor",t[t.IACS=3]="IACS"}(e=t.CountryAddressAcceleratorLevel||(t.CountryAddressAcceleratorLevel={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.PleaseSelect=0]="PleaseSelect",t[t.Bulgaria=31]="Bulgaria",t[t.Denmark=54]="Denmark",t[t.Greenland=218]="Greenland",t[t.Italy=97]="Italy",t[t.Spain=171]="Spain",t[t.UnitedKingdom=197]="UnitedKingdom",t[t.UnitedStatesOfAmerica=198]="UnitedStatesOfAmerica",t[t.Canada=36]="Canada",t[t.France=70]="France",t[t.Guadeloupe=81]="Guadeloupe",t[t.Martinique=123]="Martinique",t[t.Reunion=239]="Reunion",t[t.FrenchGuyana=69]="FrenchGuyana",t[t.Mayotte=249]="Mayotte",t[t.WallisAndFutunaIslands=232]="WallisAndFutunaIslands",t[t.FrenchPolynesia=226]="FrenchPolynesia",t[t.NewCaledonia=137]="NewCaledonia",t[t.Malaysia=121]="Malaysia",t[t.Vietnam=204]="Vietnam",t[t.Thailand=186]="Thailand",t[t.Japan=99]="Japan",t[t.Finland=68]="Finland",t[t.Switzerland=174]="Switzerland",t[t.Liechtenstein=113]="Liechtenstein",t[t.Australia=13]="Australia",t[t.NewZealand=138]="NewZealand",t[t.Greece=78]="Greece",t[t.Ireland=95]="Ireland",t[t.Argentina=10]="Argentina",t[t.Brazil=28]="Brazil",t[t.Slovakia=172]="Slovakia",t[t.CzechRepublic=52]="CzechRepublic",t[t.Austria=14]="Austria",t[t.Mexico=126]="Mexico",t[t.Sweden=181]="Sweden",t[t.Germany=75]="Germany"}(e=t.CountryId||(t.CountryId={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.None=0]="None",t[t.TwentyFourHours=1]="TwentyFourHours",t[t.SevenDays=2]="SevenDays",t[t.ThirtyDays=3]="ThirtyDays",t[t.NoLimit=4]="NoLimit"}(e=t.DepositLimitTimePeriod||(t.DepositLimitTimePeriod={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.Show=0]="Show",t[t.Hide=1]="Hide"}(e=t.Display||(t.Display={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.Passport=1]="Passport",t[t.DrivingLicence=2]="DrivingLicence",t[t.IdentityCard=3]="IdentityCard"}(e=t.DocumentType||(t.DocumentType={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.PasswordInputEvent=0]="PasswordInputEvent",t[t.TimeLivedClickEvent=1]="TimeLivedClickEvent",t[t.SanitiseApostropheEvent=2]="SanitiseApostropheEvent",t[t.TimedUsernameValidationEvent=3]="TimedUsernameValidationEvent",t[t.PasswordValidationEvent=4]="PasswordValidationEvent",t[t.PasswordSpainUsaValidationEvent=5]="PasswordSpainUsaValidationEvent",t[t.PasswordGreeceValidationEvent=6]="PasswordGreeceValidationEvent",t[t.NationalitySetEvent=7]="NationalitySetEvent",t[t.DateInitialiseEvent=8]="DateInitialiseEvent",t[t.DocumentTypeChangeEvent=9]="DocumentTypeChangeEvent",t[t.RemoteDocumentTypeOnChangeEvent=10]="RemoteDocumentTypeOnChangeEvent",t[t.RemoteBirthOnChangeEvent=11]="RemoteBirthOnChangeEvent",t[t.ScreenResizeEvent=12]="ScreenResizeEvent",t[t.CodiceFiscaleCalculateEvent=13]="CodiceFiscaleCalculateEvent",t[t.LightBoxClickEvent=14]="LightBoxClickEvent",t[t.ClearConfirmationErrorEvent=15]="ClearConfirmationErrorEvent",t[t.PageShowEvent=16]="PageShowEvent",t[t.FindAddressButtonOnBlurEvent=17]="FindAddressButtonOnBlurEvent",t[t.PageUnloadEvent=18]="PageUnloadEvent",t[t.CreateAccountSubmitButtonClickEvent=19]="CreateAccountSubmitButtonClickEvent",t[t.CurrentFindAddressSubmitButtonClickEvent=20]="CurrentFindAddressSubmitButtonClickEvent",t[t.PreviousFindAddressSubmitButtonClickEvent=21]="PreviousFindAddressSubmitButtonClickEvent",t[t.AddressLookupLightBoxClickEvent=22]="AddressLookupLightBoxClickEvent",t[t.SpanishIdentityUpdateButtonClickEvent=23]="SpanishIdentityUpdateButtonClickEvent",t[t.DenmarkAndGreenlandIdentityUpdateButtonClickEvent=24]="DenmarkAndGreenlandIdentityUpdateButtonClickEvent",t[t.MaxLengthRestrictionEvent=25]="MaxLengthRestrictionEvent",t[t.ItalianIdentityUpdateButtonClickEvent=26]="ItalianIdentityUpdateButtonClickEvent",
t[t.AddressScrollEvent=27]="AddressScrollEvent",t[t.StateOnChangeEvent=28]="StateOnChangeEvent",t[t.HideSelectListOnDocumentTouchEvent=29]="HideSelectListOnDocumentTouchEvent",t[t.PostcodeOnBlurEvent=30]="PostcodeOnBlurEvent",t[t.PhoneNumericalRestrictionEvent=31]="PhoneNumericalRestrictionEvent",t[t.HouseNumberOnFocusEvent=32]="HouseNumberOnFocusEvent",t[t.CurrentAddressLine1OnFocusEvent=33]="CurrentAddressLine1OnFocusEvent",t[t.DepositLimitButtonDropdownClickEventDropDown=34]="DepositLimitButtonDropdownClickEventDropDown",t[t.DepositLimitkeyUpEvent=35]="DepositLimitkeyUpEvent",t[t.SelectOccupationEvent=36]="SelectOccupationEvent",t[t.TimePeriodChangeEvent=37]="TimePeriodChangeEvent",t[t.SwedishIdentityUpdateButtonClickEvent=38]="SwedishIdentityUpdateButtonClickEvent",t[t.SwedishVerificationRetryFormValidationEvent=39]="SwedishVerificationRetryFormValidationEvent",t[t.ButtonDropDownTabbingEvent=40]="ButtonDropDownTabbingEvent"}(e=t.EventName||(t.EventName={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.Enter=13]="Enter",t[t.Spacebar=32]="Spacebar",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.Escape=27]="Escape",t[t.Delete=46]="Delete",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t[t.NumberZero=47]="NumberZero",t[t.NumberNine=57]="NumberNine",t[t.NumberPadZero=96]="NumberPadZero",t[t.NumberPadNine=105]="NumberPadNine",t[t.LetterV=86]="LetterV",t[t.Hyphen=189]="Hyphen"}(e=t.KeyCode||(t.KeyCode={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.AgeVerification=0]="AgeVerification",t[t.KnowYourCustomer=1]="KnowYourCustomer",t[t.BeneficialOwnership=2]="BeneficialOwnership",t[t.SubmitErrors=3]="SubmitErrors",t[t.CreatingAccount=4]="CreatingAccount",t[t.AccountCreated=5]="AccountCreated",t[t.OnAccountCreationError=6]="OnAccountCreationError",t[t.OnCountryChange=7]="OnCountryChange",t[t.OnAddressLookup=8]="OnAddressLookup",t[t.DuplicateDetails=9]="DuplicateDetails",t[t.ItalyNoRetry=10]="ItalyNoRetry",t[t.UpdatingDetails=11]="UpdatingDetails",t[t.SelectOccupation=12]="SelectOccupation",t[t.OnUpdatingDetailsError=13]="OnUpdatingDetailsError",t[t.FundsProtection=14]="FundsProtection",t[t.UnderageDetails=15]="UnderageDetails",t[t.DeceasedDetails=16]="DeceasedDetails",t[t.VerifyingDetails=17]="VerifyingDetails",t[t.OnAccountCreationUS=18]="OnAccountCreationUS",t[t.NonResidentAlien=19]="NonResidentAlien",t[t.ProhibitedPlayer2=20]="ProhibitedPlayer2",t[t.FailedPasswordStorage=21]="FailedPasswordStorage",t[t.RussiaTax=22]="RussiaTax"}(e=t.LightBoxEventSource||(t.LightBoxEventSource={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.Left=1]="Left",t[t.Middle=2]="Middle",t[t.Right=3]="Right"}(e=t.MouseClick||(t.MouseClick={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.CloseButton=0]="CloseButton",t[t.MembersHostedInIFrame=1]="MembersHostedInIFrame",t[t.CasinoNativeAttribute=2]="CasinoNativeAttribute",t[t.LiveDealerAttribute=3]="LiveDealerAttribute",t[t.ShowDateDropdown=4]="ShowDateDropdown",t[t.BingoIosNativeAttribute=5]="BingoIosNativeAttribute",t[t.GamesAndroidNativeAttribute=6]="GamesAndroidNativeAttribute",t[t.MembersHostedInCard=7]="MembersHostedInCard"}(e=t.PlatformFeature||(t.PlatformFeature={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){t[t.None=0]="None",t[t.OpenAccountLaunched=1]="OpenAccountLaunched",t[t.AddressSearch=2]="AddressSearch",t[t.UsernameEntered=3]="UsernameEntered",t[t.FormSubmitted=4]="FormSubmitted",t[t.AccountCreationSuccess=5]="AccountCreationSuccess",t[t.FormValidationFailure=6]="FormValidationFailure",t[t.AddressSearchComplete=7]="AddressSearchComplete",t[t.AddressLookupEnterManually=8]="AddressLookupEnterManually",t[t.AddressLookupAddressSelected=9]="AddressLookupAddressSelected",t[t.AddressMultipleSelectedResult=10]="AddressMultipleSelectedResult",t[t.OpenAccountFirstLaunch=11]="OpenAccountFirstLaunch",t[t.OpenAccountClosed=12]="OpenAccountClosed"}(e=t.TrackingEvent||(t.TrackingEvent={}))}(e=t.Enums||(t.Enums={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.initialise=function(){var e=t.Core.Ioc.OpenAccountContainer.container;this.domDisplayService=e.resolve("IDomDisplayService"),this.displayAddressPostSearch()},e.prototype.displayAddressPostSearch=function(){var e=this,i=$("#hdnForceCurrentAddressDisplay");i.length>0&&"true"===i.val().toLowerCase()&&$(function(){e.domDisplayService.show($(t.Keys.AddressKeys.CurrentAddressPostSearchSelector)),e.domDisplayService.hide($(t.Keys.AddressKeys.CurrentAddressPreSearchSelector))})},e}();e.AddressDomInitialiser=i}(e=t.DomInitialisers||(t.DomInitialisers={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(t,e,i,o){this.client=t,this.userAgent=e,this.platformService=i,this.pageScroller=o}return t.prototype.initialise=function(){this.platformService.readSupportedPlatforms(),this.setIsMobile(),this.setProductAttributeIfIos(),this.setMac(),this.setRemoteFillDropDownPlaceHolderForCityOfBirthIfIPhone(),this.removeAutoFocus(),this.isAndroidTablet(),this.setIsAndroidVersionLessThan4_4()},t.prototype.setIsAndroidVersionLessThan4_4=function(){this.client.isAndroidNativeBrowserVersionLessThan4_4()&&($("body").attr("data-is-lower-android-version","true"),$(".su-Branding").css("margin-top","44px"))},t.prototype.setProductAttributeIfIos=function(){this.userAgent.isIos()&&$("body").attr("data-product",$("#product").val())},t.prototype.setRemoteFillDropDownPlaceHolderForCityOfBirthIfIPhone=function(){if(this.userAgent.isIPhone()){var t=$("#ItalySpecificArea select#CityOfBirth").parent();t.prepend("<input type='text' id='CityOfBirthPlaceHolder' style='position: absolute; left: 0; top: 0; z-index:-50' />")}},t.prototype.setMac=function(){var t=this.userAgent.userAgent(),e=/(Mac OS)/i.test(t);e&&$("body[data-is-desktop='true']").addClass("macOs")},t.prototype.setIsMobile=function(){var t=window.location.hostname.toLowerCase().indexOf("mobile")>=0||this.userAgent.isMobile(),e=!t;$("body").attr("data-is-mobile",t?"true":"false"),$("body").attr("data-is-desktop",e?"true":"false"),t?($("section.su-GetHelp span[data-email]").remove(),$("div[data-section='verify-your-document'] span[data-email]").remove(),this.setDeviceAsMobileOrTablet()):($("section.su-GetHelp span[data-email-mobile]").remove(),$("div[data-section='verify-your-document'] span[data-email-mobile]").remove(),this.setDeviceAsDesktop()),this.setupDatePicker(t)},t.prototype.setDeviceAsDesktop=function(){var t=$("section.su-GetHelp span[data-email], div[data-section='verify-your-document'] span[data-email]");t.length>0&&t.attr("data-body",t.attr("data-body").replace("[device]","Desktop"))},t.prototype.setDeviceAsMobileOrTablet=function(){var t=window.location.pathname.toLowerCase().indexOf("/members/")>=0,e=$("section.su-GetHelp span[data-email-mobile] a");e.length>0&&e.attr("href",e.attr("href").replace("[device]",t?"Tablet":"Mobile"))},t.prototype.setupDatePicker=function(t){var e=$(".date-native"),i=$(".date-fallback");this.forceDateFallback()||!t?($("div[data-section='date']>span").attr("data-for-control","dropdown").removeClass("flexiField_Label"),$("div[data-section='date']>div.date-native>input").removeClass("flexiField_Input"),i.find("select").removeAttr("type"),i.show(),e.hide(),$("body").attr("data-is-fallback-date","true")):(i.hide(),e.show(),$("body").attr("data-is-native-date","true"))},t.prototype.forceDateFallback=function(){var t=this.userAgent.isAndroid(),e=this.userAgent.isIos(),i=$("body").data("show-date-dropdown"),o=this.userAgent.isIe()&&this.userAgent.isMobile(),n=this.userAgent.isDateInputSupported();return t||e||this.userAgent.isAndroidNativeBrowser()||i||o||!n},t.prototype.removeAutoFocus=function(){$("body").attr("data-is-games-android-native","true")||$("body").attr("data-is-bingo-ios-native","true")&&/iPad|iPhone|iPod/.test(this.userAgent.userAgent())?$("#Country").removeAttr("autofocus"):$("#Country").focus()},t.prototype.isAndroidTablet=function(){$("body").data("is-mobile")&&window.location.hostname.toLowerCase().indexOf("mobile")>=0&&this.userAgent.isAndroid()&&$("body").attr("data-is-android-tablet","true")},t}();t.PlatformDomInitialiser=e}(e=t.DomInitialisers||(t.DomInitialisers={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(t,e,i){this.trackingService=t,this.addressStateHandler=e,this.auditAddressHandler=i}return e.prototype.reinitialise=function(){},e.prototype.canReinitialise=function(){return!1},e.prototype.bind=function(i){var o=this;$(t.Keys.LightBoxKeys.DynamicContentSelector+" "+e.buttonSelector).on(this.buildEventName("click"),function(t){return o.onAddressClick(t,i)}),$(t.Keys.LightBoxKeys.LightBoxSelector+" "+e.cancelSelector).on(this.buildEventName("click"),function(t){return o.onCancelClick(t,i)}),$(t.Keys.LightBoxKeys.CloseButton).on(this.buildEventName("click"),function(t){return i.onCloseClick.call(o,i)})},e.prototype.unbind=function(){$(t.Keys.LightBoxKeys.DynamicContentSelector+" "+e.buttonSelector).off(this.buildEventName("click")),$(t.Keys.LightBoxKeys.LightBoxSelector+" "+e.cancelSelector).off(this.buildEventName("click")),$(t.Keys.LightBoxKeys.CloseButton).off(this.buildEventName("click"))},e.prototype.onAddressClick=function(t,e){this.trackAddressMultipleSelectedResult(e);var i=$(t.target).parent().data("addressState");this.addressStateHandler.write(i,!1,e.isPreviousAddress,e.auditAddressAcceleratorId),this.auditAddressHandler.auditAddress(i,e.auditAddressAcceleratorId,!1),e.selectedAddress=i,e.onAddressClick.call(this,e)},e.prototype.onCancelClick=function(t,e){this.trackAddressMultipleSelectedResult(e),e.onCancelClick.call(this,e)},e.prototype.trackAddressMultipleSelectedResult=function(e){this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.AddressMultipleSelectedResult,additionalInformation:""})},e.prototype.buildEventName=function(t){return t+"."+e.eventNamespace},e.buttonSelector="div[data-control='button'] a",e.cancelSelector="div[data-control='button'] a[id$='Cancel']",e.eventNamespace="AddressLookupLightBoxClickEvent",e}();e.AddressLookupLightBoxClickEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(t){this.eventNamespace=t}return t.prototype.reinitialise=function(){},t.prototype.canReinitialise=function(){return!1},t.prototype.buildEventName=function(t){return t+"."+this.eventNamespace},t}();t.BaseEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this,"AddressScrollEvent")||this}return __extends(e,t),e.prototype.bind=function(){var e;$(".dynamicContent").on(t.prototype.buildEventName.call(this,"scroll"),function(){clearTimeout(e),$(".addressButtons").hasClass("disable-hover")||$(".addressButtons").addClass("disable-hover"),e=setTimeout(function(){$(".addressButtons").removeClass("disable-hover")},500)})},e.prototype.unbind=function(){$(".dynamicContent").off(t.prototype.buildEventName.call(this,"scroll"))},e}(t.BaseEvent);t.AddressScrollEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n,r){var a=e.call(this,t)||this;return a.clientValidationEnabled=i,a.validationService=o,a.logger=n,a.lightBoxService=r,a}return __extends(i,e),i.prototype.bind=function(){var t=this;if(this.onbind(),this.clientValidationEnabled){var i=$(this.getTriggerSelector());i.on(e.prototype.buildEventName.call(this,this.getMouseEvent()),function(e){return t.onClick(e,!1)}),i.on(e.prototype.buildEventName.call(this,this.getKeyEvent()),function(e){return t.onKeyPress(e)})}},i.prototype.unbind=function(){var t=$(this.getTriggerSelector());t.off(e.prototype.buildEventName.call(this,this.getMouseEvent())),t.off(e.prototype.buildEventName.call(this,this.getKeyEvent()))},i.prototype.canReinitialise=function(){return!0},i.prototype.onbind=function(){},i.prototype.hideValidationMessages=function(t){this.validationService.hideValidationMessage(t,!0)},i.prototype.getMouseEvent=function(){return"mouseup touchend"},i.prototype.getKeyEvent=function(){return"keypress"},i.prototype.validate=function(t){var e=this.validationService.validate(t);e.isValid||(this.validationService.showValidationMessage(t,e),$(e.controlId).attr("toFocus",""))},i.prototype.onClick=function(e,i){var o=this,n=!0;if(void 0!==$("#gdprSubmitClicked")[0]&&$("#gdprSubmitClicked")[0].setAttribute("value","true"),e.which===t.Enums.MouseClick.Left||i){this.onBeforeValidate();var r=$(this.getControlsToValidateSelector()),a=this.validationService.validateForm(r);a&&a.length>0?(n=!1,a.forEach(function(t){o.validationService.showValidationMessage($(t.controlId),t)}),this.onValidationFailure(a)):this.onValidationSuccess()}return n},i.prototype.onKeyPress=function(e){var i=e.which||e.keyCode;i!==t.Enums.KeyCode.Enter&&i!==t.Enums.KeyCode.Spacebar||(e.preventDefault(),this.onClick(e,!0))},i}(e.BaseEvent);e.BaseSubmitButtonClickEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n,r){return e.call(this,t,i,o,r,n)||this}return __extends(i,e),i.prototype.canReinitialise=function(){return!0},i.prototype.onBeforeValidate=function(){var t=$(this.getAddressPreSearchSelector()).find("button[data-val-findaddress]:visible");e.prototype.hideValidationMessages.call(this,t)},i.prototype.onValidationSuccess=function(){this.lightBoxService.show(t.Enums.LightBoxEventSource.OnAddressLookup)},i.prototype.onValidationFailure=function(t){$($(this.getAddressPreSearchSelector()).find("div[data-validation='true'] input")[0]).focus()},i}(e.BaseSubmitButtonClickEvent);e.BaseFindAddressSubmitButtonClickEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e,i,o,n,r){return t.call(this,e,i,o,r,n)||this}return __extends(e,t),e.prototype.checkResponseForError=function(t){return"object"!=typeof t?void this.onFailure(t):void this.onSuccess(t)},e}(t.BaseSubmitButtonClickEvent);t.BaseFormSubmitButtonClickEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i){var o=e.call(this,t)||this;return o.validationService=i,o}return __extends(i,e),i.prototype.bind=function(){var t=this;this.allowBind()&&this.bindToControl().on(e.prototype.buildEventName.call(this,"input"),function(e){return t.setupValidator($(e.target))})},i.prototype.unbind=function(){this.allowBind()&&this.bindToControl().off(e.prototype.buildEventName.call(this,"input"))},i.prototype.setupValidator=function(t){var e;this.validators.forEach(function(i){e&&!e.isValid||(e=i.validate(t))}),e.isValid?this.onPassedValidation(t):this.onFailedValidation(t,e)},i.prototype.isUnitedStatesOfAmerica=function(){return Number($("#Country").find(":selected").val())===t.Enums.CountryId.UnitedStatesOfAmerica},i.prototype.isSpain=function(){return Number($("#Country").find(":selected").val())===t.Enums.CountryId.Spain},i.prototype.isGreece=function(){return Number($("#Country").find(":selected").val())===t.Enums.CountryId.Greece},i.prototype.allowBind=function(){return!0},i.prototype.getTargetMinLength=function(t){var e=Number(t.attr("data-val-characterlimit-minlength"));return isNaN(e)?0:e},i}(e.BaseEvent);e.BaseValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e,i,o){var n=t.call(this,"ButtonDropDownTabbingEvent")||this;return n.client=e,n.tabbingService=i,n.pageScroller=o,n}return __extends(e,t),e.prototype.bind=function(){var e=this;$(".btnDropdownHiddenField").on(t.prototype.buildEventName.call(this,"focus"),function(t){return e.focusDropDownButton($(t.target))})},e.prototype.unbind=function(){$(".btnDropdownHiddenField").off(t.prototype.buildEventName.call(this,"focus"))},e.prototype.focusDropDownButton=function(t){if(this.client.isMobileDevice()){var e=t.attr("id"),i=$("#"+e+"_DataControl");this.tabbingService.focus(i)}},e}(t.BaseEvent);t.ButtonDropDownTabbingEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e){var i=t.call(this,"ClearConfirmationErrorEvent")||this;return i.validationService=e,i.password="#Password",i.confirmPassword="#ConfirmPassword",i.pin="#FourDigitPin",i.confirmPin="#FourDigitPinConfirmed",i}return __extends(e,t),e.prototype.bind=function(){var e=this;$(this.password).on(t.prototype.buildEventName.call(this,"blur"),function(){return e.revalidateConfirmationField(e.confirmPassword)}),$(this.pin).on(t.prototype.buildEventName.call(this,"blur"),function(){return e.revalidateConfirmationField(e.confirmPin)})},e.prototype.reinitialise=function(){this.unbind(),this.bind()},e.prototype.unbind=function(){$(this.password).off(t.prototype.buildEventName.call(this,"blur")),$(this.pin).off(t.prototype.buildEventName.call(this,"blur"))},e.prototype.canReinitialise=function(){return!0},e.prototype.revalidateConfirmationField=function(t){var e=$(t),i=this.validationService.validate(e);i.isValid?this.validationService.hideValidationMessage(e):e.val()&&this.validationService.showValidationMessage(e,i)},e}(t.BaseEvent);t.ClearConfirmationErrorEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n){var r=e.call(this,"CodiceFiscaleCalculateEvent")||this;return r.codiceFiscaleGenerator=t,r.validationService=i,r.dateService=o,r.userAgent=n,r.title="#Title",r.firstName="#FirstName",r.surname="#Surname",r.day="#DateOfBirthDay",r.month="#DateOfBirthMonth",r.year="#DateOfBirthYear",r.countryOfBirth="#CountryOfBirth",r.cityOfBirth="#CityOfBirth",r.codiceFiscaleTextbox="#CodiceFiscale",r.italyCountryCode="97_0",r}return __extends(i,e),i.prototype.bind=function(){var i=this;if(Number($("#Country").find(":selected").val())===t.Enums.CountryId.Italy){var o=e.prototype.buildEventName.call(this,"change"),n=e.prototype.buildEventName.call(this,"blur"),r=this.getDateOfBirthControl();r.is("input")?r.bind(o,function(){return i.calculateCodiceFiscale()}):($(this.day).bind(this.buildEventName(o),function(){return i.calculateCodiceFiscale()}),$(this.month).bind(o,function(){return i.calculateCodiceFiscale()}),$(this.year).bind(o,function(){return i.calculateCodiceFiscale()})),$(this.countryOfBirth).bind(n,function(){return i.calculateCodiceFiscale()}),$(this.countryOfBirth).bind(o,function(){return i.cityOfBirthChange()}),$(this.cityOfBirth).bind(o,function(){return i.calculateCodiceFiscale()}),$(this.title).bind(o,function(){return i.calculateCodiceFiscale()}),$(this.firstName).bind(n,function(){return i.calculateCodiceFiscale()}),$(this.surname).bind(n,function(){return i.calculateCodiceFiscale()})}else this.unbind()},i.prototype.unbind=function(){var t=e.prototype.buildEventName.call(this,"change"),i=e.prototype.buildEventName.call(this,"blur");this.getDateOfBirthControl().unbind(t),$(this.day).unbind(t),$(this.month).unbind(t),$(this.year).unbind(t),$(this.countryOfBirth).unbind(i),$(this.countryOfBirth).unbind(t),$(this.cityOfBirth).unbind(t),$(this.title).unbind(t),$(this.firstName).unbind(i),$(this.surname).unbind(i)},i.prototype.reinitialise=function(){this.unbind(),this.bind()},i.prototype.canReinitialise=function(){return!0},i.prototype.calculateCodiceFiscale=function(){var t=this.getDateOfBirthControl();if(this.canGenerateCodiceFiscale(t)){var e=this.dateService.getDate(t),i={firstName:$(this.firstName).val(),surname:$(this.surname).val(),isFemale:"4"!==$(this.title).find(":selected").val(),day:e.getUTCDate().toString(),month:e.getUTCMonth().toString(),year:e.getUTCFullYear().toString(),placeOfBirthCode:this.getPlaceOfBirthCode()},o=this.codiceFiscaleGenerator.calculateCodiceFiscale(i),n=$(this.codiceFiscaleTextbox);n.val(o),this.validateCodiceFiscale(n)}},i.prototype.canGenerateCodiceFiscale=function(t){return"-1"!==$(this.title).find(":selected").val()&&(!!this.dateService.isValidDate(t)&&(!(!$(this.firstName).val()||!$(this.surname).val)&&($(this.countryOfBirth).find(":selected").val()===this.italyCountryCode?"-1"!==$(this.cityOfBirth).find(":selected").val()&&"0"!==$(this.cityOfBirth).find(":selected").val().split("_")[1]||($(this.codiceFiscaleTextbox).val(""),!1):"0"!==$(this.countryOfBirth).find(":selected").val().split("_")[1]||($(this.codiceFiscaleTextbox).val(""),!1))))},i.prototype.validateCodiceFiscale=function(t){var e=this.validationService.validate(t);e.isValid&&this.validationService.hideValidationMessage(t)},i.prototype.getPlaceOfBirthCode=function(){var t=$(this.countryOfBirth).find(":selected").val()===this.italyCountryCode?$(this.cityOfBirth).find(":selected").val():$(this.countryOfBirth).find(":selected").val();return t.split("_")[1]},i.prototype.getDateOfBirthControl=function(){return $("input#DateOfBirth").parent().is(":visible")?$("input#DateOfBirth"):$("select#DateOfBirthYear")},i.prototype.cityOfBirthChange=function(){$(this.countryOfBirth).val()===this.italyCountryCode&&$(this.codiceFiscaleTextbox).val("")},i}(e.BaseEvent);e.CodiceFiscaleCalculateEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n,r,a,s){var c=e.call(this,"CreateAccountSubmitButtonClickEvent",t,i,o,n)||this;return c.accountCreationService=r,c.trackingService=a,c.accountCreationProcessors=s,c}return __extends(i,e),i.prototype.isUnitedStatesOfAmerica=function(){return Number($("#Country").find(":selected").val())===t.Enums.CountryId.UnitedStatesOfAmerica},i.prototype.getTriggerSelector=function(){return"#Submit"},i.prototype.onBeforeValidate=function(){this.lightBoxService.show(t.Enums.LightBoxEventSource.CreatingAccount)},i.prototype.onValidationSuccess=function(){var e=this;this.isUnitedStatesOfAmerica()?this.lightBoxService.show(t.Enums.LightBoxEventSource.OnAccountCreationUS,function(){e.createAccount()}):(Number($("#Country").find(":selected").val())===t.Enums.CountryId.UnitedKingdom&&this.lightBoxService.show(t.Enums.LightBoxEventSource.VerifyingDetails),this.createAccount())},i.prototype.onValidationFailure=function(e){this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormValidationFailure,additionalInformation:i.getValidationErrorMessage(e)}),this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormSubmitted,additionalInformation:""}),this.hideCreatingAccountLightbox(),this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors)},i.prototype.getControlsToValidateSelector=function(){return $(".date-fallback").attr("data-set-day","true").attr("data-set-month","true").attr("data-set-year","true"),"input[data-val='true']:visible,select[data-val='true']:visible,button[data-val='true']:visible,div[data-val='true']"},i.prototype.createAccount=function(){var t=this;this.accountCreationService.createAccount(function(i){return e.prototype.checkResponseForError.call(t,i)},function(e){return t.onFailure(e)})},i.getValidationErrorMessage=function(t){var e="";return t.forEach(function(t){t.isValid||(e+="TrackingFailElement"+t.controlId.replace("#","")+'="'+t.errorMessage+'"\n\n')}),e},i.prototype.onSuccess=function(t){this.hideCreatingAccountLightbox(),this.hideVerifyingAccountMessageLightbox(),this.accountCreationProcessors.forEach(function(e){e.isApplicable(t.errorStatus)&&e.process(t)})},i.prototype.onFailure=function(e){this.hideCreatingAccountLightbox(),this.hideVerifyingAccountMessageLightbox(),this.lightBoxService.show(t.Enums.LightBoxEventSource.OnAccountCreationError)},i.prototype.hideCreatingAccountLightbox=function(){this.lightBoxService.hide(t.Enums.LightBoxEventSource.CreatingAccount)},i.prototype.hideVerifyingAccountMessageLightbox=function(){this.lightBoxService.hide(t.Enums.LightBoxEventSource.VerifyingDetails)},i}(e.BaseFormSubmitButtonClickEvent);e.CreateAccountSubmitButtonClickEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=t.Validation.RequiredRadioComponentValidator,o=function(t){function e(e){var i=t.call(this,"CurrentAddressLine1OnFocusEvent")||this;return i._validationService=e,i}return __extends(e,t),e.prototype.bind=function(){var e=this;$("input[name='CurrentAddressLine1']").on(t.prototype.buildEventName.call(this,"focus"),function(t){return e.onFocus(t)})},e.prototype.unbind=function(){$("input[name='CurrentAddressLine1']").off(t.prototype.buildEventName.call(this,"focus"))},e.prototype.reinitialise=function(){this.unbind(),this.bind()},e.prototype.canReinitialise=function(){return!0},e.prototype.onFocus=function(t){var e=this,o=new i,n=o.validateControl($(t.currentTarget));if(n)this._validationService.hideValidationMessage($("div[data-val='true'].hitAreaRadio"),!0);else{var r=this._validationService.validateForm($("div[data-val='true'].hitAreaRadio"));r&&r.length>0&&r.forEach(function(t){e._validationService.showValidationMessage($(t.controlId),t)})}$("input[name='CurrentAddressLine1']")[0].focus()},e}(e.BaseEvent);e.CurrentAddressLine1OnFocusEvent=o}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n,r){var a=e.call(this,"CurrentFindAddressSubmitButtonClickEvent",t,i,o,n)||this;return a.domDisplayService=r,a}return __extends(i,e),i.prototype.onbind=function(){$(this.getAddressPreSearchSelector()).hasClass("hide")||(this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousAddressPreSearchSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousAddressPostSearchSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousAddressHeaderSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousFindAddressButtonSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.TimeLivedSelector)))},i.prototype.getAddressPreSearchSelector=function(){return t.Keys.AddressKeys.CurrentAddressPreSearchSelector},i.prototype.getTriggerSelector=function(){return t.Keys.AddressKeys.CurrentFindAddressButtonSelector},i.prototype.getControlsToValidateSelector=function(){return t.Keys.AddressKeys.CurrentControlsToValidateSelector},i}(e.BaseFindAddressSubmitButtonClickEvent);e.CurrentFindAddressSubmitButtonClickEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n,r,a,s){var c=e.call(this,"DanishIdentityUpdateValidationEvent",t,i,o,n)||this;return c.danishIdentityUpdateService=r,c.trackingService=a,c.accountCreationProcessors=s,c.submitButtonSelector="fieldset[data-section='update-identity'] div[data-control='button']",c}return __extends(i,e),i.prototype.getTriggerSelector=function(){return"#UpdateDanishIdentity"},i.prototype.onBeforeValidate=function(){$(this.submitButtonSelector).hide(),this.lightBoxService.show(t.Enums.LightBoxEventSource.UpdatingDetails)},i.prototype.onValidationSuccess=function(){var t=this;this.danishIdentityUpdateService.updateDanishIdentity(function(i){return e.prototype.checkResponseForError.call(t,i)},function(e){return t.onFailure(e)})},i.prototype.onValidationFailure=function(e){this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormValidationFailure,additionalInformation:i.getValidationErrorMessage(e)}),this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormSubmitted,additionalInformation:""}),this.lightBoxService.hide(t.Enums.LightBoxEventSource.UpdatingDetails),this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors),$(this.submitButtonSelector).show()},i.prototype.getControlsToValidateSelector=function(){return $(".date-fallback").attr("data-set-day","true").attr("data-set-month","true").attr("data-set-year","true"),"input[data-val='true']:visible,select[data-val='true']:visible,button[data-val='true']:visible,div[data-val='true']"},i.getValidationErrorMessage=function(t){var e="";return t.forEach(function(t){t.isValid||(e+="TrackingFailElement"+t.controlId.replace("#","")+'="'+t.errorMessage+'"\n\n')}),e},i.prototype.onSuccess=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.UpdatingDetails),this.accountCreationProcessors.forEach(function(t){t.isApplicable(e.errorStatus)&&t.process(e)})},i.prototype.onFailure=function(e){this.lightBoxService.hide(t.Enums.LightBoxEventSource.UpdatingDetails),this.lightBoxService.show(t.Enums.LightBoxEventSource.OnUpdatingDetailsError),$(this.submitButtonSelector).show()},i}(e.BaseFormSubmitButtonClickEvent);e.DanishIdentityUpdateValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e){var i=t.call(this,"DateInitialiseEvent")||this;return i.common=e,i}return __extends(e,t),e.prototype.bind=function(){var e=this,i=t.prototype.buildEventName.call(this,"change");$("select#DateOfBirthDay,select#DateOfIssueDay,select#ExpiryDateDay").on(i,function(t){return e.valueChanged($(t.target),["day"])}),$("select#DateOfBirthMonth,select#DateOfIssueMonth,select#ExpiryDateMonth").on(i,function(t){return e.valueChanged($(t.target),["month"])}),$("select#DateOfBirthYear,select#DateOfIssueYear,select#ExpiryDateYear").on(i,function(t){return e.valueChanged($(t.target),["year"])})},e.prototype.unbind=function(){var e=this,i=t.prototype.buildEventName.call(this,"change");$("select#DateOfBirthDay,select#DateOfIssueDay,select#ExpiryDateDay").off(i,function(t){return e.valueChanged($(t.target),["day"])}),$("select#DateOfBirthMonth,select#DateOfIssueMonth,select#ExpiryDateMonth").off(i,function(t){return e.valueChanged($(t.target),["month"])}),$("select#DateOfBirthYear,select#DateOfIssueYear,select#ExpiryDateYear").off(i,function(t){return e.valueChanged($(t.target),["year"])})},e.prototype.valueChanged=function(t,e){var i=this.common.getContainer(t,"class","date-fallback");e.forEach(function(e){t.find(":selected").val()>-1?i.attr("data-set-"+e,"true"):t.find(":selected").val()===-1&&i.removeAttr("data-set-"+e)})},e}(t.BaseEvent);t.DateInitialiseEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(t){function e(e,i,o,n,r,a,s){var c=t.call(this,"DepositLimitButtonClickEventDropDown")||this;return c.common=e,c.validationService=i,c.pageScroller=o,c.userAgent=n,c.httpService=r,c.tabbingService=a,c.depositLimitEventProcessorFactory=s,c}return __extends(e,t),e.prototype.canReinitialise=function(){return!0},e.prototype.reinitialise=function(){this.unbind(),this.bind()},e.prototype.bind=function(i){var o=this;$(e.buttonDropdownSelector+" "+e.dropdownSelector).on(t.prototype.buildEventName.call(this,"mousedown"),function(t){return o.executeClickEventProcessors(t)}),$(e.buttonDropdownSelector+" "+e.dropdownArrowSelector).on(t.prototype.buildEventName.call(this,"mousedown"),function(t){return o.executeClickEventProcessors(t)}),$(e.buttonDropdownSelector+" "+e.optionSelector).on(t.prototype.buildEventName.call(this,"mousedown"),function(t){return o.executeClickEventProcessors(t)}),$(document).on(t.prototype.buildEventName.call(this,"click"),function(t){return o.executeClickEventProcessors(t)}),$("div[tabindex]").on(t.prototype.buildEventName.call(this,"focus"),function(t){
o.executeClickEventProcessors(t)}),$("body").on(t.prototype.buildEventName.call(this,"keydown"),function(t){o.executeKeyEventProcessors(t)})},e.prototype.unbind=function(){$(e.buttonDropdownSelector+" "+e.dropdownSelector).off(t.prototype.buildEventName.call(this,"mousedown")),$(e.buttonDropdownSelector+" "+e.dropdownArrowSelector).off(t.prototype.buildEventName.call(this,"mousedown")),$(e.buttonDropdownSelector+" "+e.optionSelector).off(t.prototype.buildEventName.call(this,"mousedown")),$(document).off(t.prototype.buildEventName.call(this,"click")),$("body").off(t.prototype.buildEventName.call(this,"keydown")),$("div[tabindex]").off(t.prototype.buildEventName.call(this,"focus"))},e.prototype.executeClickEventProcessors=function(t){var e=this.getFocusedElement(t),i=this.getOptionsList(e);this.depositLimitEventProcessorFactory.getClickEvents().forEach(function(o){o.supports(t)&&o.process(e,i,t)})},e.prototype.executeKeyEventProcessors=function(t){var e=this.getFocusedElement(t),i=this.getOptionsList(e);this.depositLimitEventProcessorFactory.getKeyEvents().forEach(function(o){o.supports(t)&&o.process(e,i,t)})},e.prototype.getFocusedElement=function(t){var e=$(t.target);return e.is("input[type='button']")?e:e.find("input[type='button']").first()},e.prototype.getOptionsList=function(t){return t.parents("div[data-control='button-dropdown']").find("div[data-control='button-dropdown-options']")},e.buttonDropdownSelector="fieldset[data-section='deposit-limits'] div[data-control='button-dropdown']",e.dropdownSelector="div[data-control='dropdown']>input",e.dropdownArrowSelector="div[data-control='dropdown']>div:first-child",e.optionSelector="div[data-control='button-dropdown-options']>div>div>input",e}(t.Events.BaseEvent);e.DepositLimitButtonDropdownClickEventDropDown=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){var i=e.call(this)||this,o=t.Core.Ioc.OpenAccountContainer.container;return i.cultureInfoService=o.resolve("ICultureInfoService"),i}return __extends(i,e),i.prototype.supports=function(t){var e=$(t.target),i="keyup"===t.type;return e.parents("fieldset[data-section='deposit-limit-other']").length>0&&i},i.prototype.process=function(e,i){var o=$(t.Keys.DepositLimitKeys.depositLimitOtherSelector);this.v2Validation(o[0]);var n=this.validationService.validate(o);n.isValid&&this.validationService.hideValidationMessage(o);var r=o.val().toString(),a=$(t.Keys.DepositLimitKeys.depositLimitAmountSelector);a.attr("data-selected-value",r);var s=this.cultureInfoService.fromLocaleString(r),c=parseInt($(t.Keys.DepositLimitKeys.depositLimitNonVerifiedMaxAmount).val());this.setNonVerifiedRegulatoryMessageVisibility(this.isNonVerifiedLimitExceeded(c,s))},i.prototype.v2Validation=function(t){var e=t.value;if(null!=t)if(e=e.replace(",","."),e=e.replace("-",""),isNaN(e))e="";else{var i=e.indexOf(".");if(i>=0){var o=e.slice(0,i);o.length<1&&(o="0");var n=parseInt(o,10),r=e.slice(i+1);e=r.length>2||""===o?n+"."+r.slice(0,2):n+"."+r,"0.00"===e&&(e="")}else{var a=parseInt(e,10);isNaN(a)&&(e="")}}return e!=t.value&&(t.value=e),!0},i}(e.BaseDropdownEventProcessor);e.OtherOptionKeyUpEventProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this,"DepositLimitkeyUpEvent")||this;return t.registerProcessors(),t}return __extends(i,e),i.prototype.bind=function(){var i=this;$(t.Keys.DepositLimitKeys.depositLimitOtherSelector).on(e.prototype.buildEventName.call(this,"keyup"),function(t){return i.onKeyUp(t)})},i.prototype.unbind=function(){$(t.Keys.DepositLimitKeys.depositLimitOtherSelector).off(e.prototype.buildEventName.call(this,"keyup"))},i.prototype.onKeyUp=function(e){return!(e.keyCode===t.Enums.KeyCode.Tab&&!e.shiftKey)&&(this.runProcessors(),!0)},i.prototype.runProcessors=function(){this.processors.forEach(function(t){t.supports(event)&&t.process()})},i.prototype.registerProcessors=function(){this.processors=new Array,this.processors.push(new t.Processors.DepositLimitEvents.OtherOptionKeyUpEventProcessor)},i}(e.BaseEvent);e.DepositLimitkeyUpEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i){var o=e.call(this,"DocumentTypeChangeEvent")||this;return o.validationService=t,o.userAgent=i,o.documentType="#DocumentType",o.documentNumber="#DocumentNumber",o.maxLength="",o}return __extends(i,e),i.prototype.bind=function(){var t=this;$(this.documentType).on(e.prototype.buildEventName.call(this,"change"),function(){return t.onDocumentTypeChange()}),this.userAgent.isAndroid()&&$(this.documentNumber).on(e.prototype.buildEventName.call(this,"keyup"),function(){return t.setMaxLengthForDocumentNumber()})},i.prototype.unbind=function(){$(this.documentType).off(e.prototype.buildEventName.call(this,"change")),$(this.documentNumber).off(e.prototype.buildEventName.call(this,"keyup"))},i.prototype.onDocumentTypeChange=function(){var e=t.Enums.DocumentType[Number($(this.documentType).val())],i=$(this.documentNumber),o=i.attr("data-val-characterlimit-"+e+"minlength");this.maxLength=i.attr("data-val-characterlimit-"+e+"maxlength"),this.setMaxLength(this.maxLength,i),this.setMinLength(o,i),this.validateDocumentNumber(i)},i.prototype.setMinLength=function(t,e){e.attr("data-val-characterlimit-minlength",t)},i.prototype.setMaxLength=function(t,e){e.attr("maxlength",t),e.attr("data-val-characterlimit-maxlength",t),e.val().length>t&&e.val("")},i.prototype.validateDocumentNumber=function(t){var e=this.validationService.validate(t);""===t.val()||e.isValid?this.validationService.hideValidationMessage(t):this.validationService.showValidationMessage(t,e)},i.prototype.setMaxLengthForDocumentNumber=function(){var t=$(this.documentNumber);t.val(t.val().substr(0,this.maxLength))},i}(e.BaseEvent);e.DocumentTypeChangeEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this,"FindAddressButtonOnBlurEvent")||this}return __extends(i,e),i.prototype.bind=function(){var i=this;$(t.Keys.AddressKeys.findAddressButtonSelector).on(e.prototype.buildEventName.call(this,"blur"),function(t){return i.onBlur(t)})},i.prototype.unbind=function(){$(t.Keys.AddressKeys.findAddressButtonSelector).off(e.prototype.buildEventName.call(this,"blur"))},i.prototype.reinitialise=function(){this.unbind(),this.bind()},i.prototype.canReinitialise=function(){return!0},i.prototype.onBlur=function(t){setTimeout(function(){$(t.target).removeAttr("data-animation")},100)},i}(e.BaseEvent);e.FindAddressButtonOnBlurEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e){var i=t.call(this,"HideSelectListOnDocumentTouchEvent")||this;return i.userAgent=e,i.isIPad=!1,i.touchMoveInitiated=!1,i.isIPad=/(iPad)/i.test(e.userAgent()),i}return __extends(e,t),e.prototype.bind=function(){var i=this;this.isIPad&&!this.isBingoIosNativeApp()&&$(e.BodySelector).on(t.prototype.buildEventName.call(this,e.TouchStart),function(t){return i.onTouchStart(t)}).on(t.prototype.buildEventName.call(this,e.TouchMove),function(t){return i.onTouchMove(t)}).on(t.prototype.buildEventName.call(this,e.TouchEnd),function(t){return i.onTouchEnd(t)})},e.prototype.unbind=function(){this.isIPad&&$(e.BodySelector).off(t.prototype.buildEventName.call(this,e.TouchStart)).off(t.prototype.buildEventName.call(this,e.TouchMove)).off(t.prototype.buildEventName.call(this,e.TouchEnd))},e.prototype.onTouchStart=function(t){var i=$(t.originalEvent.target);if(0===i.length||"Country"!==i.attr("id")){var o=$(e.CountrySelector),n="ignore-blur";o.data(n,"true"),o.trigger("blur"),o.removeData(n)}},e.prototype.onTouchMove=function(t){this.touchMoveInitiated=!0},e.prototype.onTouchEnd=function(t){if(!this.touchMoveInitiated){var i=$(t.originalEvent.target);if(0===i.length||"Country"!==i.attr("id")){var o=$(e.CountrySelector);o.trigger("blur")}}this.touchMoveInitiated=!1},e.prototype.isBingoIosNativeApp=function(){return"true"===$("body").attr("data-is-bingo-ios-native")},e.CountrySelector="#Country",e.TouchStart="touchstart",e.TouchMove="touchmove",e.TouchEnd="touchend",e.BodySelector="body",e}(t.BaseEvent);t.HideSelectListOnDocumentTouchEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=t.Validation.RequiredRadioComponentValidator,o=function(t){function e(e){var i=t.call(this,"HouseNumberOnFocusEvent")||this;return i._validationService=e,i}return __extends(e,t),e.prototype.bind=function(){var e=this;$("input[name='CurrentBuildingNumberSearch']").on(t.prototype.buildEventName.call(this,"focus"),function(t){return e.onFocus(t)})},e.prototype.unbind=function(){$("input[name='CurrentBuildingNumberSearch']").off(t.prototype.buildEventName.call(this,"focus"))},e.prototype.reinitialise=function(){this.unbind(),this.bind()},e.prototype.canReinitialise=function(){return!0},e.prototype.onFocus=function(t){var e=this,o=new i,n=o.validateControl($(t.currentTarget));if(n)this._validationService.hideValidationMessage($("div[data-val='true'].hitAreaRadio"),!0);else{var r=this._validationService.validateForm($("div[data-val='true'].hitAreaRadio"));r&&r.length>0&&r.forEach(function(t){e._validationService.showValidationMessage($(t.controlId),t)})}$("input[name='CurrentBuildingNumberSearch']")[0].focus()},e}(e.BaseEvent);e.HouseNumberOnFocusEvent=o}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n,r,a,s){var c=e.call(this,"ItalianIdentityUpdateValidationEvent",t,i,o,n)||this;return c.italianIdentityUpdateService=r,c.trackingService=a,c.accountCreationProcessors=s,c.submitButtonSelector="fieldset[data-section='update-identity'] div[data-control='button']",c}return __extends(i,e),i.prototype.getTriggerSelector=function(){return"#UpdateItalianIdentity"},i.prototype.onBeforeValidate=function(){$(this.submitButtonSelector).hide(),this.lightBoxService.show(t.Enums.LightBoxEventSource.UpdatingDetails)},i.prototype.onValidationSuccess=function(){var t=this;this.italianIdentityUpdateService.updateItalianIdentity(function(i){return e.prototype.checkResponseForError.call(t,i)},function(e){return t.onFailure(e)})},i.prototype.onValidationFailure=function(e){this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormValidationFailure,additionalInformation:i.getValidationErrorMessage(e)}),this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormSubmitted,additionalInformation:""}),this.lightBoxService.hide(t.Enums.LightBoxEventSource.UpdatingDetails),this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors),$(this.submitButtonSelector).show()},i.prototype.getControlsToValidateSelector=function(){return $(".date-fallback").attr("data-set-day","true").attr("data-set-month","true").attr("data-set-year","true"),"input[data-val='true']:visible,select[data-val='true']:visible,button[data-val='true']:visible,div[data-val='true']"},i.getValidationErrorMessage=function(t){var e="";return t.forEach(function(t){t.isValid||(e+="TrackingFailElement"+t.controlId.replace("#","")+'="'+t.errorMessage+'"\n\n')}),e},i.prototype.onSuccess=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.UpdatingDetails),this.accountCreationProcessors.forEach(function(t){t.isApplicable(e.errorStatus)&&t.process(e)})},i.prototype.onFailure=function(e){this.lightBoxService.hide(t.Enums.LightBoxEventSource.UpdatingDetails),this.lightBoxService.show(t.Enums.LightBoxEventSource.OnUpdatingDetailsError),$(this.submitButtonSelector).show()},i}(e.BaseFormSubmitButtonClickEvent);e.ItalianIdentityUpdateValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this,"MaxLengthRestrictionEvent")||this}return __extends(e,t),e.prototype.bind=function(){var i=$(e.applicableControlsSelector);i.on(t.prototype.buildEventName.call(this,"keyup"),this.preventEnterTooManyCharacters)},e.prototype.unbind=function(){var i=$(e.applicableControlsSelector);i.off(t.prototype.buildEventName.call(this,"keyup"))},e.prototype.preventEnterTooManyCharacters=function(t){var e=$(t.target),i=Number(e.attr("data-val-characterlimit-maxuserinput")),o=Number(e.attr("data-val-characterlimit-maxlength")),n=i||o;isNaN(n)||e.val().length>n&&e.val(e.val().substr(0,n))},e.applicableControlsSelector="input[data-val-characterlimit]",e}(t.BaseEvent);t.MaxLengthRestrictionEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e){var i=t.call(this,"NationalitySetEvent")||this;return i.dniNieService=e,i}return __extends(e,t),e.prototype.bind=function(){var e=this;$("#DniNieNumber").on(t.prototype.buildEventName.call(this,"blur"),function(t){return e.setSelectedNationality($(t.target))})},e.prototype.unbind=function(){$("#DniNieNumber").off(t.prototype.buildEventName.call(this,"blur"))},e.prototype.setSelectedNationality=function(t){var i=$("#Nationality");this.dniNieService.isValidDni(t)?(t.attr("data-dni-or-nie","dni"),i.val(e.spanishId)):this.dniNieService.isValidNie(t)&&"nie"!==t.attr("data-dni-or-nie")?(t.attr("data-dni-or-nie","nie"),i.val(e.pleaseSelectId)):this.dniNieService.isValidDni(t)||this.dniNieService.isValidNie(t)||t.attr("data-dni-or-nie","")},e.spanishId=170,e.pleaseSelectId=-1,e}(t.BaseEvent);t.NationalitySetEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this,"PageShowEvent")||this}return __extends(e,t),e.prototype.bind=function(){var e=this;$(window).on(t.prototype.buildEventName.call(this,"pageshow"),function(){return e.refreshIfRequired()})},e.prototype.unbind=function(){$(window).off(t.prototype.buildEventName.call(this,"pageshow"))},e.prototype.refreshIfRequired=function(){$("#hdnRefreshPage").val()&&($(window).scrollTop(0),location.reload()),"true"===$("body").attr("data-is-casino-native")&&"true"===$("#hdnLoadFormFromSession").val()&&location.reload()},e}(t.BaseEvent);t.PageShowEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i){var o=e.call(this,"PageUnloadEvent")||this;return o.trackingService=t,o.terminateSessionService=i,o.trackedOpenAccountClosure=!1,o.redirectionTargets=["Submit","Country","Confirm","UpdateDanishIdentity","UpdateSpanishIdentity","UpdateItalianIdentity","UpdateSwedishIdentity"],o}return __extends(i,e),i.prototype.bind=function(){var t=this;this.bindInputCaptureEvents(),$(window).on(e.prototype.buildEventName.call(this,"beforeunload"),function(){return t.beforeUnload()}),$(window).on(e.prototype.buildEventName.call(this,"pagehide"),function(){return t.beforeUnload()})},i.prototype.unbind=function(){$(document).off(e.prototype.buildEventName.call(this,"mousedown")),$(document).off(e.prototype.buildEventName.call(this,"touchstart")),$(document).off(e.prototype.buildEventName.call(this,"keydown")),$(window).off(e.prototype.buildEventName.call(this,"beforeunload")),$(window).off(e.prototype.buildEventName.call(this,"pagehide"))},i.prototype.bindInputCaptureEvents=function(){var i=this;$(document).on(e.prototype.buildEventName.call(this,"mousedown"),function(t){return i.storeLastElementClicked(t)}),$(document).on(e.prototype.buildEventName.call(this,"touchstart"),function(t){return i.storeLastElementClicked(t)}),$(document).on(e.prototype.buildEventName.call(this,"keydown"),function(e){e.keyCode!==t.Enums.KeyCode.Enter&&e.keyCode!==t.Enums.KeyCode.Spacebar||i.storeLastElementClicked(e)})},i.prototype.beforeUnload=function(){this.eventWasTriggeredFromClose()&&(this.trackedOpenAccountClosure===!1&&(this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.OpenAccountClosed,additionalInformation:""}),this.trackedOpenAccountClosure=!0),this.terminateSessionService.shouldSessionTerminateOnClose()&&(this.unbind(),this.terminateSessionService.terminateSession()))},i.prototype.storeLastElementClicked=function(t){t.target.id&&(this.lastElementClicked=t.target)},i.prototype.eventWasTriggeredFromClose=function(){var t=!1,e=this.lastElementClicked?this.lastElementClicked.id:"";return this.redirectionTargets.forEach(function(i){t||i!==e||(t=!0)}),!t},i}(e.BaseEvent);e.PageUnloadEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(i,o){var n=e.call(this,"PasswordGreeceValidationEvent",i)||this;return n.passwordInfromationService=o,n.validators=new Array(new t.Validation.GreekPasswordWhitelistValidator("data-val-regex"),new t.Validation.PasswordValidator),n}return __extends(i,e),i.prototype.bindToControl=function(){return $("#Password")},i.prototype.onPassedValidation=function(t){this.validationService.hideValidationMessage(t),this.updatePasswordToolTip(t,!0)},i.prototype.onFailedValidation=function(t,e){this.validationService.showValidationMessage(t,e),this.updatePasswordToolTip(t,!1)},i.prototype.allowBind=function(){return this.isGreece()},i.prototype.updatePasswordToolTip=function(t,e){var o=t.parent();this.passwordInfromationService.testPassword(o.parent(),t.val()),e?(o.find(i.passwordTooltipSelector).attr("aria-hidden","false"),this.triggerHideTootipTimer(t)):o.find(i.passwordTooltipSelector).attr("aria-hidden","true")},i.prototype.triggerHideTootipTimer=function(t){var o=this,n=this.validationService.validate(t);if(n.isValid){var r=e.prototype.getTargetMinLength.call(this,t),a=Number(t.val().length);if(a>=r)var s=setTimeout(function(){clearTimeout(s),o.updatePasswordToolTip(t,!1)},i.hideTooltipTimeout)}},i.passwordTooltipSelector="aside.su-Tooltip",i.hideTooltipTimeout=1e3,i}(e.BaseValidationEvent);e.PasswordGreeceValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o){var n=e.call(this,"PasswordInputEvent")||this;return n.logger=t,n.userAgent=i,n.passwordInformationService=o,n}return __extends(i,e),i.prototype.bind=function(){var o=this,n=$("#"+i.ControlId),r=Number($("#Country").find(":selected").val()),a=[t.Enums.CountryId.Spain,t.Enums.CountryId.UnitedStatesOfAmerica].indexOf(r)>=0;a&&(this.userAgent.isIe9AndBelow()?n.on(e.prototype.buildEventName.call(this,"keyup"),function(t){return o.onInput(t)}):n.on(e.prototype.buildEventName.call(this,"input"),function(t){return o.onInput(t)}),n.on(e.prototype.buildEventName.call(this,"blur"),function(t){return o.onBlur(t)}).on(e.prototype.buildEventName.call(this,"focus"),function(t){return o.onFocus(t)}))},i.prototype.unbind=function(){$("#"+i.ControlId).off(e.prototype.buildEventName.call(this,"input")).off(e.prototype.buildEventName.call(this,"keyup")).off(e.prototype.buildEventName.call(this,"blur")).off(e.prototype.buildEventName.call(this,"focus"))},i.prototype.onInput=function(t){var e=$(t.target),o=$("#"+i.ControlId).parent().parent(),n=e.val();this.passwordInformationService.testPassword(o,n)},i.prototype.onBlur=function(t){var e=$("#"+i.ControlId).parent();e.find(i.tooltipContainerSelector).attr("aria-hidden","true")},i.prototype.onFocus=function(t){var e=$("#"+i.ControlId).parent();"true"===e.parent().parent().attr("data-validation")||e.next(".su-FlexiField_Validation_Container:visible").length?this.passwordInformationService.testPassword(e.parent(),$(t.target).val()):e.find(i.tooltipContainerSelector).attr("aria-hidden","false")},i.ControlId="Password",i.tooltipContainerSelector="aside.su-Tooltip",i}(e.BaseEvent);e.PasswordInputEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(i,o){var n=e.call(this,"PasswordSpainUsaValidationEvent",i)||this;return n.passwordInfromationService=o,n.validators=new Array(new t.Validation.RegExValidator,new t.Validation.SpainUsaPasswordWhitelistValidator("data-val-regex"),new t.Validation.PasswordValidator),n}return __extends(i,e),i.prototype.bindToControl=function(){return $("#Password")},i.prototype.onPassedValidation=function(t){this.validationService.hideValidationMessage(t),this.updatePasswordToolTip(t,!0)},i.prototype.onFailedValidation=function(t,e){this.validationService.showValidationMessage(t,e),this.updatePasswordToolTip(t,!1)},i.prototype.allowBind=function(){return this.isSpain()||this.isUnitedStatesOfAmerica()},i.prototype.updatePasswordToolTip=function(t,e){var o=t.parent();this.passwordInfromationService.testPassword(o.parent(),t.val()),e?(o.find(i.passwordTooltipSelector).attr("aria-hidden","false"),this.triggerHideTootipTimer(t)):o.find(i.passwordTooltipSelector).attr("aria-hidden","true")},i.prototype.triggerHideTootipTimer=function(t){var o=this,n=this.validationService.validate(t);if(n.isValid){var r=e.prototype.getTargetMinLength.call(this,t),a=Number(t.val().length);if(a>=r)var s=setTimeout(function(){clearTimeout(s),o.updatePasswordToolTip(t,!1)},i.hideTooltipTimeout)}},i.passwordTooltipSelector="aside.su-Tooltip",i.hideTooltipTimeout=1e3,i}(e.BaseValidationEvent);e.PasswordSpainUsaValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(i){var o=e.call(this,"PasswordValidationEvent",i)||this;return o.validators=new Array(new t.Validation.RegExValidator,new t.Validation.PasswordValidator),o}return __extends(i,e),i.prototype.bindToControl=function(){return $("#Password")},i.prototype.onPassedValidation=function(t){this.validationService.hideValidationMessage(t)},i.prototype.onFailedValidation=function(t,e){this.validationService.showValidationMessage(t,e)},i.prototype.allowBind=function(){return!this.isSpain()||!this.isGreece()},i}(e.BaseValidationEvent);e.PasswordValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this,"NumericalRestrictionEvent")||this}return __extends(e,t),e.prototype.bind=function(){var i=$(e.applicableControlsSelector);i.on(t.prototype.buildEventName.call(this,"keyup"),this.preventNonNumericCharacters)},e.prototype.unbind=function(){var i=$(e.applicableControlsSelector);i.off(t.prototype.buildEventName.call(this,"keyup"))},e.prototype.preventNonNumericCharacters=function(t){var e=$(t.target),i=e.val(),o=i.replace(/[^0-9]+/g,"");i!==o&&e.val(o)},e.applicableControlsSelector="input#PhoneNumber",e}(t.BaseEvent);t.PhoneNumericalRestrictionEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this,"PostcodeOnBlur")||this}return __extends(i,e),i.prototype.bind=function(){var t=this;$("#CurrentPostcode, #CurrentPostcodeSearch").on(e.prototype.buildEventName.call(this,"blur"),function(e){return t.padItalianPostcode($(e.target))})},i.prototype.unbind=function(){$("#CurrentPostcode, #CurrentPostcodeSearch").off(e.prototype.buildEventName.call(this,"blur"))},i.prototype.padItalianPostcode=function(e){var i=e.val();if(Number($("#Country").val())===t.Enums.CountryId.Italy&&i.length&&i.length<5){for(var o=5;i.length<o;)i="0"+i;e.val(i)}},i}(e.BaseEvent);e.PostcodeOnBlurEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n){return e.call(this,"PreviousFindAddressSubmitButtonClickEvent",t,i,o,n)||this}return __extends(i,e),i.prototype.getAddressPreSearchSelector=function(){return t.Keys.AddressKeys.PreviousAddressPreSearchSelector},i.prototype.getTriggerSelector=function(){return t.Keys.AddressKeys.PreviousFindAddressButtonSelector},i.prototype.getControlsToValidateSelector=function(){return t.Keys.AddressKeys.PreviousControlsToValidateSelector},i}(e.BaseFindAddressSubmitButtonClickEvent);e.PreviousFindAddressSubmitButtonClickEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o){var n=e.call(this,"RemoteBirthOnChangeEvent")||this;return n.httpService=t,n.logger=i,n.userAgent=o,n.isIPhone=!1,n.registerProcessors(),n.isIPhone=n.userAgent.isIPhone(),n}return __extends(i,e),i.prototype.bind=function(){var o=this;if(Number($("#Country").find(":selected").val())===t.Enums.CountryId.Italy){var n=$(i.selector),r=$(i.birthAreaSelector);this._previousCountryOfBirthValue=$(i.countryOfBirthSelector).find(":selected").val().split("_")[0];var a=$(i.provinceOfBirthSelector).find(":selected").val();this._previousProvinceOfBirthValue=a?a.split("_")[0]:"-1",n.on(e.prototype.buildEventName.call(this,"change"),function(t){return o.onChange(t)}),r.on(e.prototype.buildEventName.call(this,"change"),function(t){return o.onChange(t)}),this.isIPhone&&$(i.cityOfBirthPlaceHolder).on(e.prototype.buildEventName.call(this,"touchstart"),function(t){return o.cityOfBirthPlaceHolderTouchStart(t)}).on(e.prototype.buildEventName.call(this,"focus"),function(){return o.cityOfBirthPlaceHolderFocus()})}},i.prototype.unbind=function(){$(i.selector).off(e.prototype.buildEventName.call(this,"change")),this.isIPhone&&$(i.cityOfBirthPlaceHolder).off(e.prototype.buildEventName.call(this,"touchstart")).off(e.prototype.buildEventName.call(this,"focus"))},i.prototype.reinitialise=function(){this.unbind(),this.bind()},i.prototype.canReinitialise=function(){return!0},i.prototype.cityOfBirthPlaceHolderTouchStart=function(t){setTimeout(function(){$(i.cityOfBirthSelector).focus(),t.preventDefault()},1e3)},i.prototype.cityOfBirthPlaceHolderFocus=function(){$(i.cityOfBirthPlaceHolder).trigger("touchstart")},i.prototype.onChange=function(t){var e=this,o=$(t.target),n=$(i.countryOfBirthSelector).find(":selected").val().split("_")[0],r=$(i.provinceOfBirthSelector).find(":selected").val();if(r=r?r.split("_")[0]:"-1",this._previousCountryOfBirthValue!==n||this._previousProvinceOfBirthValue!==r){this._previousCountryOfBirthValue=n,this._previousProvinceOfBirthValue=r;var a=$("#"+o.attr("data-val-remote-url")).val();this.httpService.post(a,{countryId:n,provinceId:r},function(t){e.processJsonData(o,t),e.isIPhone&&$(i.cityOfBirthPlaceHolder).focus()},null,!1)}},i.prototype.processJsonData=function(e,o){var n=e.attr("id");this.processors.forEach(function(t){t.supports(e)&&t.build($("#"+e.attr("data-val-remote-targetcontrolid")),o)});var r=$(i.provinceOfBirthSelector);r.val(o.provinceId),o.provinceId!==-1&&r.find("[value='-1']").remove(),$("#"+n).focus(),t.OpenAccount.reinitialiseEvents()},i.prototype.registerProcessors=function(){this.processors=new Array,this.processors.push(new t.Processors.Events.BirthChangeJsonToHtmlProcessor)},i.selector="div#ItalySpecificArea select[data-val-remote]:not([data-val-remote-validation])",i.birthAreaSelector="div#PersonalInformationBirthArea select[data-val-remote]:not([data-val-remote-validation])",i.countryOfBirthSelector="div#PersonalInformationBirthArea select#CountryOfBirth",i.provinceOfBirthSelector="div#PersonalInformationBirthArea select#ProvinceOfBirth",i.cityOfBirthSelector="div#PersonalInformationBirthArea select#CityOfBirth",i.cityOfBirthPlaceHolder="div#PersonalInformationBirthArea input#CityOfBirthPlaceHolder",i}(e.BaseEvent);e.RemoteBirthOnChangeEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this,"RemoteDocumentTypeOnChangeEvent")||this;return i.httpService=t,i.registerProcessors(),i}return __extends(i,e),i.prototype.bind=function(){var t=this;if(this.isValidCountry()){var o=$(i.selector);this._previousDocumentTypeValue=Number($(i.documentTypeSelector).find(":selected").val()),o.on(e.prototype.buildEventName.call(this,"change"),function(e){return t.onChange(e)})}},i.prototype.unbind=function(){$(i.selector).off(e.prototype.buildEventName.call(this,"change"))},i.prototype.reinitialise=function(){this.unbind(),this.bind()},i.prototype.canReinitialise=function(){return!0},i.prototype.onChange=function(t){var e=this;if(this.isValidCountry()){var o=$(t.target),n=Number($(i.documentTypeSelector).find(":selected").val());if(isNaN(n)&&(n=-1),n>0&&this._previousDocumentTypeValue!==n){var r=Number($("#Country").find(":selected").val()),a=$("#"+o.attr("data-val-remote-url")).val();this._previousDocumentTypeValue=n,this.httpService.post(a,{countryId:r,documentTypeId:n},function(t){e.processJsonData(o,t)},null)}}},i.prototype.processJsonData=function(t,e){this.processors.forEach(function(i){i.supports(t)&&i.build($("#"+t.attr("data-val-remote-targetcontrolid")),e)})},i.prototype.registerProcessors=function(){this.processors=new Array,this.processors.push(new t.Processors.Events.DocumentTypeChangeJsonToHtmlProcessor)},i.prototype.isValidCountry=function(){var e=Number($("#Country").find(":selected").val());return e===t.Enums.CountryId.Bulgaria||e===t.Enums.CountryId.Italy},i.selector="div#DocumentTypeArea select[data-val-remote]:not([data-val-remote-validation])",i.documentTypeSelector="div#DocumentTypeArea select#DocumentType",i}(e.BaseEvent);e.RemoteDocumentTypeOnChangeEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(){return t.call(this,"SanitiseApostropheEvent")||this}return __extends(e,t),e.prototype.bind=function(){var e=this,i=""+t.prototype.buildEventName.call(this,"blur");$("input[type='text']").not("#EmailAddress").on(i,function(t){e.sanitiseApostrophe($(t.target))})},e.prototype.unbind=function(){var e=""+t.prototype.buildEventName.call(this,"blur");$("input[type='text']").not("#EmailAddress").off(e)},e.prototype.sanitiseApostrophe=function(t){var i=t.val();if(this.containsInvalidApostrophe(i)){for(var o=i.split(""),n=0;n<o.length;n++)e.invalidApostophe.indexOf(o[n])>-1&&(o[n]="Â´");t.val(o.join(""))}},e.prototype.containsInvalidApostrophe=function(t){for(var i=0;i<e.invalidApostophe.length;i++)if(t.indexOf(e.invalidApostophe[i])>-1)return!0;return!1},e.invalidApostophe=["'","â€˜","â€™"],e}(t.BaseEvent);t.SanitiseApostropheEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(t){function e(e){var i=t.call(this,"ScreenResizeEvent")||this;return i.client=e,i.checkComponentSelector="div[data-control='checkcomponent'] > span",i.radioComponentSelector="div[data-control='radiocomponent'] > span",i.paddingClass="valign-adjust",i}return __extends(e,t),e.prototype.bind=function(){var e=this;this.onWindowResize(),$(window).on(t.prototype.buildEventName.call(this,"resize"),function(){return e.onWindowResize()})},e.prototype.unbind=function(){$(window).off(t.prototype.buildEventName.call(this,"resize"))},e.prototype.onWindowResize=function(){this.storeScreenSize(),this.addRequiredCheckComponent(),this.addRequiredRadioComponent(),this.setContactInformationWidthForAndroidNativeBrowserForVersionLessThan4_4()},e.prototype.addRequiredCheckComponent=function(){var t=this;$(this.checkComponentSelector).each(function(e,i){1===i.getClientRects().length?$(i).parent().parent().parent().addClass(t.paddingClass):$(i).parent().parent().parent().removeClass(t.paddingClass)})},e.prototype.addRequiredRadioComponent=function(){var t=this;$(this.radioComponentSelector).each(function(e,i){1===i.getClientRects().length?$(i).parent().parent().parent().addClass(t.paddingClass):$(i).parent().parent().parent().removeClass(t.paddingClass)})},e.prototype.storeScreenSize=function(){var t=screen.availWidth+" x "+screen.availHeight;
if(" x "===t){var e=$(window);t=e.width()+" x "+e.height()}var i=$("#hdnScreenSize");i&&i.val()!==t&&i.val(t)},e.prototype.setContactInformationWidthForAndroidNativeBrowserForVersionLessThan4_4=function(){if(this.client.isAndroidNativeBrowserVersionLessThan4_4()){var t=Math.floor(this.client.getWidth());$("fieldset[data-section='contact-information']>div div").width(t-22)}},e}(t.BaseEvent);t.ScreenResizeEvent=e}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this,"SelectOccupationEvent")||this;return i.lightBoxService=t,i.selectOccupationTextBoxSelector="input#Occupation",i}return __extends(i,e),i.prototype.bind=function(){var t=this;$(this.selectOccupationTextBoxSelector).off(e.prototype.buildEventName.call(this,"click")),$(this.selectOccupationTextBoxSelector).on(e.prototype.buildEventName.call(this,"click"),function(){return t.triggerModal()})},i.prototype.reinitialise=function(){this.unbind(),this.bind()},i.prototype.unbind=function(){$(this.selectOccupationTextBoxSelector).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.canReinitialise=function(){return!0},i.prototype.triggerModal=function(){this.lightBoxService.show(t.Enums.LightBoxEventSource.SelectOccupation)},i}(e.BaseEvent);e.SelectOccupationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n,r,a,s){var c=e.call(this,"SpanishIdentityUpdateValidationEvent",t,i,o,n)||this;return c.spanishIdentityUpdateService=r,c.trackingService=a,c.accountCreationProcessors=s,c.submitButtonSelector="fieldset[data-section='update-identity'] div[data-control='button']",c}return __extends(i,e),i.prototype.getTriggerSelector=function(){return"#UpdateSpanishIdentity"},i.prototype.onBeforeValidate=function(){$(this.submitButtonSelector).hide(),this.lightBoxService.show(t.Enums.LightBoxEventSource.UpdatingDetails)},i.prototype.onValidationSuccess=function(){var t=this;this.spanishIdentityUpdateService.updateSpanishIdentity(function(i){return e.prototype.checkResponseForError.call(t,i)},function(e){return t.onFailure(e)})},i.prototype.onValidationFailure=function(e){this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormValidationFailure,additionalInformation:i.getValidationErrorMessage(e)}),this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormSubmitted,additionalInformation:""}),this.lightBoxService.hide(t.Enums.LightBoxEventSource.UpdatingDetails),this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors),$(this.submitButtonSelector).show()},i.prototype.getControlsToValidateSelector=function(){return $(".date-fallback").attr("data-set-day","true").attr("data-set-month","true").attr("data-set-year","true"),"input[data-val='true']:visible,select[data-val='true']:visible,button[data-val='true']:visible,div[data-val='true']"},i.getValidationErrorMessage=function(t){var e="";return t.forEach(function(t){t.isValid||(e+="TrackingFailElement"+t.controlId.replace("#","")+'="'+t.errorMessage+'"\n\n')}),e},i.prototype.onSuccess=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.UpdatingDetails),this.accountCreationProcessors.forEach(function(t){t.isApplicable(e.errorStatus)&&t.process(e)})},i.prototype.onFailure=function(e){this.lightBoxService.hide(t.Enums.LightBoxEventSource.UpdatingDetails),this.lightBoxService.show(t.Enums.LightBoxEventSource.OnUpdatingDetailsError),$(this.submitButtonSelector).show()},i}(e.BaseFormSubmitButtonClickEvent);e.SpanishIdentityUpdateValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,"StateOnChangeEvent")||this;o.stateTimeZones=null;var n=t.Core.Ioc.OpenAccountContainer.container,r=n.resolve("IJsonParser"),a=$(i.stateTimeZoneSelector).val();return a&&(o.stateTimeZones=r.parse(a).result()),o}return __extends(i,e),i.prototype.bind=function(){var t=this;if(null!=this.stateTimeZones){var o=$(i.selector);o.on(e.prototype.buildEventName.call(this,"change"),function(e){return t.onChange(e)})}},i.prototype.unbind=function(){$(i.selector).off(e.prototype.buildEventName.call(this,"change"))},i.prototype.reinitialise=function(){this.unbind(),this.bind()},i.prototype.canReinitialise=function(){return!0},i.prototype.onChange=function(t){if(null!=this.stateTimeZones){var e=$(t.target).find(":selected");if(parseInt(e.val())>=0){var o=e.text(),n=this.stateTimeZones[o];if(n){var r=$(i.timeZoneSelector);r.val(n),r.find("[value='-1']").remove()}}}},i.selector="#CurrentStates",i.stateTimeZoneSelector="#StateTimeZones",i.timeZoneSelector="#TimeZone",i}(e.BaseEvent);e.StateOnChangeEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i,o,n,r,a,s){var c=e.call(this,"SwedishIdentityUpdateValidationEvent",t,i,o,n)||this;return c.swedishIdentityUpdateService=r,c.trackingService=a,c.accountCreationProcessors=s,c.submitButtonSelector="fieldset[data-section='update-identity'] div[data-control='button']",c}return __extends(i,e),i.prototype.getTriggerSelector=function(){return"#UpdateSwedishIdentity"},i.prototype.onBeforeValidate=function(){$(this.submitButtonSelector).hide(),this.lightBoxService.show(t.Enums.LightBoxEventSource.UpdatingDetails)},i.prototype.onValidationSuccess=function(){var t=this;this.swedishIdentityUpdateService.updateSwedishIdentity(function(i){return e.prototype.checkResponseForError.call(t,i)},function(e){return t.onFailure(e)})},i.prototype.onValidationFailure=function(e){this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormValidationFailure,additionalInformation:i.getValidationErrorMessage(e)}),this.trackingService.track({trackingEvent:t.Enums.TrackingEvent.FormSubmitted,additionalInformation:""}),this.lightBoxService.hide(t.Enums.LightBoxEventSource.UpdatingDetails),this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors),$(this.submitButtonSelector).show()},i.prototype.getControlsToValidateSelector=function(){return $(".date-fallback").attr("data-set-day","true").attr("data-set-month","true").attr("data-set-year","true"),"input[data-val='true']:visible,select[data-val='true']:visible,button[data-val='true']:visible,div[data-val='true']"},i.getValidationErrorMessage=function(t){var e="";return t.forEach(function(t){t.isValid||(e+="TrackingFailElement"+t.controlId.replace("#","")+'="'+t.errorMessage+'"\n\n')}),e},i.prototype.onSuccess=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.UpdatingDetails),this.accountCreationProcessors.forEach(function(t){t.isApplicable(e.errorStatus)&&t.process(e)})},i.prototype.onFailure=function(e){this.lightBoxService.hide(t.Enums.LightBoxEventSource.UpdatingDetails),this.lightBoxService.show(t.Enums.LightBoxEventSource.OnUpdatingDetailsError),$(this.submitButtonSelector).show()},i}(e.BaseFormSubmitButtonClickEvent);e.SwedishIdentityUpdateValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this,"SwedishVerificationRetryFormValidationEvent")||this}return __extends(i,e),i.prototype.control=function(){return $("#verification-retry .su-Signup")},i.prototype.submitButton=function(){return $("#UpdateSwedishIdentity")},i.prototype.bind=function(){var t=this;this.allowBind()&&(this.formHash=this.control().serialize(),this.submitButton().prop("disabled",!0),this.control().on(e.prototype.buildEventName.call(this,"input"),function(e){return t.checkFormChanged($(e.target))}))},i.prototype.unbind=function(){var t=this;this.allowBind()&&this.control().off(e.prototype.buildEventName.call(this,"input"),function(e){return t.checkFormChanged($(e.target))})},i.prototype.allowBind=function(){return this.isSweden()},i.prototype.isSweden=function(){return Number($("#Country").find(":selected").val())===t.Enums.CountryId.Sweden},i.prototype.checkFormChanged=function(t){var e=this.control().serialize();this.formHash===e?this.submitButton().prop("disabled",!0):this.submitButton().prop("disabled",!1)},i}(e.BaseEvent);e.SwedishVerificationRetryFormValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(i){var o=e.call(this,"TimedUsernameValidationEvent",i)||this;return o.timeoutSeconds=Number($("#siteValidationIdleTimeout").val()),o.timeoutSeconds=o.convertToSeconds(o.timeoutSeconds),o.validators=new Array(new t.Validation.RegExValidator),o}return __extends(i,e),i.prototype.bindToControl=function(){return $("#UserName")},i.prototype.onPassedValidation=function(t){var i,o=this,n=e.prototype.getTargetMinLength.call(this,t),r=t.val().length;this.validationService.hideValidationMessage(t),r>n&&(i=setTimeout(function(){return o.validate(t)},this.timeoutSeconds)),t.on("input, blur",function(){clearTimeout(i)})},i.prototype.onFailedValidation=function(t,e){this.validationService.showValidationMessage(t,e)},i.prototype.validate=function(t){var e=this.validationService.validate(t);e.isValid?this.validationService.hideValidationMessage(t):this.validationService.showValidationMessage(t,e)},i.prototype.convertToSeconds=function(t){return isNaN(t)?t:1e3*t},i}(e.BaseValidationEvent);e.TimedUsernameValidationEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(i,o){var n=e.call(this,"TimeLivedClickEvent")||this;n.logger=i,n.validationService=o;var r=t.Core.Ioc.OpenAccountContainer.container;return n.domDisplayService=r.resolve("IDomDisplayService"),n}return __extends(i,e),i.prototype.bind=function(){var i=this;if(this.selectedCountry()===t.Enums.CountryId.Bulgaria){var o=$("[data-section='address'] button[data-time-lived-value='HidePreviousAddress']");o.attr("selected",""),o.parent().parent().attr("selected","")}$(t.Keys.AddressKeys.TimeLivedButtonSelector).on(e.prototype.buildEventName.call(this,"click"),function(t){return i.timeLivedClick(t)})},i.prototype.unbind=function(){$(t.Keys.AddressKeys.TimeLivedButtonSelector).off(e.prototype.buildEventName.call(this,"click"))},i.prototype.timeLivedClick=function(e){var i=$(e.target);i[0].hasAttribute("selected")||(this.initialiseEvents(),$(t.Keys.AddressKeys.TimeLivedButtonSelector).removeAttr("selected"),i.attr("selected",""),i.parent().parent().attr("selected",""),this.hidePreviousAddressSection(),this.clearControls(),this.hideMessages(),i.attr("data-time-lived-value")===t.Keys.AddressKeys.ShowPreviousAddress?(this.injectPreviousAddressHtml(),this.selectedCountry()!==t.Enums.CountryId.Bulgaria?(this.domDisplayService.show($(t.Keys.AddressKeys.PreviousAddressPreSearchSelector)),this.domDisplayService.show($(t.Keys.AddressKeys.PreviousFindAddressButtonSelector))):this.domDisplayService.show($(t.Keys.AddressKeys.PreviousAddressPostSearchSelector)),this.domDisplayService.show($(t.Keys.AddressKeys.PreviousAddressHeaderSelector)),this.previousAddressEvent.bind()):(this.removePreviousAddressHtml(),this.previousAddressEvent.unbind()))},i.prototype.hidePreviousAddressSection=function(){this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousAddressPostSearchSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousAddressPreSearchSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousAddressHeaderSelector)),this.domDisplayService.hide($(t.Keys.AddressKeys.PreviousFindAddressButtonSelector))},i.prototype.clearControls=function(){$("[data-section='address']>div#TimeLivedArea input").val(""),$("[data-section='address']>div#TimeLivedArea select").find(":selected").val("")},i.prototype.hideMessages=function(){$("[data-section='address'] div#TimeLived div.su-FlexiField_Validation_Container").hide(),this.hide($(t.Keys.AddressKeys.PreviousAddressPreSearchSelector+" input[data-val='true']")),this.hide($(t.Keys.AddressKeys.PreviousAddressPostSearchSelector+" input[data-val='true']"))},i.prototype.hide=function(t){for(var e=0;e<t.length;e++)this.validationService.hideValidationMessage($(t[e]))},i.prototype.removePreviousAddressHtml=function(){var e=$(t.Keys.AddressKeys.PreviousAddressPreSearchSelector),i=$(t.Keys.AddressKeys.PreviousAddressPostSearchSelector);this.previousAddressPreSearchHtml=e.clone().wrap("<p/>").parent().html(),this.previousAddressPostSearchHtml=i.clone().wrap("<p/>").parent().html(),e.remove(),i.remove()},i.prototype.injectPreviousAddressHtml=function(){var e=t.OpenAccount.getComponent(t.Enums.ComponentName.Validation),i=t.OpenAccount.getComponent(t.Enums.ComponentName.FlexiLabel);$(t.Keys.AddressKeys.TimeLivedAreaSelector).append(this.previousAddressPreSearchHtml).append(this.previousAddressPostSearchHtml);var o=$(t.Keys.AddressKeys.PreviousAddressPreSearchSelector),n=$(t.Keys.AddressKeys.PreviousAddressPostSearchSelector);e.initialiseFor(o),e.initialiseFor(n),i.initialiseFor(o),i.initialiseFor(n)},i.prototype.initialiseEvents=function(){this.previousAddressEvent||(this.previousAddressEvent=t.OpenAccount.getEvent(t.Enums.EventName.PreviousFindAddressSubmitButtonClickEvent))},i.prototype.selectedCountry=function(){return Number($("#Country").find(":selected").val())},i}(e.BaseEvent);e.TimeLivedClickEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(t,i){var o=e.call(this,"TimePeriodChangeEvent")||this;return o.httpService=t,o.validationService=i,o}return __extends(i,e),i.prototype.bind=function(){var t=this;$(i.depositLimitPeriodSelector).bind(e.prototype.buildEventName.call(this,"time-period-change"),function(e){return t.updateDepositLimitAmountField(e)})},i.prototype.unbind=function(){$(i.depositLimitPeriodSelector).unbind(e.prototype.buildEventName.call(this,"time-period-change"))},i.prototype.updateDepositLimitAmountField=function(e){var i=this,o=$(e.currentTarget);this.selectedValueChanged(o)&&Number(o.attr("data-selected-value"))!==t.Enums.DepositLimitTimePeriod.NoLimit?(o.attr("data-previous-value",o.attr("data-selected-value")),this.setAmountVisibility(!0),this.setNonVerifiedRegulatoryMessageVisibility(!1),this.httpService.post($("#hdnGetDepositLimitAmountDropDownListUrl").val(),{DepositLimitPeriod:o.attr("data-selected-value")},function(e){i.updateDepositLimitAmountHtml(e),$(t.Keys.DepositLimitKeys.depositLimitOtherSelector).val(""),o.focus()})):Number(o.attr("data-selected-value"))===t.Enums.DepositLimitTimePeriod.NoLimit&&(this.setAmountVisibility(!1),this.setNonVerifiedRegulatoryMessageVisibility(!0),this.setDepositLimitOptOutVisibility(!0))},i.prototype.setAmountVisibility=function(t){var e=$("div[data-section='deposit-limit-amount']");t?e.show():e.hide()},i.prototype.setNonVerifiedRegulatoryMessageVisibility=function(t){var e=$("div#NonVerifiedRegulatoryMessage");t?e.show():e.hide()},i.prototype.setDepositLimitOptOutVisibility=function(t){var e=$("#depositLimitOptOutSection");t?e.show():(e.hide(),$("#DepositLimitOptOut").addClass("unchecked").removeClass("checked"))},i.prototype.selectedValueChanged=function(t){var e=t.attr("data-selected-value");return"-1"!==e&&e!==t.attr("data-previous-value")},i.prototype.updateDepositLimitAmountHtml=function(e){if(e){var i=$("div[data-section='deposit-limit-amount']"),o=$("fieldset[data-section='deposit-limit-other']");i.html(e.partialHtml),o.removeClass("otherSelected"),t.OpenAccount.reinitialiseEvents(),this.reinitialiseDepositLimitAmountDropDown()}},i.prototype.reinitialiseDepositLimitAmountDropDown=function(){var e=t.OpenAccount.getComponent(t.Enums.ComponentName.DepositLimitAmountDropDown);e.initialise();var i=t.OpenAccount.getComponent(t.Enums.ComponentName.Validation);i.initialiseFor($("div[data-section='deposit-limit-amount']")),$("#DepositLimitOptOut").length>0&&this.validationService.hideValidationMessage($("#DepositLimitOptOut"))},i.depositLimitPeriodSelector="#DepositLimitPeriod",i}(e.BaseEvent);e.TimePeriodChangeEvent=i}(e=t.Events||(t.Events={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.getFindAddressButton=function(e){return e?t.PreviousFindAddressButtonSelector:t.CurrentFindAddressButtonSelector},t.getPreAddressSearch=function(e){return e?t.PreviousAddressPreSearchSelector:t.CurrentAddressPreSearchSelector},t.getPostAddressSearch=function(e){return e?t.PreviousAddressPostSearchSelector:t.CurrentAddressPostSearchSelector},t.CurrentFindAddressButtonSelector="[data-section='address']>div#AddressPreSearch #CurrentFindAddress",t.CurrentAddressPreSearchSelector="[data-section='address']>div#AddressPreSearch",t.CurrentAddressPostSearchSelector="[data-section='address']>div#AddressPostSearch",t.CurrentControlsToValidateSelector="[data-section='address']>div#AddressPreSearch input[data-val='true'].addressSearch:visible",t.PreviousFindAddressButtonSelector="[data-section='address']>div#TimeLivedArea #PreviousFindAddress",t.PreviousAddressPreSearchSelector="[data-section='address']>div#TimeLivedArea div#AddressPreSearch",t.PreviousAddressPostSearchSelector="[data-section='address']>div#TimeLivedArea div#AddressPostSearch",t.PreviousControlsToValidateSelector="[data-section='address']>div#TimeLivedArea div#AddressPreSearch input[data-val='true'].addressSearch:visible",t.PreviousAddressHeaderSelector="div[data-for-control='previous-address-header']",t.TimeLivedButtonSelector="[data-section='address'] button[data-time-lived-value]",t.TimeLivedAreaSelector="#TimeLivedArea",t.TimeLivedSelector="[data-section='address'] div#TimeLived",t.Addressfinding="div[data-control='finding-address']",t.ShowPreviousAddress="ShowPreviousAddress",t.HidePreviousAddress="HidePreviousAddress",t.findAddressButtonSelector="fieldset[data-section='address'] div#AddressPreSearch button[data-val-findaddress]",t}();t.AddressKeys=e}(e=t.Keys||(t.Keys={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.InputSelector=".flexiField_Input",t.SelectDateControl="select#DateOfBirthYear,select#DateOfBirthMonth,select#DateOfBirthDay,select#DateOfIssueYear,select#DateOfIssueMonth,select#DateOfIssueDay",t}();t.FlexiLabelKeys=e}(e=t.Keys||(t.Keys={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.LightBoxSelector="[data-control='lightBox']",t.SubmitSelector="#Submit",t.CloseButton=t.LightBoxSelector+" > div >div.lightBoxHeader .lightBoxCloseButton",t.CancelButton=t.LightBoxSelector+" div.linkButton",t.CancelText=t.LightBoxSelector+" #Cancel",t.ConfirmButton=t.LightBoxSelector+" #Confirm",t.ButtonSeperator=t.LightBoxSelector+" >div .hr",t.DynamicContentSelector=t.LightBoxSelector+" > div > div.lightBoxBody > div.dynamicContent",t.Header=t.LightBoxSelector+" > div > div.lightBoxHeader > h1",t.Message=t.LightBoxSelector+" > div > div.lightBoxBody > p",t.CannotCreateAccountSelector="fieldset[data-section='submit'] div[data-control='cannot-create-account']",t.SubmitButtonSelector="fieldset[data-section='submit'] div[data-control='button'], fieldset[data-section='update-identity'] div[data-control='updating-details']",t.UnableToLoginSelector="fieldset[data-section='submit'] div[data-control='unable-to-login'], fieldset[data-section='update-identity'] div[data-control='unable-to-login']",t}();t.LightBoxKeys=e}(e=t.Keys||(t.Keys={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e=function(){function t(){}return t.PageWaitingSelector="div.pageWaiting",t.PageWaitingSpinnerClass="pageWaitingSpinner",t}();t.PageWaitingKeys=e}(e=t.Keys||(t.Keys={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){}return e.initialiseComponents=function(i){var o=new Array,n=i.resolve("IUserAgent"),r=i.resolve("ICommon"),a=i.resolve("IFlexiLabelService"),s=i.resolve("IJsonParser"),c=i.resolve("ITrackingService"),l=i.resolve("ICountryChangeService"),u=i.resolve("ILightBoxService"),d=i.resolve("IValidationService"),p=i.resolve("IFrameService"),h=i.resolve("ILogger"),v=i.resolve("IDomDisplayService"),f=i.resolve("ITerminateSessionService"),m=i.resolve("IDniNieService"),g=i.resolve("IHttpService"),y=i.resolve("IErrorHandlingService"),S=i.resolve("ISessionSaveFormService"),A=!!$("input[type='hidden']#ClientValidationEnabled").val();return o.push(e.getComponentMetaData(!0,new t.Components.MsiExplorer(n),t.Enums.ComponentName.MsiExplorer)),o.push(e.getComponentMetaData(!0,new t.Components.FlexiLabel(n,r,a),t.Enums.ComponentName.FlexiLabel)),o.push(e.getComponentMetaData(!0,new t.Components.RadioComponent(n,d),t.Enums.ComponentName.RadioComponent)),o.push(e.getComponentMetaData(!0,new t.Components.CheckComponent(n),t.Enums.ComponentName.CheckComponent)),o.push(e.getComponentMetaData(!0,new t.Components.RadioComponent(n,d),t.Enums.ComponentName.RadioComponent)),o.push(e.getComponentMetaData(!0,new t.Components.Validation(A,d),t.Enums.ComponentName.Validation)),o.push(e.getComponentMetaData(!0,new t.Components.ContactInformation,t.Enums.ComponentName.ContactInformation)),o.push(e.getComponentMetaData(!0,new t.Components.GdprInformation,t.Enums.ComponentName.GdprInformation)),o.push(e.getComponentMetaData(!0,new t.Components.CountryOfResidence(l,u),t.Enums.ComponentName.CountryOfResidence)),o.push(e.getComponentMetaData(!0,new t.Components.InformationBox(n,s,d),t.Enums.ComponentName.InformationBox)),o.push(e.getComponentMetaData(!0,new t.Components.CloseWindow(p,c,f),t.Enums.ComponentName.CloseWindow)),o.push(e.getComponentMetaData(!0,new t.Components.LightBox(u),t.Enums.ComponentName.LightBox)),o.push(e.getComponentMetaData(!0,new t.Components.PopupWindow,t.Enums.ComponentName.PopupWindow)),o.push(e.getComponentMetaData(!0,new t.Components.OpenWindow(h,n),t.Enums.ComponentName.OpenWindow)),o.push(e.getComponentMetaData(!0,new t.Components.Help,t.Enums.ComponentName.Help)),o.push(e.getComponentMetaData(!0,new t.Components.BulgariaTimeLivedComponent(v),t.Enums.ComponentName.BulgariaTimeLivedComponent)),o.push(e.getComponentMetaData(!0,new t.Components.PrePopulation,t.Enums.ComponentName.PrePopulation)),o.push(e.getComponentMetaData(!0,new t.Components.DniNieNumberComponent(m),t.Enums.ComponentName.DniNieNumberComponent)),o.push(e.getComponentMetaData(!0,new t.Components.InactivityTimeout(g,f,y),t.Enums.ComponentName.InactivityTimeoutComponent)),o.push(e.getComponentMetaData(!0,new t.Components.FormStateComponent(S),t.Enums.ComponentName.FormStateComponent)),o.push(e.getComponentMetaData(!0,new t.Components.SetCountryChangeFocus,t.Enums.ComponentName.SetCountryChangeFocus)),o.push(e.getComponentMetaData(!0,new t.Components.SetCountryChangeFocus,t.Enums.ComponentName.SetCountryChangeFocus)),o.push(e.getComponentMetaData(!0,new t.Components.DepositLimitAmountDropDown(d),t.Enums.ComponentName.DepositLimitAmountDropDown)),o.push(e.getComponentMetaData(!0,new t.Components.AnchorTagsTargetBlank,t.Enums.ComponentName.AnchorTagsTargetBlank)),o.push(e.getComponentMetaData(!0,new t.Components.LegendComponent,t.Enums.ComponentName.Legend)),o},e.getComponentMetaData=function(t,e,i){return{initialiseOnLoad:t,component:e,componentName:i}},e}();e.ComponentRepository=i}(e=t.Repository||(t.Repository={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){}return e.initialiseDom=function(e){var i=new Array;return i.push(new t.DomInitialisers.PlatformDomInitialiser(e.resolve("IClient"),e.resolve("IUserAgent"),e.resolve("IPlatformService"),e.resolve("IPageScroller"))),i.push(new t.DomInitialisers.AddressDomInitialiser),i},e}();e.DomInitialiserRepository=i}(e=t.Repository||(t.Repository={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function i(){}return i.initialiseEvents=function(o){var n=!!$("input[type='hidden']#ClientValidationEnabled").val(),r=o.resolve("IUserAgent"),a=o.resolve("ILogger"),s=o.resolve("IPasswordInformationService"),c=o.resolve("IValidationService"),l=o.resolve("ILightBoxService"),u=o.resolve("IHttpService"),d=o.resolve("ITrackingService"),p=o.resolve("IDomDisplayService"),h=o.resolve("IDniNieService"),v=o.resolve("ICommon"),f=o.resolve("ICodiceFiscaleService"),m=o.resolve("IDateService"),g=o.resolve("IAccountCreationService"),y=o.resolve("IDanishIdentityUpdateService"),S=o.resolve("ISpanishIdentityUpdateService"),A=o.resolve("IItalianIdentityUpdateService"),C=o.resolve("ISwedishIdentityUpdateService"),b=o.resolve("IAddressStateHandler"),E=o.resolve("ITerminateSessionService"),P=o.resolve("IAuditAddressHandler"),L=o.resolve("IClient"),B=o.resolve("ITabbingService"),x=o.resolve("IDepositLimitEventProcessorFactory"),w=o.resolve("IPageScroller"),I=new Array;return I.push(i.getEventMetaData(!0,new t.Events.PageUnloadEvent(d,E),t.Enums.EventName.PageUnloadEvent)),I.push(i.getEventMetaData(!0,new t.Events.PasswordInputEvent(a,r,s),t.Enums.EventName.PasswordInputEvent)),I.push(i.getEventMetaData(!0,new t.Events.SanitiseApostropheEvent,t.Enums.EventName.SanitiseApostropheEvent)),I.push(i.getEventMetaData(!0,new t.Events.TimedUsernameValidationEvent(c),t.Enums.EventName.TimedUsernameValidationEvent)),I.push(i.getEventMetaData(!0,new t.Events.PasswordValidationEvent(c),t.Enums.EventName.PasswordValidationEvent)),I.push(i.getEventMetaData(!0,new t.Events.PasswordSpainUsaValidationEvent(c,s),t.Enums.EventName.PasswordSpainUsaValidationEvent)),I.push(i.getEventMetaData(!0,new t.Events.PasswordGreeceValidationEvent(c,s),t.Enums.EventName.PasswordGreeceValidationEvent)),I.push(i.getEventMetaData(!0,new t.Events.NationalitySetEvent(h),t.Enums.EventName.NationalitySetEvent)),I.push(i.getEventMetaData(!0,new t.Events.DateInitialiseEvent(v),t.Enums.EventName.DateInitialiseEvent)),I.push(i.getEventMetaData(!0,new t.Events.DocumentTypeChangeEvent(c,r),t.Enums.EventName.DocumentTypeChangeEvent)),I.push(i.getEventMetaData(!0,new t.Events.RemoteDocumentTypeOnChangeEvent(u),t.Enums.EventName.RemoteDocumentTypeOnChangeEvent)),I.push(i.getEventMetaData(!0,new t.Events.RemoteBirthOnChangeEvent(u,a,r),t.Enums.EventName.RemoteBirthOnChangeEvent)),I.push(i.getEventMetaData(!0,new t.Events.ScreenResizeEvent(L),t.Enums.EventName.ScreenResizeEvent)),I.push(i.getEventMetaData(!0,new t.Events.CodiceFiscaleCalculateEvent(f,c,m,r),t.Enums.EventName.CodiceFiscaleCalculateEvent)),I.push(i.getEventMetaData(!0,new t.Events.ClearConfirmationErrorEvent(c),t.Enums.EventName.ClearConfirmationErrorEvent)),I.push(i.getEventMetaData(!0,new t.Events.PageShowEvent,t.Enums.EventName.PageShowEvent)),I.push(i.getEventMetaData(!0,new t.Events.FindAddressButtonOnBlurEvent,t.Enums.EventName.FindAddressButtonOnBlurEvent)),I.push(i.getEventMetaData(!0,new t.Events.HouseNumberOnFocusEvent(c),t.Enums.EventName.HouseNumberOnFocusEvent)),I.push(i.getEventMetaData(!0,new t.Events.CurrentAddressLine1OnFocusEvent(c),t.Enums.EventName.CurrentAddressLine1OnFocusEvent)),I.push(i.getEventMetaData(!0,new t.Events.CreateAccountSubmitButtonClickEvent(n,c,l,a,g,d,e.ProcessorsRepository.initialiseAccountCreationProcessors(o)),t.Enums.EventName.CreateAccountSubmitButtonClickEvent)),I.push(i.getEventMetaData(!0,new t.Events.DanishIdentityUpdateValidationEvent(n,c,l,a,y,d,e.ProcessorsRepository.initialiseAccountCreationProcessors(o)),t.Enums.EventName.DenmarkAndGreenlandIdentityUpdateButtonClickEvent)),I.push(i.getEventMetaData(!0,new t.Events.SpanishIdentityUpdateValidationEvent(n,c,l,a,S,d,e.ProcessorsRepository.initialiseAccountCreationProcessors(o)),t.Enums.EventName.DenmarkAndGreenlandIdentityUpdateButtonClickEvent)),I.push(i.getEventMetaData(!0,new t.Events.ItalianIdentityUpdateValidationEvent(n,c,l,a,A,d,e.ProcessorsRepository.initialiseAccountCreationProcessors(o)),t.Enums.EventName.ItalianIdentityUpdateButtonClickEvent)),I.push(i.getEventMetaData(!0,new t.Events.SwedishIdentityUpdateValidationEvent(n,c,l,a,C,d,e.ProcessorsRepository.initialiseAccountCreationProcessors(o)),t.Enums.EventName.SwedishIdentityUpdateButtonClickEvent)),I.push(i.getEventMetaData(!0,new t.Events.SwedishVerificationRetryFormValidationEvent,t.Enums.EventName.SwedishVerificationRetryFormValidationEvent)),I.push(i.getEventMetaData(!0,new t.Events.CurrentFindAddressSubmitButtonClickEvent(n,c,l,a,p),t.Enums.EventName.CurrentFindAddressSubmitButtonClickEvent)),I.push(i.getEventMetaData(!1,new t.Events.PreviousFindAddressSubmitButtonClickEvent(n,c,l,a),t.Enums.EventName.PreviousFindAddressSubmitButtonClickEvent)),I.push(i.getEventMetaData(!1,new t.Events.TimeLivedClickEvent(a,c),t.Enums.EventName.TimeLivedClickEvent)),I.push(i.getEventMetaData(!1,new t.Events.AddressLookupLightBoxClickEvent(d,b,P),t.Enums.EventName.AddressLookupLightBoxClickEvent)),I.push(i.getEventMetaData(!0,new t.Events.MaxLengthRestrictionEvent,t.Enums.EventName.MaxLengthRestrictionEvent)),I.push(i.getEventMetaData(!0,new t.Events.AddressScrollEvent,t.Enums.EventName.AddressScrollEvent)),I.push(i.getEventMetaData(!0,new t.Events.StateOnChangeEvent,t.Enums.EventName.StateOnChangeEvent)),I.push(i.getEventMetaData(!0,new t.Events.HideSelectListOnDocumentTouchEvent(r),t.Enums.EventName.HideSelectListOnDocumentTouchEvent)),I.push(i.getEventMetaData(!0,new t.Events.PostcodeOnBlurEvent,t.Enums.EventName.PostcodeOnBlurEvent)),I.push(i.getEventMetaData(!0,new t.Events.SelectOccupationEvent(l),t.Enums.EventName.SelectOccupationEvent)),I.push(i.getEventMetaData(!0,new t.Events.DepositLimitButtonDropdownClickEventDropDown(v,c,w,r,u,B,x),t.Enums.EventName.DepositLimitButtonDropdownClickEventDropDown)),I.push(i.getEventMetaData(!0,new t.Events.DepositLimitkeyUpEvent,t.Enums.EventName.DepositLimitkeyUpEvent)),I.push(i.getEventMetaData(!0,new t.Events.TimePeriodChangeEvent(u,c),t.Enums.EventName.TimePeriodChangeEvent)),I.push(i.getEventMetaData(!0,new t.Events.ButtonDropDownTabbingEvent(L,B,w),t.Enums.EventName.ButtonDropDownTabbingEvent)),I.push(i.getEventMetaData(!0,new t.Events.PhoneNumericalRestrictionEvent,t.Enums.EventName.PhoneNumericalRestrictionEvent)),I},i.getEventMetaData=function(t,e,i){return{initialiseOnLoad:t,event:e,eventName:i}},i}();e.EventRepository=i}(e=t.Repository||(t.Repository={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(){}return e.initialiseAccountCreationProcessors=function(e){var i=e.resolve("ILightBoxService"),o=e.resolve("IValidationService"),n=e.resolve("IFrameService"),r=new Array;return r.push(new t.Processors.AccountCreation.GamingAccountCreationProcessor),r.push(new t.Processors.AccountCreation.RedirectionAccountCreationProcessor(i,n)),r.push(new t.Processors.AccountCreation.DuplicateDocumentNumberAccountCreationProcessor(i)),r.push(new t.Processors.AccountCreation.DeceasedDetailsAccountCreationProcessor(i)),r.push(new t.Processors.AccountCreation.FailedPasswordStorageAccountCreationProcessor(i)),r.push(new t.Processors.AccountCreation.UnderageDetailsAccountCreationProcessor(i)),r.push(new t.Processors.AccountCreation.DuplicateUserNameAccountCreationProcessor(i,o)),r.push(new t.Processors.AccountCreation.DuplicateEmailAddressAccountCreationProcessor(i,o)),r.push(new t.Processors.AccountCreation.DuplicateMobileNumberAccountCreationProcessor(i,o)),r.push(new t.Processors.AccountCreation.ItalyNoRetryAccountCreationProcessor(i)),r.push(new t.Processors.AccountCreation.GeneralErrorAccountCreationProcessor(i)),r.push(new t.Processors.AccountCreation.OnAccountCreationErrorProcessor(i)),r.push(new t.Processors.AccountCreation.CompromisedCredentialsCreationProcessor(i,o)),r},e}();e.ProcessorsRepository=i}(e=t.Repository||(t.Repository={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(){function e(e){var i=t.Core.Ioc.OpenAccountContainer.container;this.common=i.resolve("ICommon"),
this.attribute=e}return e.prototype.validate=function(t){var e=t[0].hasAttribute(this.attribute);return{isValid:!e||this.validateControl(t),errorMessage:t.attr(this.attribute),controlId:"#"+t.attr("id"),validator:this.name}},e.prototype.getDateValue=function(t){var e;if(t.is("input"))if(e=t.val(),0===e.length)e="dd/MM/yyyy";else{var i=e.split("-");e=i[2]+"/"+(parseInt(i[1])-1)+"/"+i[0]}else{var o=this.common.getContainer(t,"class","date-fallback"),n=o.attr("for");e=o.find("select#"+n+"Day").val()+"/"+o.find("select#"+n+"Month").val()+"/"+o.find("select#"+n+"Year").val()}return e},e.prototype.getDate=function(t){var e=this.getDateValue(t),i=e.split("/");return new Date(parseInt(i[2]),parseInt(i[1]),parseInt(i[0]))},e}();e.BaseDateValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="CurpCodeValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.dateService=n.resolve("IDateService"),o.userAgent=n.resolve("IUserAgent"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=$.trim(t.val().toString()).toUpperCase();return this.validateCurpCode(e)},i.prototype.validateCurpCode=function(t){return this.validateDateOfBirth(t)},i.prototype.validateDateOfBirth=function(t){var e=this.dateService.getDate(this.getDateOfBirthControl());return this.userAgent.isEdge16()&&e.getTimezoneOffset()>0&&e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3),t.substring(4,6)===this.getYearValue(e)&&t.substring(6,8)===this.getMonthValue(e)&&t.substring(8,10)===this.getDayValue(e)},i.prototype.getDayValue=function(t){var e=t.getUTCDate().toString();return e=this.addDatePadding(e)},i.prototype.getMonthValue=function(t){var e=(t.getUTCMonth()+1).toString();return e=this.addDatePadding(e)},i.prototype.getYearValue=function(t){var e=t.getUTCFullYear().toString();return e.substr(-2)},i.prototype.addDatePadding=function(t){return 1===t.length&&(t="0"+t),t},i.prototype.getDateOfBirthControl=function(){return $("input#DateOfBirth").parent().is(":visible")?$("input#DateOfBirth"):$("select#DateOfBirthYear")},i.attribute="data-val-curpcode",i}(e.BaseValidator);e.CurpCodeValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="DuplicateMobileNumberRemoteValidator",o.previousValidity=!0;var n=t.Core.Ioc.OpenAccountContainer.container;return o.httpService=n.resolve("IHttpService"),o.phoneNumberService=n.resolve("IPhoneNumberService"),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=!0,i=t[0].hasAttribute("data-force-remote-validation");if(i||this.previousValue!==t.val()){this.previousValue=t.val();var o=$("#"+t.attr("data-val-duplicatemobilenumberremote-url")).val(),n={PhoneNumber:this.phoneNumberService.getSanitisedPhoneNumber()};this.httpService.post(o,n,function(t){e=!t.exists},null,!1),this.previousValidity=e}else e=this.previousValidity;return e},i.attribute="data-val-duplicatemobilenumberremote",i}(e.BaseValidator);e.DuplicateMobileNumberRemoteValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i=function(e){function i(){var o=e.call(this,i.attribute)||this;o.name="RestrictedStateRegionValidator";var n=t.Core.Ioc.OpenAccountContainer.container;return o.jsonParser=n.resolve("IJsonParser"),o.getCountryRestrictedStateRegions(),o}return __extends(i,e),i.prototype.validateControl=function(t){var e=$("#Country").find(":selected").val(),i=!this.countryRestrictedStateRegions.some(function(i){return i.countryId===e&&i.restrictedStateRegions.indexOf(t.val())>-1});return i},i.prototype.getCountryRestrictedStateRegions=function(){if(!this.countryRestrictedStateRegions){var t=this.jsonParser.parse($("#countryRestrictedStateRegions").val());t.isSuccess()&&(this.countryRestrictedStateRegions=t.result())}},i.attribute="data-val-restrictedstateregion",i}(e.BaseValidator);e.RestrictedStateRegionValidator=i}(e=t.Validation||(t.Validation={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t}();t.FrameMessageHandler=e}(e=t.Handler||(t.Handler={}))}(e=t.Frame||(t.Frame={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.IframeLoaded="IFRAME_LOADED",t.HideHeader="HIDE_HEADER",t.HideFooterOverlay="HIDE_FOOTER_OVERLAY",t.InactivityReset="INACTIVITY_RESET",t.IframeHeight="IFRAME_HEIGHT",t.PageScroll="PAGE_SCROLL",t.NavHome="NAV_HOME",t.NavDomain="NAV_3RDPARTY",t.SessionUpdated="SESSION_UPDATED",t.IFrameComplete="IFRAME_COMPLETE",t}();t.FrameMessages=e}(e=t.Messenger||(t.Messenger={}))}(e=t.Frame||(t.Frame={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t,e){this.lightBoxService=t,this.validationService=e,this.submitButtonSelector="fieldset[data-section='submit'] div[data-control='button']"}return e.prototype.isApplicable=function(t){return"PasswordIssue"===t},e.prototype.process=function(e){var i={controlId:"ConfirmPassword",errorMessage:e.errorMessage,isValid:!1,validator:"CompromisedCredentialsCreationProcessor"},o=$("#ConfirmPassword");this.validationService.showValidationMessage(o,i),o.attr("toFocus",""),this.lightBoxService.hide(t.Enums.LightBoxEventSource.CreatingAccount),this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors),$(this.submitButtonSelector).show()},e}();e.CompromisedCredentialsCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this.lightBoxService=t}return e.prototype.isApplicable=function(t){return"DeceasedDetails"==t},e.prototype.process=function(e){var i=$("#Country").find(":selected").val();parseInt(i)===t.Enums.CountryId.Spain&&this.lightBoxService.show(t.Enums.LightBoxEventSource.DeceasedDetails)},e}();e.DeceasedDetailsAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this.lightBoxService=t}return e.prototype.isApplicable=function(t){return"DuplicateDocumentNumber"===t||"DuplicateAccount"===t||"DuplicateUserAccountDetails"===t},e.prototype.process=function(e){var i=parseInt($("#Country").find(":selected").val());i!==t.Enums.CountryId.Spain&&i!==t.Enums.CountryId.Greece&&i!==t.Enums.CountryId.Germany||this.lightBoxService.show(t.Enums.LightBoxEventSource.DuplicateDetails)},e}();e.DuplicateDocumentNumberAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t,e){this.lightBoxService=t,this.validationService=e,this.submitButtonSelector="fieldset[data-section='submit'] div[data-control='button']"}return e.prototype.isApplicable=function(t){return"DuplicateEmailAddress"===t},e.prototype.process=function(e){var i=$("#EmailAddress"),o={controlId:"EmailAddress",errorMessage:i.attr("data-val-remote-validation"),isValid:!1,validator:"DuplicateEmailAddressAccountCreationProcessor"};this.validationService.showValidationMessage(i,o),this.lightBoxService.hide(t.Enums.LightBoxEventSource.CreatingAccount),this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors),$(this.submitButtonSelector).show()},e}();e.DuplicateEmailAddressAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t,e){this.lightBoxService=t,this.validationService=e}return e.prototype.isApplicable=function(t){return"DuplicateMobileNumber"===t.toString()},e.prototype.process=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors);var i=$("#PhoneNumber");i.attr("data-force-remote-validation",""),this.validate($("#PhoneNumber")),i.removeAttr("data-force-remote-validation")},e.prototype.validate=function(t){var e=this.validationService.validate(t);e.isValid||(this.validationService.showValidationMessage(t,e),$(e.controlId).attr("toFocus",""))},e}();e.DuplicateMobileNumberAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this.lightBoxService=t}return e.prototype.isApplicable=function(t){return"DuplicateUserAccountDetails"===t},e.prototype.process=function(e){var i=$("#Country").find(":selected").val();parseInt(i)===t.Enums.CountryId.Germany&&this.lightBoxService.show(t.Enums.LightBoxEventSource.DuplicateDetails)},e}();e.DuplicateUserAccountDetailsAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t,e){this.lightBoxService=t,this.validationService=e}return e.prototype.isApplicable=function(t){return"DuplicateUserName"===t},e.prototype.process=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors);var i=$("#UserName");i.attr("data-force-remote-validation",""),this.validate($("#UserName")),i.removeAttr("data-force-remote-validation")},e.prototype.validate=function(t){var e=this.validationService.validate(t);e.isValid||(this.validationService.showValidationMessage(t,e),$(e.controlId).attr("toFocus",""))},e}();e.DuplicateUserNameAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this.lightBoxService=t}return e.prototype.isApplicable=function(t){return"FailedPasswordStorage"===t},e.prototype.process=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.FailedPasswordStorage)},e}();e.FailedPasswordStorageAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.nativeAppRegistrationCompleteRequired=[6,7,8,9,27,28,46,47,48,49,65,66],this.gamingNativeAppOARegistrationComplete="gaming://registrationCompleted"}return t.prototype.isApplicable=function(t){return"None"===t},t.prototype.process=function(t){this.nativeAppRegistrationCompleteRequired.indexOf($("#hdnPlatformId").val())>-1&&this.renderGamesNativeRegistrationCompleteScript(this.gamingNativeAppOARegistrationComplete)},t.prototype.renderGamesNativeRegistrationCompleteScript=function(t){var e=document.createElement("iframe");e.src=t,e.style.display="none",document.body.appendChild(e)},t}();t.GamingAccountCreationProcessor=e}(e=t.AccountCreation||(t.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this.lightBoxService=t,this.submitButtonSelector="fieldset[data-section='submit'] div[data-control='button']"}return e.prototype.isApplicable=function(t){return"General"===t},e.prototype.process=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.SubmitErrors,e),$(this.submitButtonSelector).show()},e}();e.GeneralErrorAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this.lightBoxService=t}return e.prototype.isApplicable=function(t){return"ItalyNoRetry"===t},e.prototype.process=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.ItalyNoRetry,e)},e}();e.ItalyNoRetryAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this.lightBoxService=t,this.submitButtonSelector="fieldset[data-section='submit'] div[data-control='button']"}return e.prototype.isApplicable=function(t){return"AccountCreationError"===t},e.prototype.process=function(e){this.lightBoxService.show(t.Enums.LightBoxEventSource.OnAccountCreationError,e),$(this.submitButtonSelector).show()},e}();e.OnAccountCreationErrorProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t,e){this.lightBoxService=t,this.iframeService=e,this.iosSportsNativeAppPlatformId="70",this.timeoutInSeconds=this.convertToSeconds(Number($("#hdnAccountCreatedRedirectTimeout").val()))}return e.prototype.isApplicable=function(t){return"None"===t},e.prototype.process=function(e){var i=this;this.lightBoxService.show(t.Enums.LightBoxEventSource.AccountCreated);var o=setTimeout(function(){clearTimeout(o),$("#hdnRefreshPage").val("1"),document.location.href=e.redirectUrl,i.iframeService.isInHostedMode()&&(o=setTimeout(function(){clearTimeout(o),i.iframeService.postPageScroll(0),i.iframeService.postSessionUpdated()},10))},this.timeoutInSeconds)},e.prototype.convertToSeconds=function(t){return isNaN(t)?t:1e3*t},e}();e.RedirectionAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this.lightBoxService=t}return e.prototype.isApplicable=function(t){return"UnderageDetails"==t},e.prototype.process=function(e){var i=$("#Country").find(":selected").val();parseInt(i)===t.Enums.CountryId.Spain&&this.lightBoxService.show(t.Enums.LightBoxEventSource.UnderageDetails)},e}();e.UnderageDetailsAccountCreationProcessor=i}(i=e.AccountCreation||(e.AccountCreation={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.process=function(t){var e=$("p.countrySpecificMessage");t.countrySpecificMessage?(e.text(t.countrySpecificMessage),e.show()):(e.text(""),e.hide())},t}();t.CountrySpecificMessageProcessor=e}(e=t.CountryChange||(t.CountryChange={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.supports=function(e){return"keydown"===e.type&&(13===e.keyCode||27===e.keyCode||37===e.keyCode)&&$(e.currentTarget).is(t.BaseDropdownEventProcessor.dropdownContainerSelector)},i.prototype.process=function(t,e,i){this.depositLimitButtonClick($(i.target).find("input"))},i}(t.BaseDropdownEventProcessor);t.DropdownContainerEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){var i=e.call(this)||this,o=t.Core.Ioc.OpenAccountContainer.container;return i.depositLimitService=o.resolve("IDepositLimitService"),i}return __extends(i,e),i.prototype.isNoLimitSelected=function(){return this.depositLimitService.hasUserSelectedNoLimitAmount()},i.prototype.amountExceedsNonVerifiedAmount=function(){var t=!1;return t="True"===$("#hdnForceAllDepositLimits").val()?this.validateAllDepositLimits():this.validateDepositLimitAmount()},i.prototype.validateAllDepositLimits=function(){var e=!1,i=parseInt($(t.Keys.DepositLimitKeys.depositLimitNonVerifiedMaxAmount24H).val()),o=parseInt($(t.Keys.DepositLimitKeys.depositLimitNonVerifiedMaxAmount7D).val()),n=parseInt($(t.Keys.DepositLimitKeys.depositLimitNonVerifiedMaxAmount30D).val()),r=parseInt($(t.Keys.DepositLimitKeys.depositLimitTwentyFourHourSelector).attr("data-selected-value")),a=parseInt($(t.Keys.DepositLimitKeys.depositLimitSevenDaySelector).attr("data-selected-value")),s=parseInt($(t.Keys.DepositLimitKeys.depositLimitThirtyDaySelector).attr("data-selected-value"));return(this.isNonVerifiedLimitExceeded(i,r)||this.isNonVerifiedLimitExceeded(o,a)||this.isNonVerifiedLimitExceeded(n,s))&&(e=!0),e},i.prototype.validateDepositLimitAmount=function(){var e=!1,i=parseInt($(t.Keys.DepositLimitKeys.depositLimitNonVerifiedMaxAmount).val()),o=parseInt($(t.Keys.DepositLimitKeys.depositLimitAmountSelector).attr("data-selected-value"));return e=this.isNonVerifiedLimitExceeded(i,o)},i}(e.BaseDropdownEventProcessor);e.NonVerifiedLimitBaseProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(t){var e;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.supports=function(e){return $(e.currentTarget).is(t.BaseDropdownEventProcessor.buttonDropdownSelector+" "+t.BaseDropdownEventProcessor.optionSelector)&&$(e.currentTarget).parents("div[data-section='deposit-limit-amount']").length>0},i.prototype.process=function(t,e,i){var o=this.isNoLimitSelected();this.setNonVerifiedRegulatoryMessageVisibility(o||this.amountExceedsNonVerifiedAmount()),this.setDepositLimitOptOutVisibility(o)},i}(t.NonVerifiedLimitBaseProcessor);t.NonVerifiedLimitClickEventProcessor=e}(e=t.DepositLimitEvents||(t.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.supports=function(e){var i=[t.Enums.KeyCode.Tab,t.Enums.KeyCode.Escape,t.Enums.KeyCode.Enter],o=i.indexOf(e.keyCode)>-1,n=$(e.target).is(t.Keys.DepositLimitKeys.depositLimitAmountSelector)||$(e.target).children(t.Keys.DepositLimitKeys.depositLimitAmountSelector).length>0||$(e.target).is(t.Keys.DepositLimitKeys.depositLimitTwentyFourHourSelector)||$(e.target).children(t.Keys.DepositLimitKeys.depositLimitTwentyFourHourSelector).length>0||$(e.target).is(t.Keys.DepositLimitKeys.depositLimitSevenDaySelector)||$(e.target).children(t.Keys.DepositLimitKeys.depositLimitSevenDaySelector).length>0||$(e.target).is(t.Keys.DepositLimitKeys.depositLimitThirtyDaySelector)||$(e.target).children(t.Keys.DepositLimitKeys.depositLimitThirtyDaySelector).length>0;return o&&n},i.prototype.process=function(t,e,i){var o=this.isNoLimitSelected();this.setNonVerifiedRegulatoryMessageVisibility(o||this.amountExceedsNonVerifiedAmount()),this.setDepositLimitOptOutVisibility(o)},i}(e.NonVerifiedLimitBaseProcessor);e.NonVerifiedLimitKeyEventProcessor=i}(i=e.DepositLimitEvents||(e.DepositLimitEvents={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.build=function(e,i){e.html(i.page),t.OpenAccount.getComponent(t.Enums.ComponentName.Validation).initialiseFor(e),t.OpenAccount.getComponent(t.Enums.ComponentName.MsiExplorer).initialiseFor(e),t.OpenAccount.reinitialiseEvents()},e.prototype.supports=function(e){return Number($("#Country").find(":selected").val())===t.Enums.CountryId.Italy},e}();e.BirthChangeJsonToHtmlProcessor=i}(i=e.Events||(e.Events={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.build=function(e,i){e.html(i.page),t.OpenAccount.getComponent(t.Enums.ComponentName.Validation).initialiseFor(e),t.OpenAccount.getComponent(t.Enums.ComponentName.MsiExplorer).initialiseFor(e)},e.prototype.supports=function(e){var i=Number($("#Country").find(":selected").val());return i===t.Enums.CountryId.Bulgaria||i===t.Enums.CountryId.Italy},e}();e.DocumentTypeChangeJsonToHtmlProcessor=i}(i=e.Events||(e.Events={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(i,o,n,r,a,s){var c=e.call(this,t.Enums.LightBoxEventSource.OnAccountCreationUS,"LightBox.LightBoxAccountCreationUSProcessor",r,i)||this;return c.sessionSaveFormService=o,c.lightBoxService=n,c.pageScroller=a,c.client=s,c.registerLayoutProcessors(),c}return __extends(i,e),i.prototype.hide=function(){e.prototype.hide.call(this)},i.prototype.show=function(t){e.prototype.show.call(this),this.initaliseLayout(!1),this._data=t,$(".lightBoxBody").attr("tabindex",-1).focus(),setTimeout(function(){return $("."+i.selectorPrefix).parent().show()},0)},i.prototype.setupLightBox=function(){e.prototype.setupLightBox.call(this),$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("confirmAccountCreationUSLightBox")},i.prototype.supports=function(e){return e===t.Enums.LightBoxEventSource.OnAccountCreationUS},i.prototype.bindEvents=function(){var i=this;e.prototype.bindEvents.call(this);var o=$(t.Keys.LightBoxKeys.CancelButton);$(t.Keys.LightBoxKeys.ConfirmButton).on(e.prototype.buildEventName.call(this,"click"),function(t){return i.confirmClick(t)}),$(t.Keys.LightBoxKeys.ConfirmButton).on(e.prototype.buildEventName.call(this,"touchend"),function(t){return i.confirmClick(t)}),o.on(e.prototype.buildEventName.call(this,"click"),function(t){return i.cancelClick(t)}),o.on(e.prototype.buildEventName.call(this,"touchend"),function(t){return i.cancelClick(t)}),o.on(e.prototype.buildEventName.call(this,"keypress"),function(t){return i.onCancelKeyUp(t)}),this.sessionSaveFormService.removeForm()},i.prototype.confirmClick=function(e){var i=$(e.target);i[0].hasAttribute("selected")||($(t.Keys.LightBoxKeys.ConfirmButton).removeAttr("selected"),i.attr("selected",""),i.parent().parent().attr("selected","")),this.hide(),this.clearLayout(),this.pageScroller.scrollToElement($("fieldset[data-section=submit]")[0]),this._data&&"function"==typeof this._data&&this._data()},i.prototype.unbindEvents=function(){$(t.Keys.LightBoxKeys.ConfirmButton).off(e.prototype.buildEventName.call(this,"click")),$(t.Keys.LightBoxKeys.CancelButton).off(e.prototype.buildEventName.call(this,"click")).off(e.prototype.buildEventName.call(this,"keypress")),e.prototype.unbindEvents.call(this)},i.prototype.registerLayoutProcessors=function(){this.layoutProcessors=new Array,this.layoutProcessors.push(new t.Processors.LightBox.Common.MobileIframeLayoutProcessor(i.selectorPrefix)),this.layoutProcessors.push(new t.Processors.LightBox.Common.DesktopLayoutProcessor(i.selectorPrefix)),this.layoutProcessors.push(new t.Processors.LightBox.Common.MobileLayoutProcessor(i.selectorPrefix))},i.prototype.clearLayout=function(){this.layoutProcessors.forEach(function(t){return t.clear(null)})},i.prototype.hideCreatingAccountLightbox=function(){this.lightBoxService.hide(t.Enums.LightBoxEventSource.CreatingAccount)},i.prototype.onCancelKeyUp=function(e){var i=e.which||e.keyCode;i===t.Enums.KeyCode.Enter&&this.cancelClick(e)},i.prototype.cancelClick=function(e){this.cancel(e,t.Keys.LightBoxKeys.CancelButton),this.clearLayout(),this.hideCreatingAccountLightbox(),this.pageScroller.scrollToElement($("fieldset[data-section=submit]")[0])},i.prototype.cancel=function(t,e){var i=$(t.target);i[0].hasAttribute("selected")||($(e).removeAttr("selected"),i.attr("selected",""),i.parent().parent().attr("selected","")),this.hide()},i.selectorPrefix="accountCreationUSLightBox",i}(e.BaseModalLightBoxProcessor);e.LightBoxAccountCreationUSProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(i){function o(e,o,n,r,a){var s=i.call(this,t.Enums.LightBoxEventSource.SelectOccupation,"LightBox.LightBoxSelectOccupationProcessor",e,o)||this;return s.pageScroller=n,s.client=r,s.frameService=a,s.dynamicContentButtonSelector=t.Keys.LightBoxKeys.DynamicContentSelector+" div[data-control='button'] a",s.selectOccupationTextBoxSelector="div#MexicoOccupationArea input#Occupation",s.occupationTemplate='<div data-control="button" class="addressButtons"><a id="{0}">{1}</a><div></div></div>',s.dynamicContentSelector="div[data-control='lightBox'] > div > div.lightBoxBody > div.dynamicContent",s.occupationListSelector="div#MexicoOccupationArea > div.occupations-list",s.registerLayoutProcessors(),s}return __extends(o,i),o.prototype.show=function(){$(this.selectOccupationTextBoxSelector).data("ignore-blur","true"),this.setDynamicContent(),this.frameService.isInHostedMode()&&this.pageScroller.scrollToPoint(0),i.prototype.show.call(this),i.prototype.initaliseLayout.call(this,!1),this.client.isAndroidNativeBrowserVersionLessThan4_4()||$("fieldset[data-section='address']").append($(t.Keys.LightBoxKeys.LightBoxSelector)),$(o.lightBoxMessageSelector).hide(),setTimeout(function(){return $("."+o.selectorPrefix).parent().show()},0)},o.prototype.hide=function(){this.clearLayout(),$(t.Keys.LightBoxKeys.DynamicContentSelector).empty(),$(o.lightBoxMessageSelector).show(),$(t.Keys.LightBoxKeys.LightBoxSelector).removeClass("addressSearchLightBox"),$(t.Keys.LightBoxKeys.LightBoxSelector).attr("id",""),i.prototype.hide.call(this)},o.prototype.bindEvents=function(){var e=this;$(t.Keys.LightBoxKeys.CloseButton).on(i.prototype.buildEventName.call(this,"click"),function(){return e.onClose()}),$(this.dynamicContentButtonSelector).on(this.buildEventName("click"),function(t){return e.onOccupationSelect(t)}),i.prototype.bindEvents.call(this)},o.prototype.unbindEvents=function(){$(t.Keys.LightBoxKeys.CloseButton).off(i.prototype.buildEventName.call(this,"click")),$(this.dynamicContentButtonSelector).off(i.prototype.buildEventName.call(this,"click")),i.prototype.unbindEvents.call(this)},o.prototype.registerLayoutProcessors=function(){this.layoutProcessors=new Array,this.layoutProcessors.push(new e.Common.MobileIframeLayoutProcessor(o.selectorPrefix)),this.layoutProcessors.push(new e.Common.DesktopLayoutProcessor(o.selectorPrefix)),this.layoutProcessors.push(new e.Common.MobileLayoutProcessor(o.selectorPrefix))},o.prototype.setupLightBox=function(){$(t.Keys.LightBoxKeys.LightBoxSelector).addClass("addressSearchLightBox"),$(t.Keys.LightBoxKeys.LightBoxSelector).attr("id","selectOccupationLightBox"),i.prototype.setupLightBox.call(this)},o.prototype.clearLayout=function(){this.layoutProcessors.forEach(function(t){return t.clear(null)})},o.prototype.onOccupationSelect=function(t){var e=$(t.target);$(this.selectOccupationTextBoxSelector).attr("occupationId",e.attr("id")),$(this.selectOccupationTextBoxSelector).val(e.text()),$(this.selectOccupationTextBoxSelector).data("ignore-blur","false"),$(this.selectOccupationTextBoxSelector).blur(),this.hide(),this.useragent.isIe9AndBelow()&&this.hide()},o.prototype.onClose=function(){$(this.selectOccupationTextBoxSelector).data("ignore-blur","false"),$(this.selectOccupationTextBoxSelector).blur(),this.hide()},o.prototype.setDynamicContent=function(){var t=this,e=new Array;$(this.occupationListSelector+" > div").each(function(t,i){var o=$(i),n=+o.attr("occupationId"),r=o.text();e.push({occupationId:n,description:r})});var i=$(this.dynamicContentSelector);i.empty();var o=["{0}","{1}"],n=new Array;e.forEach(function(e,i){n.push(t.occupationTemplate.replace(o[0],e.occupationId.toString()).replace(o[1],e.description))}),n.forEach(function(t,e){var o=$(t);i.append(o)})},o.lightBoxMessageSelector="div.searchMatchesLightBox > .lightBoxBody > p",o.selectorPrefix="searchMatchesLightBox",o}(e.BaseModalLightBoxProcessor);e.LightBoxSelectOccupationProcessor=i}(i=e.LightBox||(e.LightBox={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.isSupported=function(e){var i=this,o=!1;return e.features.forEach(function(e){i.isFeatureDefined(e)&&t.Enums.PlatformFeature[e]===t.Enums.PlatformFeature.BingoIosNativeAttribute&&(o=!0)}),o},e.prototype.performPlatformTask=function(){$("body").attr("data-is-bingo-ios-native","true")},e.prototype.isFeatureDefined=function(e){return"undefined"!=typeof t.Enums.PlatformFeature[e]},e}();e.BingoIosNativeAttributeProcessor=i}(i=e.Platform||(e.Platform={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.isSupported=function(e){var i=this,o=!1;return e.features.forEach(function(e){i.isFeatureDefined(e)&&t.Enums.PlatformFeature[e]===t.Enums.PlatformFeature.CasinoNativeAttribute&&(o=!0)}),o},e.prototype.performPlatformTask=function(){$("body").attr("data-is-casino-native","true")},e.prototype.isFeatureDefined=function(e){return"undefined"!=typeof t.Enums.PlatformFeature[e]},e}();e.CasinoNativeAttributeProcessor=i}(i=e.Platform||(e.Platform={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.isSupported=function(e){var i=this,o=!1;return e.features.forEach(function(e){i.isFeatureDefined(e)&&t.Enums.PlatformFeature[e]===t.Enums.PlatformFeature.CloseButton&&(o=!0)}),o},e.prototype.performPlatformTask=function(){var t=$(".su-Branding_CloseButton");t.addClass("showCloseButton")},e.prototype.isFeatureDefined=function(e){return"undefined"!=typeof t.Enums.PlatformFeature[e]},e}();e.CloseButtonProcessor=i}(i=e.Platform||(e.Platform={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.isSupported=function(e){var i=this,o=!1;return e.features.forEach(function(e){i.isFeatureDefined(e)&&t.Enums.PlatformFeature[e]===t.Enums.PlatformFeature.GamesAndroidNativeAttribute&&(o=!0)}),o},e.prototype.performPlatformTask=function(){$("body").attr("data-is-games-android-native","true")},e.prototype.isFeatureDefined=function(e){return"undefined"!=typeof t.Enums.PlatformFeature[e]},e}();e.GamesAndroidNativeAttributeProcessor=i}(i=e.Platform||(e.Platform={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.isSupported=function(e){var i=this,o=!1;return e.features.forEach(function(e){i.isFeatureDefined(e)&&t.Enums.PlatformFeature[e]===t.Enums.PlatformFeature.LiveDealerAttribute&&(o=!0)}),o},e.prototype.performPlatformTask=function(){$("body").attr("data-is-live-dealer","true")},e.prototype.isFeatureDefined=function(e){return"undefined"!=typeof t.Enums.PlatformFeature[e]},e}();e.LiveDealerAttributeProcessor=i}(i=e.Platform||(e.Platform={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.isSupported=function(e){var i=this,o=!1;return e.features.forEach(function(e){i.isFeatureDefined(e)&&t.Enums.PlatformFeature[e]===t.Enums.PlatformFeature.MembersHostedInCard&&(o=!0)}),o},e.prototype.performPlatformTask=function(){$("body").attr("data-hosted-in-card","true")},
e.prototype.isFeatureDefined=function(e){return"undefined"!=typeof t.Enums.PlatformFeature[e]},e}();e.MembersHostedInCardProcessor=i}(i=e.Platform||(e.Platform={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.isSupported=function(e){var i=this,o=!1;return e.features.forEach(function(e){i.isFeatureDefined(e)&&t.Enums.PlatformFeature[e]===t.Enums.PlatformFeature.MembersHostedInIFrame&&(o=!0)}),o},e.prototype.performPlatformTask=function(){$("body").attr("data-can-be-hosted","true")},e.prototype.isFeatureDefined=function(e){return"undefined"!=typeof t.Enums.PlatformFeature[e]},e}();e.MembersHostedInIFrameProcessor=i}(i=e.Platform||(e.Platform={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){}return e.prototype.isSupported=function(e){var i=this,o=!1;return e.features.forEach(function(e){i.isFeatureDefined(e)&&t.Enums.PlatformFeature[e]===t.Enums.PlatformFeature.ShowDateDropdown&&(o=!0)}),o},e.prototype.performPlatformTask=function(){$("body").attr("data-show-date-dropdown","true")},e.prototype.isFeatureDefined=function(e){return"undefined"!=typeof t.Enums.PlatformFeature[e]},e}();e.ShowDateDropdownProcessor=i}(i=e.Platform||(e.Platform={}))}(e=t.Processors||(t.Processors={}))}(Application||(Application={}));var Application;!function(t){var e;!function(e){var i;!function(e){var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.applicableCountryCodes=function(){return[t.Enums.CountryId.UnitedStatesOfAmerica]},i.prototype.generate=function(t){var e="",i="";return 0!==t.unitNumber.length&&(e=0===t.buildingNumber.length?t.unitNumber:t.unitNumber+" "+t.buildingNumber),0===e.length&&0!==t.buildingNumber.length&&(e=t.buildingNumber),0!==t.streetName.length&&(e=e+" "+t.streetName),""!=t.city&&(i=t.city),{addressLine1:e,addressLine2:"",addressLine3:"",townCity:i,county:"",stateRegion:"",state:0,postcode:t.postcode,addressSearchMonikerId:"",countryAddressAcceleratorLevelId:0,addressLookupMatchType:0,postalValidationStatus:15}},i}(e.BaseAddressStrategy);e.USAAddressStrategy=i}(i=e.Strategies||(e.Strategies={}))}(e=t.Services||(t.Services={}))}(Application||(Application={}));